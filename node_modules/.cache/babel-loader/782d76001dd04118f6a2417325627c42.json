{"ast":null,"code":"import _regeneratorRuntime from\"/Users/USER/Desktop/Agent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/USER/Desktop/Agent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/USER/Desktop/Agent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'./Btn.css';import Media from'react-media';import{useNavigate}from'react-router-dom';import{doc,updateDoc,increment,onSnapshot,deleteDoc}from'firebase/firestore';import moment from'moment';import FadeLoader from'react-spinners/FadeLoader';import{db}from'../../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var nowField=moment().date();// Return Btn Component\nexport default function ReturnBtn(){return/*#__PURE__*/_jsx(Media,{queries:{small:'(max-width: 599px)',medium:'(min-width: 600px) and (max-width:1199px)',large:'(min-width: 1200px)'},children:function children(matches){return/*#__PURE__*/_jsxs(_Fragment,{children:[matches.small&&/*#__PURE__*/_jsx(ScreenSmall,{}),matches.medium&&/*#__PURE__*/_jsx(ScreenLarge,{}),matches.large&&/*#__PURE__*/_jsx(ScreenLarge,{})]});}});}export var ScreenLarge=function ScreenLarge(){return/*#__PURE__*/_jsxs(\"div\",{className:\"wrp-btn-delete\",children:[/*#__PURE__*/_jsx(CancelBtn,{}),/*#__PURE__*/_jsx(DeleteBtn,{})]});};export var ScreenSmall=function ScreenSmall(){return/*#__PURE__*/_jsxs(\"div\",{className:\"wrp-btn-delete-sm\",children:[/*#__PURE__*/_jsx(CancelBtn,{}),/*#__PURE__*/_jsx(DeleteBtn,{})]});};export var CancelBtn=function CancelBtn(){var navigation=useNavigate();var handlepath=function handlepath(event){event.preventDefault();window.localStorage.setItem('rm #@!!/[] -',JSON.stringify(null));window.localStorage.setItem('@st#!--%#',JSON.stringify(null));navigation('/dash');};return/*#__PURE__*/_jsx(\"button\",{onClick:handlepath,className:\"Btn\",children:\"Anuller\"});};export var DeleteBtn=function DeleteBtn(){var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),listAgent=_React$useState2[0],setListAgent=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),listClient=_React$useState4[0],setListClient=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),loading=_React$useState6[0],setLoading=_React$useState6[1];React.useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return onSnapshot(doc(db,\"muungano\",\"partner\"),function(doc){setListAgent(doc.data().agent);setListClient(doc.data().client);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);window.console.log('error');case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);})),[]);var phoneNum=JSON.parse(window.localStorage.getItem('rm #@!!/[] -'));var status=JSON.parse(window.localStorage.getItem('@st#!--%#'));var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var indexAgent,indexClient,arrayAgent,arrayClient,i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();window.setTimeout(function(){setLoading(true);},650);indexAgent=Number(listAgent[nowField])-1;indexClient=Number(listClient[nowField])-1;arrayAgent=listAgent;arrayClient=listClient;for(i=nowField;i<=31;i++){arrayAgent[i]=indexAgent;arrayClient[i]=indexClient;}if(status==\"agent\"){incrementPartnerAgent(arrayAgent);}else{incrementPartnerClient(arrayClient);}_context2.next=10;return deleteDoc(doc(db,\"\".concat(status),phoneNum));case 10:window.setTimeout(function(){window.location.href=\"/dash\";},675);window.localStorage.setItem('rm #@!!/[] -',JSON.stringify(null));window.localStorage.setItem('@st#!--%#',JSON.stringify(null));case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"App-loading-Actif\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"App-Icon\",children:/*#__PURE__*/_jsx(FadeLoader,{size:15,color:'#00b8d4',loading:loading})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"Btn-Red\",children:\"Supprimer\"})]});};function incrementPartnerAgent(_x2){return _incrementPartnerAgent.apply(this,arguments);}function _incrementPartnerAgent(){_incrementPartnerAgent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(arrayAgent){var washingtonRef,partnerRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:washingtonRef=doc(db,\"muungano\",\"partner\");_context3.next=3;return updateDoc(washingtonRef,{agent:arrayAgent});case 3:partnerRef=doc(db,\"muunganomoney\",\"partner\");_context3.next=6;return updateDoc(partnerRef,{agent:increment(-1)});case 6:case\"end\":return _context3.stop();}}},_callee3);}));return _incrementPartnerAgent.apply(this,arguments);};function incrementPartnerClient(_x3){return _incrementPartnerClient.apply(this,arguments);}function _incrementPartnerClient(){_incrementPartnerClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(arrayClient){var washingtonRef,partnerRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:washingtonRef=doc(db,\"muungano\",\"partner\");_context4.next=3;return updateDoc(washingtonRef,{client:arrayClient});case 3:partnerRef=doc(db,\"muunganomoney\",\"partner\");_context4.next=6;return updateDoc(partnerRef,{client:increment(-1)});case 6:case\"end\":return _context4.stop();}}},_callee4);}));return _incrementPartnerClient.apply(this,arguments);};","map":{"version":3,"sources":["/Users/USER/Desktop/Agent/src/Remove/Delete/Btn.js"],"names":["React","Media","useNavigate","doc","updateDoc","increment","onSnapshot","deleteDoc","moment","FadeLoader","db","nowField","date","ReturnBtn","small","medium","large","matches","ScreenLarge","ScreenSmall","CancelBtn","navigation","handlepath","event","preventDefault","window","localStorage","setItem","JSON","stringify","DeleteBtn","useState","listAgent","setListAgent","listClient","setListClient","loading","setLoading","useEffect","data","agent","client","console","log","phoneNum","parse","getItem","status","handleDelete","setTimeout","indexAgent","Number","indexClient","arrayAgent","arrayClient","i","incrementPartnerAgent","incrementPartnerClient","location","href","washingtonRef","partnerRef"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Btn.css';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, updateDoc, increment, onSnapshot, deleteDoc } from 'firebase/firestore';\nimport moment from 'moment';\nimport FadeLoader from 'react-spinners/FadeLoader';\n\nimport { db } from '../../firebase';\n\nexport let nowField = moment().date();\n\n// Return Btn Component\nexport default function ReturnBtn() {\n return (\n  <Media\n   queries={{\n    small: '(max-width: 599px)',\n    medium: '(min-width: 600px) and (max-width:1199px)',\n    large: '(min-width: 1200px)',\n   }}>\n   {matches => (\n    <>\n     {matches.small && <ScreenSmall />}\n     {matches.medium && <ScreenLarge />}\n     {matches.large && <ScreenLarge />}\n    </>\n   )}\n  </Media>\n );\n}\n\n\nexport const ScreenLarge = () => (\n <div className='wrp-btn-delete'>\n  <CancelBtn />\n  <DeleteBtn />\n </div>\n);\nexport const ScreenSmall = () => (\n <div className='wrp-btn-delete-sm'>\n  <CancelBtn />\n  <DeleteBtn />\n </div>\n);\n\nexport const CancelBtn = () => {\n\n const navigation = useNavigate();\n const handlepath = (event) => {\n  event.preventDefault();\n  window.localStorage.setItem('rm #@!!/[] -', JSON.stringify(null));\n  window.localStorage.setItem('@st#!--%#', JSON.stringify(null));\n  navigation('/dash');\n }\n\n return (\n  <button onClick={handlepath} className='Btn'>Anuller</button>\n );\n};\nexport const DeleteBtn = () => {\n\n const [listAgent, setListAgent] = React.useState();\n const [listClient, setListClient] = React.useState();\n const [loading, setLoading] = React.useState(false);\n\n React.useEffect(async () => {\n\n  try {\n   await onSnapshot(doc(db, \"muungano\", \"partner\"), (doc) => {\n    setListAgent(doc.data().agent);\n    setListClient(doc.data().client);\n   });\n\n  } catch {\n   window.console.log('error');\n  }\n\n }, []);\n\n let phoneNum = JSON.parse(window.localStorage.getItem('rm #@!!/[] -'));\n let status = JSON.parse(window.localStorage.getItem('@st#!--%#'));\n\n const handleDelete = async (event) => {\n\n  event.preventDefault();\n\n  window.setTimeout(() => {\n   setLoading(true);\n  }, 650);\n\n  let indexAgent = Number(listAgent[nowField]) - 1;\n  let indexClient = Number(listClient[nowField]) - 1;\n\n  let arrayAgent = listAgent;\n  let arrayClient = listClient;\n\n  for (let i = nowField; i <= 31; i++) {\n   arrayAgent[i] = indexAgent;\n   arrayClient[i] = indexClient;\n  }\n\n  if (status == \"agent\") {\n   incrementPartnerAgent(arrayAgent);\n  } else {\n   incrementPartnerClient(arrayClient);\n  }\n\n  await deleteDoc(doc(db, `${status}`, phoneNum));\n  window.setTimeout(() => {\n   window.location.href = \"/dash\";\n  }, 675);\n\n  window.localStorage.setItem('rm #@!!/[] -', JSON.stringify(null));\n  window.localStorage.setItem('@st#!--%#', JSON.stringify(null));\n }\n\n return (\n  <>\n   {loading && <div className='App-loading-Actif'></div>}\n   {loading && <div className='App-Icon'>\n    <FadeLoader\n     size={15}\n     color={'#00b8d4'}\n     loading={loading}\n    />\n   </div>}\n\n   <button onClick={handleDelete} className='Btn-Red'>Supprimer</button>\n  </>\n );\n};\n\nasync function incrementPartnerAgent(arrayAgent) {\n\n const washingtonRef = doc(db, \"muungano\", \"partner\");\n await updateDoc(washingtonRef, {\n  agent: arrayAgent,\n });\n const partnerRef = doc(db, \"muunganomoney\", \"partner\");\n await updateDoc(partnerRef, {\n  agent: increment(-1),\n });\n\n};\nasync function incrementPartnerClient(arrayClient) {\n\n const washingtonRef = doc(db, \"muungano\", \"partner\");\n await updateDoc(washingtonRef, {\n  client: arrayClient,\n });\n const partnerRef = doc(db, \"muunganomoney\", \"partner\");\n await updateDoc(partnerRef, {\n  client: increment(-1),\n });\n\n};\n"]},"metadata":{},"sourceType":"module"}