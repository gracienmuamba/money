{"ast":null,"code":"import _objectSpread from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'./Input.css';import Media from'react-media';import{useForm}from'react-hook-form';import{useNavigate}from'react-router-dom';import{doc,getDocs,collection,updateDoc,increment,getDoc,onSnapshot,arrayUnion}from\"firebase/firestore\";import{db}from'../../../firebase';import{phoneX}from'../../../Sign/Input';import{sendPhone}from'../../../ValidExUsd/Input';import{frais,Unite,solde,money}from'../../../USD/Input';import Button from'@mui/material/Button';import Dialog from'@mui/material/Dialog';import DialogActions from'@mui/material/DialogActions';import DialogContent from'@mui/material/DialogContent';import DialogTitle from'@mui/material/DialogTitle';import DialogContentText from'@mui/material/DialogContentText';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var nowField=moment().date()-1;export var prixHash=0;export var hashTrue=true;// Input Field Component \nexport default function ReturnInput(){return/*#__PURE__*/_jsx(Media,{queries:{small:'(max-width: 599px)',medium:'(min-width: 600px) and (max-width:1199px)',large:'(min-width: 1200px)'},children:function children(matches){return/*#__PURE__*/_jsxs(_Fragment,{children:[matches.small&&/*#__PURE__*/_jsx(ScreenSmall,{}),matches.medium&&/*#__PURE__*/_jsx(SreenLarge,{}),matches.large&&/*#__PURE__*/_jsx(SreenLarge,{})]});}});};export var SreenLarge=function SreenLarge(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-input-send-money\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var ScreenSmall=function ScreenSmall(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-input-send-money-sm\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var FormInput=function FormInput(){var pushDocs=new Array();var verifierSend;var verifierGet;var navigation=useNavigate();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;//  order notebook\nvar _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),tableClient=_React$useState2[0],setTableClient=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),tableAgent=_React$useState4[0],setTableAgent=_React$useState4[1];var _React$useState5=React.useState(),_React$useState6=_slicedToArray(_React$useState5,2),tableUpgrade=_React$useState6[0],setTableUpgrade=_React$useState6[1];var _React$useState7=React.useState(),_React$useState8=_slicedToArray(_React$useState7,2),tableAdmin=_React$useState8[0],setTableAdmin=_React$useState8[1];var _React$useState9=React.useState(),_React$useState10=_slicedToArray(_React$useState9,2),tableFrais=_React$useState10[0],setTableFrais=_React$useState10[1];// send React useState  \nvar _React$useState11=React.useState(null),_React$useState12=_slicedToArray(_React$useState11,2),pin=_React$useState12[0],setPin=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),state=_React$useState14[0],setState=_React$useState14[1];var _React$useState15=React.useState(''),_React$useState16=_slicedToArray(_React$useState15,2),first=_React$useState16[0],setFirst=_React$useState16[1];var _React$useState17=React.useState(''),_React$useState18=_slicedToArray(_React$useState17,2),last=_React$useState18[0],setLast=_React$useState18[1];// getting React useState\nvar _React$useState19=React.useState(null),_React$useState20=_slicedToArray(_React$useState19,2),getstate=_React$useState20[0],setGetstate=_React$useState20[1];var _React$useState21=React.useState(''),_React$useState22=_slicedToArray(_React$useState21,2),getfirst=_React$useState22[0],setGetFirst=_React$useState22[1];var _React$useState23=React.useState(''),_React$useState24=_slicedToArray(_React$useState23,2),getlast=_React$useState24[0],setGetLast=_React$useState24[1];var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),open=_React$useState26[0],setOpen=_React$useState26[1];var _React$useState27=React.useState(true),_React$useState28=_slicedToArray(_React$useState27,2),fullWidth=_React$useState28[0],setFullWidth=_React$useState28[1];var _React$useState29=React.useState('sm'),_React$useState30=_slicedToArray(_React$useState29,2),maxWidth=_React$useState30[0],setMaxWidth=_React$useState30[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};React.useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var querySnapshot,sendRef,sendSnap,getRef,getSnap;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return onSnapshot(doc(db,\"muungano\",\"upgrade\"),function(doc){setTableUpgrade(doc.data().usd);});case 2:_context.next=4;return getDocs(collection(db,\"client\"));case 4:querySnapshot=_context.sent;querySnapshot.forEach(function(doc){pushDocs.push(doc.id);});verifierSend=pushDocs.some(function(value){return value==phoneX;});verifierGet=pushDocs.some(function(value){return value==sendPhone;});sendRef=doc(db,verifierSend?\"client\":\"agent\",phoneX);_context.next=11;return getDoc(sendRef);case 11:sendSnap=_context.sent;if(sendSnap.exists()){setPin(sendSnap.data().code);setState(sendSnap.data().state);setFirst(sendSnap.data().firstname);setLast(sendSnap.data().lastname);};getRef=doc(db,verifierGet?\"client\":\"agent\",sendPhone);_context.next=17;return getDoc(getRef);case 17:getSnap=_context.sent;if(getSnap.exists()){setGetstate(getSnap.data().state);setGetFirst(getSnap.data().firstname);setGetLast(getSnap.data().lastname);};_context.prev=20;_context.next=23;return onSnapshot(doc(db,\"clients\",\"emoney\"),function(doc){setTableClient(doc.data().usd);});case 23:_context.next=25;return onSnapshot(doc(db,\"agents\",\"emoney\"),function(doc){setTableAgent(doc.data().usd);});case 25:_context.next=27;return onSnapshot(doc(db,\"muungano\",\"upgrade\"),function(doc){setTableUpgrade(doc.data().usd);});case 27:_context.next=29;return onSnapshot(doc(db,\"muungano\",\"commission\"),function(doc){setTableAdmin(doc.data().usd);});case 29:_context.next=31;return onSnapshot(doc(db,\"agents\",\"commission\"),function(doc){setTableFrais(doc.data().usd);});case 31:_context.next=33;return onSnapshot(doc(db,\"muungano\",\"upgrade\"),function(doc){setTableUpgrade(doc.data().usd);});case 33:_context.next=38;break;case 35:_context.prev=35;_context.t0=_context[\"catch\"](20);window.console.log('Erreur disponible');case 38:case\"end\":return _context.stop();}}},_callee,null,[[20,35]]);})),[]);var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var sendUser,getUser,arrayAgent,arrayUpgrade,arrayClient,_arrayUpgrade,arrayAdmin,_x2,res,_arrayAgent,_arrayUpgrade2,_arrayClient,_arrayUpgrade3,arrayFrais,_arrayAdmin,x,y,resX,resY;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Checked if value code is length valid\nif(data.code.length!=6||pin!=data.code){setOpen(true);reset();}else{sendUser=first.toLowerCase()+' '+last.toLowerCase();getUser=getfirst.toLowerCase()+' '+getlast.toLowerCase();if(state==\"agent\"&&getstate==\"agent\"){hashTrue=false;prixHash=solde;arrayAgent=tableAgent;arrayUpgrade=tableUpgrade;arrayAgent[nowField]=Number(tableAgent[nowField])+solde;arrayUpgrade[nowField]=Number(tableUpgrade[nowField])+solde;swapInWithDocsAgent(phoneX,sendPhone,sendUser,getUser,solde,Unite,arrayAgent,arrayUpgrade);navigation('/send-success-usd');}else if(state==\"client\"&&getstate==\"client\"){hashTrue=true;prixHash=money;arrayClient=tableClient;_arrayUpgrade=tableUpgrade;arrayAdmin=tableAdmin;_x2=Number(frais);res=Math.round(_x2*100)/100;arrayClient[nowField]=Number(tableClient[nowField])+Math.floor(Number(money));_arrayUpgrade[nowField]=Number(tableUpgrade[nowField])+Math.floor(Number(money));arrayAdmin[nowField]=Number(tableAdmin[nowField])+res;isSwapInWithClientToClient(phoneX,sendPhone,sendUser,getUser,solde,money,Unite,arrayClient,_arrayUpgrade,arrayAdmin);navigation('/send-success-usd');}else{if(state==\"agent\"){hashTrue=false;prixHash=solde;_arrayAgent=tableAgent;_arrayUpgrade2=tableUpgrade;_arrayAgent[nowField]=Number(tableAgent[nowField])+solde;_arrayUpgrade2[nowField]=Number(tableUpgrade[nowField])+solde;swapInWithDocsAgentToClient(phoneX,sendPhone,sendUser,getUser,solde,Unite,_arrayAgent,_arrayUpgrade2);navigation('/send-success-usd');}else{hashTrue=true;prixHash=money;_arrayClient=tableClient;_arrayUpgrade3=tableUpgrade;arrayFrais=tableFrais;_arrayAdmin=tableAdmin;_arrayClient[nowField]=Number(tableClient[nowField])+Math.floor(Number(money));_arrayUpgrade3[nowField]=Number(tableUpgrade[nowField])+Math.floor(Number(money));x=Number(frais*70/100);y=Number(frais*30/100);resX=Math.round(x*100)/100;resY=Math.round(y*100)/100;_arrayAdmin[nowField]=Number(tableAdmin[nowField])+resX;arrayFrais[nowField]=Number(tableFrais[nowField])+resY;isSwapInWithClientToAgent(phoneX,sendPhone,sendUser,getUser,solde,money,Unite,_arrayClient,_arrayUpgrade3,arrayFrais,_arrayAdmin);navigation('/send-success-usd');}}}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",name:\"code\"},register('code',{required:true}))),/*#__PURE__*/_jsxs(Dialog,{fullWidth:fullWidth,maxWidth:maxWidth,open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"MuunganoMoney\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"Code d'erreur (PIN) Acc\\xE8s non valide\"})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Fermer\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Btn\",children:\"Valider\"})]});};function swapInWithDocsAgent(_x3,_x4,_x5,_x6,_x7,_x8,_x9,_x10){return _swapInWithDocsAgent.apply(this,arguments);}function _swapInWithDocsAgent(){_swapInWithDocsAgent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(sendPhone,getPhone,sendUser,getUser,prix,unite,arrayAgentMoney,upgrade){var time,send,get,sendRef,getRef,agentsemoneyRef,upgradeRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:time=moment().format('LLL');send={date:time,solde:\"\".concat(prix,\" \").concat(unite),phone:getPhone,user:getUser,type:'envoyer'};get={date:time,solde:\"\".concat(prix,\" \").concat(unite),phone:sendPhone,user:sendUser,type:'réussi'};sendRef=doc(db,\"agent\",sendPhone);_context3.next=6;return updateDoc(sendRef,{usd:increment(-prix),money:prix,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format(),swap:arrayUnion(send)});case 6:getRef=doc(db,\"agent\",getPhone);_context3.next=9;return updateDoc(getRef,{usd:increment(prix),money:prix,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format(),swap:arrayUnion(get)});case 9:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context3.next=12;return updateDoc(agentsemoneyRef,{usd:arrayAgentMoney});case 12:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context3.next=15;return updateDoc(upgradeRef,{usd:upgrade});case 15:case\"end\":return _context3.stop();}}},_callee3);}));return _swapInWithDocsAgent.apply(this,arguments);};function swapInWithDocsAgentToClient(_x11,_x12,_x13,_x14,_x15,_x16,_x17,_x18){return _swapInWithDocsAgentToClient.apply(this,arguments);}function _swapInWithDocsAgentToClient(){_swapInWithDocsAgentToClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(sendPhone,getPhone,sendUser,getUser,prix,unite,arrayAgentMoney,upgrade){var time,send,get,sendRef,getRef,agentsemoneyRef,upgradeRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:time=moment().format('LLL');send={date:time,solde:\"\".concat(prix,\" \").concat(unite),phone:getPhone,user:getUser,type:'envoyer'};get={date:time,solde:\"\".concat(prix,\" \").concat(unite),phone:sendPhone,user:sendUser,type:'réussi'};sendRef=doc(db,\"agent\",sendPhone);_context4.next=6;return updateDoc(sendRef,{usd:increment(-prix),money:prix,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format(),swap:arrayUnion(send)});case 6:getRef=doc(db,\"client\",getPhone);_context4.next=9;return updateDoc(getRef,{usd:increment(prix),money:prix,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format(),swap:arrayUnion(get)});case 9:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context4.next=12;return updateDoc(agentsemoneyRef,{usd:arrayAgentMoney});case 12:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context4.next=15;return updateDoc(upgradeRef,{usd:upgrade});case 15:case\"end\":return _context4.stop();}}},_callee4);}));return _swapInWithDocsAgentToClient.apply(this,arguments);};function isSwapInWithClientToAgent(_x19,_x20,_x21,_x22,_x23,_x24,_x25,_x26,_x27,_x28,_x29){return _isSwapInWithClientToAgent.apply(this,arguments);}function _isSwapInWithClientToAgent(){_isSwapInWithClientToAgent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(sendPhone,getPhone,sendUser,getUser,prix,money,unite,arrayAgentMoney,upgrade,agentFrais,adminFrais){var time,send,get,thrift,thriftadmin,sendRef,getRef,adminRef,agentsemoneyRef,upgradeRef,agentFraisRef,fraisRef;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:time=moment().format('LLL');send={date:time,solde:\"\".concat(money,\" \").concat(unite),phone:getPhone,user:getUser,type:'envoyer'};get={date:time,solde:\"\".concat(money,\" \").concat(unite),phone:sendPhone,user:sendUser,type:'réussi'};thrift=Number(frais*30/100);thriftadmin=Number(frais*70/100);thrift=Math.round(thrift*100)/100;thriftadmin=Math.round(thriftadmin*100)/100;sendRef=doc(db,\"client\",sendPhone);_context5.next=10;return updateDoc(sendRef,{usd:increment(-prix),money:money,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format(),swap:arrayUnion(send)});case 10:getRef=doc(db,\"agent\",getPhone);_context5.next=13;return updateDoc(getRef,{usd:increment(money),money:money,user:sendUser,unite:unite,thriftusd:increment(thrift),phoneclient:sendPhone,delay:moment().format(),swap:arrayUnion(get)});case 13:adminRef=doc(db,\"muunganomoney\",\"money\");_context5.next=16;return updateDoc(adminRef,{spredusd:increment(thriftadmin)});case 16:agentsemoneyRef=doc(db,\"clients\",\"emoney\");_context5.next=19;return updateDoc(agentsemoneyRef,{usd:arrayAgentMoney});case 19:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context5.next=22;return updateDoc(upgradeRef,{usd:upgrade});case 22:agentFraisRef=doc(db,\"agents\",\"commission\");_context5.next=25;return updateDoc(agentFraisRef,{usd:agentFrais});case 25:fraisRef=doc(db,\"muungano\",\"commission\");_context5.next=28;return updateDoc(fraisRef,{usd:adminFrais});case 28:case\"end\":return _context5.stop();}}},_callee5);}));return _isSwapInWithClientToAgent.apply(this,arguments);};function isSwapInWithClientToClient(_x30,_x31,_x32,_x33,_x34,_x35,_x36,_x37,_x38,_x39){return _isSwapInWithClientToClient.apply(this,arguments);}function _isSwapInWithClientToClient(){_isSwapInWithClientToClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(sendPhone,getPhone,sendUser,getUser,prix,money,unite,arrayAgentMoney,upgrade,adminFrais){var time,send,get,thriftadmin,sendRef,getRef,adminRef,agentsemoneyRef,upgradeRef,fraisRef;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:time=moment().format('LLL');send={date:time,solde:\"\".concat(money,\" \").concat(unite),phone:getPhone,user:getUser,type:'envoyer'};get={date:time,solde:\"\".concat(money,\" \").concat(unite),phone:sendPhone,user:sendUser,type:'réussi'};thriftadmin=Number(frais);thriftadmin=Math.round(thriftadmin*100)/100;sendRef=doc(db,\"client\",sendPhone);_context6.next=8;return updateDoc(sendRef,{usd:increment(-prix),money:money,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format(),swap:arrayUnion(send)});case 8:getRef=doc(db,\"client\",getPhone);_context6.next=11;return updateDoc(getRef,{usd:increment(money),money:money,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format(),swap:arrayUnion(get)});case 11:adminRef=doc(db,\"muunganomoney\",\"money\");_context6.next=14;return updateDoc(adminRef,{spredusd:increment(thriftadmin)});case 14:agentsemoneyRef=doc(db,\"clients\",\"emoney\");_context6.next=17;return updateDoc(agentsemoneyRef,{usd:arrayAgentMoney});case 17:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context6.next=20;return updateDoc(upgradeRef,{usd:upgrade});case 20:fraisRef=doc(db,\"muungano\",\"commission\");_context6.next=23;return updateDoc(fraisRef,{usd:adminFrais});case 23:case\"end\":return _context6.stop();}}},_callee6);}));return _isSwapInWithClientToClient.apply(this,arguments);};","map":{"version":3,"sources":["/Users/USER/Desktop/MuunganoMoney/src/Pin/Usd/Simple/Input.js"],"names":["React","Media","useForm","useNavigate","doc","getDocs","collection","updateDoc","increment","getDoc","onSnapshot","arrayUnion","db","phoneX","sendPhone","frais","Unite","solde","money","Button","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","moment","nowField","date","prixHash","hashTrue","ReturnInput","small","medium","large","matches","SreenLarge","ScreenSmall","FormInput","pushDocs","Array","verifierSend","verifierGet","navigation","register","handleSubmit","reset","useState","tableClient","setTableClient","tableAgent","setTableAgent","tableUpgrade","setTableUpgrade","tableAdmin","setTableAdmin","tableFrais","setTableFrais","pin","setPin","state","setState","first","setFirst","last","setLast","getstate","setGetstate","getfirst","setGetFirst","getlast","setGetLast","open","setOpen","fullWidth","setFullWidth","maxWidth","setMaxWidth","handleClickOpen","handleClose","useEffect","data","usd","querySnapshot","forEach","push","id","some","value","sendRef","sendSnap","exists","code","firstname","lastname","getRef","getSnap","window","console","log","onSubmit","length","sendUser","toLowerCase","getUser","arrayAgent","arrayUpgrade","Number","swapInWithDocsAgent","arrayClient","arrayAdmin","x","res","Math","round","floor","isSwapInWithClientToClient","swapInWithDocsAgentToClient","arrayFrais","y","resX","resY","isSwapInWithClientToAgent","required","getPhone","prix","unite","arrayAgentMoney","upgrade","time","format","send","phone","user","type","get","phoneclient","delay","swap","agentsemoneyRef","upgradeRef","agentFrais","adminFrais","thrift","thriftadmin","thriftusd","adminRef","spredusd","agentFraisRef","fraisRef"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Input.css';\nimport Media from 'react-media';\nimport { useForm } from 'react-hook-form';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, getDocs, collection, updateDoc, increment, getDoc, onSnapshot, arrayUnion } from \"firebase/firestore\";\nimport { db } from '../../../firebase';\n\nimport { phoneX } from '../../../Sign/Input';\nimport { sendPhone } from '../../../ValidExUsd/Input';\nimport { frais, Unite, solde, money } from '../../../USD/Input';\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\n\nimport moment from 'moment';\n\nexport let nowField = (moment().date()) - 1;\n\nexport let prixHash = 0;\nexport let hashTrue = true;\n\n// Input Field Component \nexport default function ReturnInput() {\n return (\n  <Media\n   queries={{\n    small: '(max-width: 599px)',\n    medium: '(min-width: 600px) and (max-width:1199px)',\n    large: '(min-width: 1200px)',\n   }}>\n   {matches => (\n    <>\n     {matches.small && <ScreenSmall />}\n     {matches.medium && <SreenLarge />}\n     {matches.large && <SreenLarge />}\n    </>\n   )}\n  </Media>\n );\n};\n\nexport const SreenLarge = () => (\n <div className='wrp-input-send-money'>\n  <FormInput />\n\n </div>\n);\nexport const ScreenSmall = () => (\n <div className='wrp-input-send-money-sm'>\n  <FormInput />\n </div>\n);\nexport const FormInput = () => {\n\n let pushDocs = new Array();\n let verifierSend;\n let verifierGet;\n\n const navigation = useNavigate();\n const { register, handleSubmit, reset } = useForm();\n\n //  order notebook\n const [tableClient, setTableClient] = React.useState();\n const [tableAgent, setTableAgent] = React.useState();\n const [tableUpgrade, setTableUpgrade] = React.useState();\n const [tableAdmin, setTableAdmin] = React.useState();\n const [tableFrais, setTableFrais] = React.useState();\n\n // send React useState  \n const [pin, setPin] = React.useState(null);\n const [state, setState] = React.useState(null);\n const [first, setFirst] = React.useState('');\n const [last, setLast] = React.useState('');\n\n // getting React useState\n const [getstate, setGetstate] = React.useState(null);\n const [getfirst, setGetFirst] = React.useState('');\n const [getlast, setGetLast] = React.useState('');\n\n\n const [open, setOpen] = React.useState(false);\n const [fullWidth, setFullWidth] = React.useState(true);\n const [maxWidth, setMaxWidth] = React.useState('sm');\n\n const handleClickOpen = () => {\n  setOpen(true);\n };\n const handleClose = () => {\n  setOpen(false);\n };\n\n React.useEffect(async () => {\n  await onSnapshot(doc(db, \"muungano\", \"upgrade\"), (doc) => {\n   setTableUpgrade(doc.data().usd);\n  });\n\n  const querySnapshot = await getDocs(collection(db, \"client\"));\n  querySnapshot.forEach((doc) => {\n   pushDocs.push(doc.id);\n  });\n\n  verifierSend = pushDocs.some(value => value == phoneX);\n  verifierGet = pushDocs.some(value => value == sendPhone);\n\n  const sendRef = doc(db, verifierSend ? \"client\" : \"agent\", phoneX);\n  const sendSnap = await getDoc(sendRef);\n\n  if (sendSnap.exists()) {\n   setPin(sendSnap.data().code);\n   setState(sendSnap.data().state);\n   setFirst(sendSnap.data().firstname);\n   setLast(sendSnap.data().lastname);\n  };\n\n  const getRef = doc(db, verifierGet ? \"client\" : \"agent\", sendPhone);\n  const getSnap = await getDoc(getRef);\n\n  if (getSnap.exists()) {\n   setGetstate(getSnap.data().state);\n   setGetFirst(getSnap.data().firstname);\n   setGetLast(getSnap.data().lastname);\n  };\n\n  try {\n   await onSnapshot(doc(db, \"clients\", \"emoney\"), (doc) => {\n    setTableClient(doc.data().usd);\n   });\n\n   await onSnapshot(doc(db, \"agents\", \"emoney\"), (doc) => {\n    setTableAgent(doc.data().usd);\n   });\n\n   await onSnapshot(doc(db, \"muungano\", \"upgrade\"), (doc) => {\n    setTableUpgrade(doc.data().usd);\n   });\n\n   await onSnapshot(doc(db, \"muungano\", \"commission\"), (doc) => {\n    setTableAdmin(doc.data().usd);\n   });\n\n   await onSnapshot(doc(db, \"agents\", \"commission\"), (doc) => {\n    setTableFrais(doc.data().usd);\n   });\n\n   await onSnapshot(doc(db, \"muungano\", \"upgrade\"), (doc) => {\n    setTableUpgrade(doc.data().usd);\n   });\n\n  } catch {\n   window.console.log('Erreur disponible');\n  }\n\n\n }, []);\n\n const onSubmit = async (data) => {\n\n  // Checked if value code is length valid\n  if (data.code.length != 6 || pin != data.code) {\n   setOpen(true);\n   reset();\n\n  } else {\n   const sendUser = first.toLowerCase() + ' ' + last.toLowerCase();\n   const getUser = getfirst.toLowerCase() + ' ' + getlast.toLowerCase();\n\n   if (state == \"agent\" && getstate == \"agent\") {\n\n    hashTrue = false;\n    prixHash = solde;\n\n\n    let arrayAgent = tableAgent;\n    let arrayUpgrade = tableUpgrade;\n\n    arrayAgent[nowField] = Number(tableAgent[nowField]) + solde;\n    arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + solde;\n\n    swapInWithDocsAgent(phoneX, sendPhone, sendUser, getUser, solde, Unite, arrayAgent, arrayUpgrade);\n    navigation('/send-success-usd');\n\n   } else if (state == \"client\" && getstate == \"client\") {\n\n    hashTrue = true;\n    prixHash = money;\n\n\n    let arrayClient = tableClient;\n    let arrayUpgrade = tableUpgrade;\n    let arrayAdmin = tableAdmin;\n\n    let x = (Number(frais));\n    let res = Math.round(x * 100) / 100;\n\n    arrayClient[nowField] = Number(tableClient[nowField]) + Math.floor(Number(money));\n    arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + Math.floor(Number(money));\n    arrayAdmin[nowField] = Number(tableAdmin[nowField]) + res;\n\n    isSwapInWithClientToClient(phoneX, sendPhone, sendUser, getUser, solde, money, Unite, arrayClient, arrayUpgrade, arrayAdmin);\n\n    navigation('/send-success-usd');\n   } else {\n\n    if (state == \"agent\") {\n\n     hashTrue = false;\n     prixHash = solde;\n\n     let arrayAgent = tableAgent;\n     let arrayUpgrade = tableUpgrade;\n\n     arrayAgent[nowField] = Number(tableAgent[nowField]) + solde;\n     arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + solde;\n\n     swapInWithDocsAgentToClient(phoneX, sendPhone, sendUser, getUser, solde, Unite, arrayAgent, arrayUpgrade);\n     navigation('/send-success-usd');\n\n    } else {\n\n     hashTrue = true;\n     prixHash = money;\n\n     let arrayClient = tableClient;\n     let arrayUpgrade = tableUpgrade;\n     let arrayFrais = tableFrais;\n     let arrayAdmin = tableAdmin;\n\n     arrayClient[nowField] = Number(tableClient[nowField]) + Math.floor(Number(money));\n     arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + Math.floor(Number(money));\n\n\n     var x = Number(frais * 70 / 100);\n     var y = Number(frais * 30 / 100);\n\n     let resX = Math.round(x * 100) / 100;\n     let resY = Math.round(y * 100) / 100;\n\n     arrayAdmin[nowField] = Number(tableAdmin[nowField]) + resX;\n     arrayFrais[nowField] = Number(tableFrais[nowField]) + resY;\n     isSwapInWithClientToAgent(phoneX, sendPhone, sendUser, getUser, solde, money, Unite, arrayClient, arrayUpgrade, arrayFrais, arrayAdmin);\n\n     navigation('/send-success-usd');\n\n    }\n\n   }\n\n\n  }\n };\n\n return (\n  <form onSubmit={handleSubmit(onSubmit)}>\n   <input type='password'\n    placeholder='•••••••'\n    name='code' {...register('code', { required: true })}\n   />\n\n   <Dialog\n    fullWidth={fullWidth}\n    maxWidth={maxWidth}\n    open={open}\n    onClose={handleClose}\n   >\n    <DialogTitle>MuunganoMoney</DialogTitle>\n    <DialogContent>\n\n     <DialogContentText>\n      Code d'erreur (PIN) Accès non valide\n     </DialogContentText>\n\n    </DialogContent>\n    <DialogActions>\n     <Button onClick={handleClose}>Fermer</Button>\n    </DialogActions>\n   </Dialog>\n\n\n   <button className='Btn'>Valider</button>\n  </form>\n )\n};\n\nasync function swapInWithDocsAgent(sendPhone, getPhone, sendUser, getUser, prix, unite, arrayAgentMoney, upgrade) {\n\n let time = moment().format('LLL');\n let send = { date: time, solde: `${prix} ${unite}`, phone: getPhone, user: getUser, type: 'envoyer' }\n let get = { date: time, solde: `${prix} ${unite}`, phone: sendPhone, user: sendUser, type: 'réussi' }\n\n\n const sendRef = doc(db, \"agent\", sendPhone);\n await updateDoc(sendRef, {\n  usd: increment(-(prix)),\n  money: prix,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format(),\n  swap: arrayUnion(send)\n });\n\n const getRef = doc(db, \"agent\", getPhone);\n await updateDoc(getRef, {\n  usd: increment(prix),\n  money: prix,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format(),\n  swap: arrayUnion(get)\n });\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  usd: arrayAgentMoney\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  usd: upgrade,\n });\n\n};\nasync function swapInWithDocsAgentToClient(sendPhone, getPhone, sendUser, getUser, prix, unite, arrayAgentMoney, upgrade) {\n\n let time = moment().format('LLL');\n let send = { date: time, solde: `${prix} ${unite}`, phone: getPhone, user: getUser, type: 'envoyer' }\n let get = { date: time, solde: `${prix} ${unite}`, phone: sendPhone, user: sendUser, type: 'réussi' }\n\n\n const sendRef = doc(db, \"agent\", sendPhone);\n await updateDoc(sendRef, {\n  usd: increment(-(prix)),\n  money: prix,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format(),\n  swap: arrayUnion(send)\n });\n\n const getRef = doc(db, \"client\", getPhone);\n await updateDoc(getRef, {\n  usd: increment(prix),\n  money: prix,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format(),\n  swap: arrayUnion(get)\n });\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  usd: arrayAgentMoney,\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  usd: upgrade,\n });\n\n};\nasync function isSwapInWithClientToAgent(sendPhone, getPhone, sendUser, getUser, prix, money, unite, arrayAgentMoney, upgrade, agentFrais, adminFrais) {\n\n let time = moment().format('LLL');\n let send = { date: time, solde: `${money} ${unite}`, phone: getPhone, user: getUser, type: 'envoyer' }\n let get = { date: time, solde: `${money} ${unite}`, phone: sendPhone, user: sendUser, type: 'réussi' }\n\n var thrift = Number(frais * 30 / 100);\n var thriftadmin = Number(frais * 70 / 100);\n\n thrift = Math.round(thrift * 100) / 100;\n thriftadmin = Math.round(thriftadmin * 100) / 100;\n\n const sendRef = doc(db, \"client\", sendPhone);\n await updateDoc(sendRef, {\n  usd: increment(-(prix)),\n  money: money,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format(),\n  swap: arrayUnion(send)\n });\n\n const getRef = doc(db, \"agent\", getPhone);\n await updateDoc(getRef, {\n  usd: increment(money),\n  money: money,\n  user: sendUser,\n  unite: unite,\n  thriftusd: increment(thrift),\n  phoneclient: sendPhone,\n  delay: moment().format(),\n  swap: arrayUnion(get)\n });\n\n const adminRef = doc(db, \"muunganomoney\", \"money\");\n await updateDoc(adminRef, {\n  spredusd: increment(thriftadmin)\n });\n\n const agentsemoneyRef = doc(db, \"clients\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  usd: arrayAgentMoney,\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  usd: upgrade,\n });\n\n const agentFraisRef = doc(db, \"agents\", \"commission\");\n await updateDoc(agentFraisRef, {\n  usd: agentFrais,\n });\n\n const fraisRef = doc(db, \"muungano\", \"commission\");\n await updateDoc(fraisRef, {\n  usd: adminFrais,\n });\n\n};\nasync function isSwapInWithClientToClient(sendPhone, getPhone, sendUser, getUser, prix, money, unite, arrayAgentMoney, upgrade, adminFrais) {\n\n\n let time = moment().format('LLL');\n let send = { date: time, solde: `${money} ${unite}`, phone: getPhone, user: getUser, type: 'envoyer' }\n let get = { date: time, solde: `${money} ${unite}`, phone: sendPhone, user: sendUser, type: 'réussi' }\n\n var thriftadmin = Number(frais);\n thriftadmin = Math.round(thriftadmin * 100) / 100;\n\n const sendRef = doc(db, \"client\", sendPhone);\n await updateDoc(sendRef, {\n  usd: increment(-(prix)),\n  money: money,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format(),\n  swap: arrayUnion(send)\n });\n\n const getRef = doc(db, \"client\", getPhone);\n await updateDoc(getRef, {\n  usd: increment(money),\n  money: money,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format(),\n  swap: arrayUnion(get)\n });\n\n const adminRef = doc(db, \"muunganomoney\", \"money\");\n await updateDoc(adminRef, {\n  spredusd: increment(thriftadmin)\n });\n\n const agentsemoneyRef = doc(db, \"clients\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  usd: arrayAgentMoney,\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  usd: upgrade\n });\n\n const fraisRef = doc(db, \"muungano\", \"commission\");\n await updateDoc(fraisRef, {\n  usd: adminFrais,\n });\n\n};\n\n\n"]},"metadata":{},"sourceType":"module"}