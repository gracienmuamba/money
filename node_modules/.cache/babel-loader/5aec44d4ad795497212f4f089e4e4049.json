{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Documents/Money/src/Pret/Pin/Now/Input.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Input.css';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\nimport { collection, getDocs, doc, onSnapshot, updateDoc, increment, arrayUnion, setDoc } from 'firebase/firestore';\nimport { db } from '../../../firebase';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport IconButton from '@mui/material/IconButton';\nimport Input from '@mui/material/Input';\nimport InputLabel from '@mui/material/InputLabel';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport FormControl from '@mui/material/FormControl';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport moment from 'moment'; // View Form Update view\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ReturnFormUpdate() {\n  return /*#__PURE__*/_jsxDEV(Media, {\n    queries: {\n      small: '(max-width: 599px)',\n      medium: '(min-width: 600px) and (max-width:1199px)',\n      large: '(min-width: 1200px)'\n    },\n    children: matches => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [matches.small && /*#__PURE__*/_jsxDEV(ScreenSmall, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }, this), matches.medium && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 30\n      }, this), matches.large && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n_c = ReturnFormUpdate;\n;\nexport const ScreenLarge = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-form-input-nows\",\n  children: /*#__PURE__*/_jsxDEV(FormInputField, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 49,\n  columnNumber: 3\n}, this);\n_c2 = ScreenLarge;\nexport const ScreenSmall = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-form-input-nows\",\n  children: /*#__PURE__*/_jsxDEV(FormInputField, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 54,\n  columnNumber: 3\n}, this);\n_c3 = ScreenSmall;\nexport const FormInputField = () => {\n  _s();\n\n  let regular = /[a-z]+/;\n  const navigation = useNavigate();\n  const {\n    handleSubmit,\n    reset,\n    control\n  } = useForm();\n  const [pin, setPin] = React.useState(null);\n  const [fullWidth, setFullWidth] = React.useState(true);\n  const [maxWidth, setMaxWidth] = React.useState('sm');\n  const [open, setOpen] = React.useState(false);\n  const [showPassword, setShowPassword] = React.useState(false);\n\n  const handleClickShowPassword = () => setShowPassword(show => !show);\n\n  const handleMouseDownPassword = event => {\n    event.preventDefault();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  React.useEffect(async () => {\n    try {\n      await onSnapshot(doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n        setPin(doc.data().code);\n      });\n    } catch {\n      window.console.log(`Erreur`);\n    }\n  }, []);\n\n  const onSubmit = async data => {\n    if (data.code === undefined) {\n      setOpen(true);\n      reset();\n    } else {\n      if (data.code.length != 6 || regular.test(data.code)) {\n        setOpen(true);\n        reset();\n      } else {\n        if (pin != data.code) {\n          setOpen(true);\n          reset();\n        } else {\n          let valuepret = JSON.parse(window.localStorage.getItem('^^pret->value'));\n          let countpret = JSON.parse(window.localStorage.getItem('&&money::pret__'));\n          let datacount = JSON.parse(window.localStorage.getItem('^^pret->count'));\n\n          if (JSON.parse(window.localStorage.getItem('^^pret->ok'))) {\n            asKedpretActive();\n            asKedpret(JSON.parse(window.localStorage.getItem('^^pret->value')));\n            asKedDecrimentpret(JSON.parse(window.localStorage.getItem('^^pret->count')));\n            JSON.parse(window.localStorage.getItem('^^pret->part')) && asKedpretpart(valuepret);\n          } else {\n            asKedpret(JSON.parse(window.localStorage.getItem('^^pret->value')));\n            asKedDecrimentpret(JSON.parse(window.localStorage.getItem('^^pret->count')));\n            let pretInfo = 'pret' + JSON.parse(window.localStorage.getItem('USER'));\n            collectionPret(pretInfo, moment().format(), Number(valuepret), Number(countpret), datacount);\n            JSON.parse(window.localStorage.getItem('^^pret->part')) && asKedpretpart(valuepret);\n          }\n\n          window.localStorage.setItem('^^pret->ok', JSON.stringify(false));\n          window.localStorage.setItem('^^pret->', JSON.stringify(false));\n          window.localStorage.setItem('^^snack->', JSON.stringify(true));\n          window.localStorage.setItem('^^pret->part', JSON.stringify(false));\n          window.setTimeout(() => {\n            navigation('/pret/dash');\n          }, 500);\n        }\n      }\n\n      ;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(FormControl, {\n      sx: {\n        width: '100%'\n      },\n      variant: \"standard\",\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        htmlFor: \"standard-adornment-password\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"pop-up\",\n          children: \"Pin actuel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 59\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controller, {\n        name: \"code\",\n        control: control,\n        render: ({\n          field\n        }) => /*#__PURE__*/_jsxDEV(Input, {\n          id: \"standard-adornment-password\",\n          ...field,\n          type: showPassword ? 'numeric' : 'password',\n          inputProps: {\n            autoComplete: \"off\",\n            inputMode: 'numeric'\n          },\n          endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"end\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"toggle password visibility\",\n              onClick: handleClickShowPassword,\n              onMouseDown: handleMouseDownPassword,\n              children: showPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 57\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      fullWidth: fullWidth,\n      maxWidth: maxWidth,\n      open: open,\n      onClose: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"pop-up\",\n          children: \"MuunganoMoney\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pop-up\",\n            children: \"Code pin Incorrect\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pop-up\",\n            children: \"Fermer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"Btn-Broker\",\n      children: \"Envoi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n}; // add pret for client\n\n_s(FormInputField, \"4k/fu0/UVNoilkUyQNWTk/BBgN8=\", false, function () {\n  return [useNavigate, useForm];\n});\n\n_c4 = FormInputField;\nexport async function asKedpret(prix) {\n  const washingtonRef = doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    cdf: increment(-prix),\n    pretcdf: increment(-prix),\n    date: moment().format()\n  });\n}\n; // add pret for client\n\nexport async function asKedpretpart(prix) {\n  const washingtonRef = doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    cdf: prix,\n    pretcdf: prix,\n    date: moment().format()\n  });\n}\n;\nexport async function asKedDecrimentpret(prix) {\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    cdf: increment(-prix)\n  });\n}\n; // add pret for client active\n\nexport async function asKedpretActive() {\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    pret: false,\n    pretactive: false,\n    pretregister: false\n  });\n}\n; // view pret \n\nexport async function collectionPret(userCollection, userDocs, current, pret, reimburse) {\n  let obj = {\n    pret: pret,\n    reimburse: reimburse,\n    current: current,\n    devise: false\n  };\n  await setDoc(doc(db, userCollection, userDocs), {\n    date: moment().format(),\n    data: arrayUnion(obj),\n    devise: false\n  }, {\n    merge: true\n  });\n}\n;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ReturnFormUpdate\");\n$RefreshReg$(_c2, \"ScreenLarge\");\n$RefreshReg$(_c3, \"ScreenSmall\");\n$RefreshReg$(_c4, \"FormInputField\");","map":{"version":3,"sources":["/Users/USER/Documents/Money/src/Pret/Pin/Now/Input.js"],"names":["React","Media","useNavigate","useForm","Controller","collection","getDocs","doc","onSnapshot","updateDoc","increment","arrayUnion","setDoc","db","Button","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","IconButton","Input","InputLabel","InputAdornment","FormControl","Visibility","VisibilityOff","moment","ReturnFormUpdate","small","medium","large","matches","ScreenLarge","ScreenSmall","FormInputField","regular","navigation","handleSubmit","reset","control","pin","setPin","useState","fullWidth","setFullWidth","maxWidth","setMaxWidth","open","setOpen","showPassword","setShowPassword","handleClickShowPassword","show","handleMouseDownPassword","event","preventDefault","handleClose","useEffect","JSON","parse","window","localStorage","getItem","data","code","console","log","onSubmit","undefined","length","test","valuepret","countpret","datacount","asKedpretActive","asKedpret","asKedDecrimentpret","asKedpretpart","pretInfo","collectionPret","format","Number","setItem","stringify","setTimeout","width","field","autoComplete","inputMode","prix","washingtonRef","cdf","pretcdf","date","pret","pretactive","pretregister","userCollection","userDocs","current","reimburse","obj","devise","merge"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Input.css';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { collection, getDocs, doc, onSnapshot, updateDoc, increment, arrayUnion, setDoc } from 'firebase/firestore';\nimport { db } from '../../../firebase';\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\n\nimport IconButton from '@mui/material/IconButton';\nimport Input from '@mui/material/Input';\nimport InputLabel from '@mui/material/InputLabel';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport FormControl from '@mui/material/FormControl';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport moment from 'moment';\n\n\n\n// View Form Update view\nexport default function ReturnFormUpdate() {\n  return (\n    <Media\n      queries={{\n        small: '(max-width: 599px)',\n        medium: '(min-width: 600px) and (max-width:1199px)',\n        large: '(min-width: 1200px)',\n      }}>\n      {matches => (\n        <>\n          {matches.small && <ScreenSmall />}\n          {matches.medium && <ScreenLarge />}\n          {matches.large && <ScreenLarge />}\n        </>\n      )}\n    </Media>\n  );\n};\n\nexport const ScreenLarge = () => (\n  <div className='wrp-form-input-nows'>\n    <FormInputField />\n  </div>\n);\nexport const ScreenSmall = () => (\n  <div className='wrp-form-input-nows'>\n    <FormInputField />\n  </div>\n);\nexport const FormInputField = () => {\n\n  let regular = /[a-z]+/;\n\n  const navigation = useNavigate();\n  const { handleSubmit, reset, control } = useForm();\n  const [pin, setPin] = React.useState(null);\n\n  const [fullWidth, setFullWidth] = React.useState(true);\n  const [maxWidth, setMaxWidth] = React.useState('sm');\n  const [open, setOpen] = React.useState(false);\n  const [showPassword, setShowPassword] = React.useState(false);\n\n  const handleClickShowPassword = () => setShowPassword((show) => !show);\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  }\n\n  React.useEffect(async () => {\n\n    try {\n      await onSnapshot(doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n        setPin(doc.data().code);\n      });\n    } catch {\n      window.console.log(`Erreur`);\n    }\n\n  }, []);\n\n\n  const onSubmit = async (data) => {\n\n    if (data.code === undefined) {\n      setOpen(true);\n      reset();\n\n    } else {\n\n      if (data.code.length != 6 || regular.test(data.code)) {\n        setOpen(true);\n        reset();\n\n      } else {\n\n        if (pin != data.code) {\n          setOpen(true);\n          reset();\n        } else {\n\n          let valuepret = JSON.parse(window.localStorage.getItem('^^pret->value'));\n          let countpret = JSON.parse(window.localStorage.getItem('&&money::pret__'));\n          let datacount = JSON.parse(window.localStorage.getItem('^^pret->count'));\n\n\n          if (JSON.parse(window.localStorage.getItem('^^pret->ok'))) {\n            asKedpretActive();\n\n            asKedpret(JSON.parse(window.localStorage.getItem('^^pret->value')));\n            asKedDecrimentpret(JSON.parse(window.localStorage.getItem('^^pret->count')));\n            JSON.parse(window.localStorage.getItem('^^pret->part')) && asKedpretpart(valuepret);\n          } else {\n\n            asKedpret(JSON.parse(window.localStorage.getItem('^^pret->value')));\n            asKedDecrimentpret(JSON.parse(window.localStorage.getItem('^^pret->count')));\n\n            let pretInfo = 'pret' + JSON.parse(window.localStorage.getItem('USER'));\n            collectionPret(pretInfo, moment().format(), Number(valuepret), Number(countpret), datacount);\n\n            JSON.parse(window.localStorage.getItem('^^pret->part')) && asKedpretpart(valuepret);\n          }\n\n          window.localStorage.setItem('^^pret->ok', JSON.stringify(false));\n          window.localStorage.setItem('^^pret->', JSON.stringify(false));\n          window.localStorage.setItem('^^snack->', JSON.stringify(true));\n          window.localStorage.setItem('^^pret->part', JSON.stringify(false));\n\n          window.setTimeout(() => {\n            navigation('/pret/dash');\n          }, 500);\n\n\n        }\n\n      };\n\n    }\n\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n\n      <FormControl\n        sx={{ width: '100%' }}\n\n        variant=\"standard\">\n        <InputLabel htmlFor=\"standard-adornment-password\"><span className='pop-up'>Pin actuel</span></InputLabel>\n\n        <Controller\n          name=\"code\"\n          control={control}\n          render={({ field }) =>\n\n            <Input\n              id=\"standard-adornment-password\"\n              {...field}\n              type={showPassword ? 'numeric' : 'password'}\n              inputProps={{\n                autoComplete: \"off\", inputMode: 'numeric'\n              }}\n\n              endAdornment={\n                <InputAdornment position=\"end\">\n\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={handleClickShowPassword}\n                    onMouseDown={handleMouseDownPassword}\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n\n                </InputAdornment>\n              }\n\n            />}\n        />\n\n      </FormControl>\n\n      <Dialog\n        fullWidth={fullWidth}\n        maxWidth={maxWidth}\n        open={open}\n        onClose={handleClose}>\n\n        <DialogTitle><h1 className='pop-up'>MuunganoMoney</h1></DialogTitle>\n        <DialogContent>\n\n          <DialogContentText>\n            <p className='pop-up'>\n              Code pin Incorrect\n     </p>\n          </DialogContentText>\n\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}><span className='pop-up'>Fermer</span></Button>\n        </DialogActions>\n      </Dialog>\n\n      <button className='Btn-Broker'>Envoi</button>\n    </form>\n  );\n};\n\n\n// add pret for client\nexport async function asKedpret(prix) {\n  const washingtonRef = doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER')));\n\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    cdf: increment(-prix),\n    pretcdf: increment(-prix),\n    date: moment().format()\n  });\n\n};\n// add pret for client\nexport async function asKedpretpart(prix) {\n  const washingtonRef = doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER')));\n\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    cdf: prix,\n    pretcdf: prix,\n    date: moment().format()\n  });\n\n};\n\nexport async function asKedDecrimentpret(prix) {\n\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER')));\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    cdf: increment(-prix)\n  });\n\n};\n// add pret for client active\nexport async function asKedpretActive() {\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER')));\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    pret: false,\n    pretactive: false,\n    pretregister: false\n  });\n\n};\n\n// view pret \nexport async function collectionPret(userCollection, userDocs, current, pret, reimburse) {\n\n  let obj = { pret: pret, reimburse: reimburse, current: current, devise: false };\n  await setDoc(doc(db, userCollection, userDocs), { date: moment().format(), data: arrayUnion(obj), devise: false }, { merge: true });\n\n};\n\n"]},"metadata":{},"sourceType":"module"}