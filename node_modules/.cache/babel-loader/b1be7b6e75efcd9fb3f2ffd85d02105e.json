{"ast":null,"code":"import _regeneratorRuntime from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'./Time.css';import REturnPriX from'./Prix';import Media from'react-media';import{doc,onSnapshot,getDocs,collection,updateDoc,increment}from\"firebase/firestore\";import{phoneX}from'../Sign/Input';import{db}from'../firebase';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var exchAnge=0;// Export view \n// Return Phone input component\nexport default function REturnInputPhone(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Media,{queries:{small:'(max-width: 599px)',medium:'(min-width: 600px) and (max-width:1199px)',large:'(min-width: 1200px)'},children:function children(matches){return/*#__PURE__*/_jsxs(_Fragment,{children:[matches.small&&/*#__PURE__*/_jsx(ScreenSmall,{}),matches.medium&&/*#__PURE__*/_jsx(ScreenLarge,{}),matches.large&&/*#__PURE__*/_jsx(ScreenLarge,{})]});}})});};export var ScreenLarge=function ScreenLarge(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(REturnPriX,{}),/*#__PURE__*/_jsx(\"div\",{className:\"wrp-frais-current\",children:/*#__PURE__*/_jsx(FormInputValue,{})})]});};export var ScreenSmall=function ScreenSmall(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(REturnPriX,{}),/*#__PURE__*/_jsx(\"div\",{className:\"wrp-frais-current-sm\",children:/*#__PURE__*/_jsx(FormInputValue,{})})]});};export var FormInputValue=function FormInputValue(){var pushArray=new Array();var time=moment().endOf('month');var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),prixusd=_React$useState4[0],setPrixusd=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),prixcdf=_React$useState6[0],setPrixcdf=_React$useState6[1];React.useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var querySnapshot,verifier,unsub;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(collection(db,\"client\"));case 2:querySnapshot=_context.sent;querySnapshot.forEach(function(doc){pushArray.push(doc.id);});verifier=pushArray.some(function(index){return index==phoneX;});unsub=onSnapshot(doc(db,verifier?\"client\":\"agent\",phoneX),function(doc){setState(doc.data().state);setPrixusd(doc.data().thriftusd);setPrixcdf(doc.data().thriftcdf);});if(moment()==moment().endOf('month')){IncrementThriftMoney(prixusd,prixcdf,state,phoneX);DecrementThriftMoney(state,phoneX);};case 8:case\"end\":return _context.stop();}}},_callee);})),[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Compte d'\\xE9pargne disponible\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\".concat(time.locale('fr').format('LLLL'))})]});};function IncrementThriftMoney(_x,_x2,_x3,_x4){return _IncrementThriftMoney.apply(this,arguments);}function _IncrementThriftMoney(){_IncrementThriftMoney=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(soldeUsd,soldeCdf,status,phoneNumber){var savingsRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:savingsRef=doc(db,\"\".concat(status),phoneNumber);_context2.next=3;return updateDoc(savingsRef,{cdf:increment(soldeCdf),usd:increment(soldeUsd)});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _IncrementThriftMoney.apply(this,arguments);};function DecrementThriftMoney(_x5,_x6){return _DecrementThriftMoney.apply(this,arguments);}function _DecrementThriftMoney(){_DecrementThriftMoney=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(status,phoneNumber){var savingsRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:savingsRef=doc(db,\"\".concat(status),phoneNumber);_context3.next=3;return updateDoc(savingsRef,{thriftcdf:0,thriftusd:0});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _DecrementThriftMoney.apply(this,arguments);};","map":{"version":3,"sources":["/Users/USER/Desktop/MuunganoMoney/src/Current/Time.js"],"names":["React","REturnPriX","Media","doc","onSnapshot","getDocs","collection","updateDoc","increment","phoneX","db","moment","exchAnge","REturnInputPhone","small","medium","large","matches","ScreenLarge","ScreenSmall","FormInputValue","pushArray","Array","time","endOf","useState","state","setState","prixusd","setPrixusd","prixcdf","setPrixcdf","useEffect","querySnapshot","forEach","push","id","verifier","some","index","unsub","data","thriftusd","thriftcdf","IncrementThriftMoney","DecrementThriftMoney","locale","format","soldeUsd","soldeCdf","status","phoneNumber","savingsRef","cdf","usd"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport './Time.css';\nimport REturnPriX from './Prix';\nimport Media from 'react-media';\nimport { doc, onSnapshot, getDocs, collection, updateDoc, increment } from \"firebase/firestore\";\nimport { phoneX } from '../Sign/Input';\nimport { db } from '../firebase';\nimport moment from 'moment';\n\nexport let exchAnge = 0; // Export view \n\n// Return Phone input component\nexport default function REturnInputPhone() {\n return (\n  <>\n   <Media\n    queries={{\n     small: '(max-width: 599px)',\n     medium: '(min-width: 600px) and (max-width:1199px)',\n     large: '(min-width: 1200px)',\n    }}>\n    {matches => (\n     <>\n      {matches.small && <ScreenSmall />}\n      {matches.medium && <ScreenLarge />}\n      {matches.large && <ScreenLarge />}\n     </>\n    )}\n   </Media>\n  </>\n );\n};\n\nexport const ScreenLarge = () => {\n return (\n  <>\n   <REturnPriX />\n   <div className='wrp-frais-current'>\n    <FormInputValue />\n   </div>\n  </>\n );\n};\nexport const ScreenSmall = () => {\n return (\n  <>\n   <REturnPriX />\n   <div className='wrp-frais-current-sm'>\n    <FormInputValue />\n   </div>\n  </>\n )\n};\nexport const FormInputValue = () => {\n\n let pushArray = new Array();\n var time = moment().endOf('month');\n\n const [state, setState] = React.useState(null);\n const [prixusd, setPrixusd] = React.useState(null);\n const [prixcdf, setPrixcdf] = React.useState(null);\n\n React.useEffect(async () => {\n\n  const querySnapshot = await getDocs(collection(db, \"client\"));\n  querySnapshot.forEach((doc) => {\n   pushArray.push(doc.id);\n\n  });\n\n  const verifier = pushArray.some(index => index == phoneX);\n  const unsub = onSnapshot(doc(db, verifier ? \"client\" : \"agent\", phoneX), (doc) => {\n   setState(doc.data().state);\n   setPrixusd(doc.data().thriftusd);\n   setPrixcdf(doc.data().thriftcdf);\n\n  });\n\n  if (moment() == moment().endOf('month')) {\n   IncrementThriftMoney(prixusd, prixcdf, state, phoneX);\n   DecrementThriftMoney(state, phoneX);\n\n  };\n\n\n }, []);\n\n return (\n  <>\n   <span>{`Compte d'épargne disponible`}</span>\n   <span>{`${time.locale('fr').format('LLLL')}`}</span>\n  </>\n );\n};\n\nasync function IncrementThriftMoney(soldeUsd, soldeCdf, status, phoneNumber) {\n\n const savingsRef = doc(db, `${status}`, phoneNumber);\n await updateDoc(savingsRef, {\n  cdf: increment(soldeCdf),\n  usd: increment(soldeUsd),\n });\n\n};\nasync function DecrementThriftMoney(status, phoneNumber) {\n\n const savingsRef = doc(db, `${status}`, phoneNumber);\n await updateDoc(savingsRef, {\n  thriftcdf: 0,\n  thriftusd: 0,\n });\n\n};"]},"metadata":{},"sourceType":"module"}