{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Desktop/MuunganoMoney/src/Current/Time.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Time.css';\nimport REturnPriX from './Prix';\nimport Media from 'react-media';\nimport { doc, onSnapshot, getDocs, collection, updateDoc, increment } from \"firebase/firestore\";\nimport { phoneX } from '../Sign/Input';\nimport { db } from '../firebase';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport let exchAnge = 0; // Export view \n// Return Phone input component\n\nexport default function REturnInputPhone() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Media, {\n      queries: {\n        small: '(max-width: 599px)',\n        medium: '(min-width: 600px) and (max-width:1199px)',\n        large: '(min-width: 1200px)'\n      },\n      children: matches => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [matches.small && /*#__PURE__*/_jsxDEV(ScreenSmall, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 25\n        }, this), matches.medium && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 26\n        }, this), matches.large && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n}\n_c = REturnInputPhone;\n;\nexport const ScreenLarge = () => {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(REturnPriX, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrp-frais-current\",\n      children: /*#__PURE__*/_jsxDEV(FormInputValue, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n_c2 = ScreenLarge;\nexport const ScreenSmall = () => {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(REturnPriX, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrp-frais-current-sm\",\n      children: /*#__PURE__*/_jsxDEV(FormInputValue, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n_c3 = ScreenSmall;\nexport const FormInputValue = () => {\n  _s();\n\n  let pushArray = new Array();\n  let endMonth = moment().endOf('month');\n  const [state, setState] = React.useState('');\n  const [prixusd, setPrixusd] = React.useState(null);\n  const [prixcdf, setPrixcdf] = React.useState(null);\n  React.useEffect(async () => {\n    const querySnapshot = await getDocs(collection(db, \"client\"));\n    querySnapshot.forEach(doc => {\n      pushArray.push(doc.id);\n    });\n    const verifier = pushArray.some(index => index == phoneX);\n    const unsub = onSnapshot(doc(db, verifier ? \"client\" : \"agent\", phoneX), doc => {\n      setState(doc.data().state);\n      setPrixusd(doc.data().thriftusd);\n      setPrixcdf(doc.data().thriftcdf);\n    });\n\n    if (moment().isSame(endMonth)) {\n      IncrementThriftMoney(prixusd, prixcdf, state, phoneX);\n      window.setTimeout(() => {\n        DecrementThriftMoney(state, phoneX);\n      }, 3000);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: `Compte d'épargne disponible`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: `${endMonth.locale('fr').format('LLLL')}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(FormInputValue, \"6IaiIuTrOxL8I0fHjqc3dLFctIk=\");\n\n_c4 = FormInputValue;\n\nasync function IncrementThriftMoney(soldeUsd, soldeCdf, status, phoneNumber) {\n  const savingsRef = doc(db, `${status}`, phoneNumber);\n  await updateDoc(savingsRef, {\n    cdf: increment(soldeCdf),\n    usd: increment(soldeUsd)\n  });\n}\n\n_c5 = IncrementThriftMoney;\n;\n\nasync function DecrementThriftMoney(status, phoneNumber) {\n  const savingsRef = doc(db, `${status}`, phoneNumber);\n  await updateDoc(savingsRef, {\n    thriftcdf: 0,\n    thriftusd: 0\n  });\n}\n\n_c6 = DecrementThriftMoney;\n;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"REturnInputPhone\");\n$RefreshReg$(_c2, \"ScreenLarge\");\n$RefreshReg$(_c3, \"ScreenSmall\");\n$RefreshReg$(_c4, \"FormInputValue\");\n$RefreshReg$(_c5, \"IncrementThriftMoney\");\n$RefreshReg$(_c6, \"DecrementThriftMoney\");","map":{"version":3,"sources":["/Users/USER/Desktop/MuunganoMoney/src/Current/Time.js"],"names":["React","REturnPriX","Media","doc","onSnapshot","getDocs","collection","updateDoc","increment","phoneX","db","moment","exchAnge","REturnInputPhone","small","medium","large","matches","ScreenLarge","ScreenSmall","FormInputValue","pushArray","Array","endMonth","endOf","state","setState","useState","prixusd","setPrixusd","prixcdf","setPrixcdf","useEffect","querySnapshot","forEach","push","id","verifier","some","index","unsub","data","thriftusd","thriftcdf","isSame","IncrementThriftMoney","window","setTimeout","DecrementThriftMoney","locale","format","soldeUsd","soldeCdf","status","phoneNumber","savingsRef","cdf","usd"],"mappings":";;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP;AACA,OAAOC,UAAP,MAAuB,QAAvB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,GAAT,EAAcC,UAAd,EAA0BC,OAA1B,EAAmCC,UAAnC,EAA+CC,SAA/C,EAA0DC,SAA1D,QAA2E,oBAA3E;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,SAASC,EAAT,QAAmB,aAAnB;AACA,OAAOC,MAAP,MAAmB,QAAnB;;;AAEA,OAAO,IAAIC,QAAQ,GAAG,CAAf,C,CAAkB;AAEzB;;AACA,eAAe,SAASC,gBAAT,GAA4B;AAC1C,sBACC;AAAA,2BACC,QAAC,KAAD;AACC,MAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,oBADC;AAERC,QAAAA,MAAM,EAAE,2CAFA;AAGRC,QAAAA,KAAK,EAAE;AAHC,OADV;AAAA,gBAMEC,OAAO,iBACP;AAAA,mBACEA,OAAO,CAACH,KAAR,iBAAiB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,gBADnB,EAEEG,OAAO,CAACF,MAAR,iBAAkB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,gBAFpB,EAGEE,OAAO,CAACD,KAAR,iBAAiB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,gBAHnB;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA;AADD,mBADD;AAkBA;KAnBuBH,gB;AAmBvB;AAED,OAAO,MAAMK,WAAW,GAAG,MAAM;AAChC,sBACC;AAAA,4BACC,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YADD,eAEC;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,6BACC,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YAFD;AAAA,kBADD;AAQA,CATM;MAAMA,W;AAUb,OAAO,MAAMC,WAAW,GAAG,MAAM;AAChC,sBACC;AAAA,4BACC,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YADD,eAEC;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA,6BACC,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YAFD;AAAA,kBADD;AAQA,CATM;MAAMA,W;AAUb,OAAO,MAAMC,cAAc,GAAG,MAAM;AAAA;;AAEnC,MAAIC,SAAS,GAAG,IAAIC,KAAJ,EAAhB;AACA,MAAIC,QAAQ,GAAGZ,MAAM,GAAGa,KAAT,CAAe,OAAf,CAAf;AAEA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoB1B,KAAK,CAAC2B,QAAN,CAAe,EAAf,CAA1B;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwB7B,KAAK,CAAC2B,QAAN,CAAe,IAAf,CAA9B;AACA,QAAM,CAACG,OAAD,EAAUC,UAAV,IAAwB/B,KAAK,CAAC2B,QAAN,CAAe,IAAf,CAA9B;AAEA3B,EAAAA,KAAK,CAACgC,SAAN,CAAgB,YAAY;AAE3B,UAAMC,aAAa,GAAG,MAAM5B,OAAO,CAACC,UAAU,CAACI,EAAD,EAAK,QAAL,CAAX,CAAnC;AACAuB,IAAAA,aAAa,CAACC,OAAd,CAAuB/B,GAAD,IAAS;AAC9BkB,MAAAA,SAAS,CAACc,IAAV,CAAehC,GAAG,CAACiC,EAAnB;AAEA,KAHD;AAKA,UAAMC,QAAQ,GAAGhB,SAAS,CAACiB,IAAV,CAAeC,KAAK,IAAIA,KAAK,IAAI9B,MAAjC,CAAjB;AACA,UAAM+B,KAAK,GAAGpC,UAAU,CAACD,GAAG,CAACO,EAAD,EAAK2B,QAAQ,GAAG,QAAH,GAAc,OAA3B,EAAoC5B,MAApC,CAAJ,EAAkDN,GAAD,IAAS;AACjFuB,MAAAA,QAAQ,CAACvB,GAAG,CAACsC,IAAJ,GAAWhB,KAAZ,CAAR;AACAI,MAAAA,UAAU,CAAC1B,GAAG,CAACsC,IAAJ,GAAWC,SAAZ,CAAV;AACAX,MAAAA,UAAU,CAAC5B,GAAG,CAACsC,IAAJ,GAAWE,SAAZ,CAAV;AACA,KAJuB,CAAxB;;AAMA,QAAIhC,MAAM,GAAGiC,MAAT,CAAgBrB,QAAhB,CAAJ,EAA+B;AAC9BsB,MAAAA,oBAAoB,CAACjB,OAAD,EAAUE,OAAV,EAAmBL,KAAnB,EAA0BhB,MAA1B,CAApB;AACAqC,MAAAA,MAAM,CAACC,UAAP,CAAkB,MAAM;AACvBC,QAAAA,oBAAoB,CAACvB,KAAD,EAAQhB,MAAR,CAApB;AACA,OAFD,EAEG,IAFH;AAIA;AAED,GAvBD,EAuBG,EAvBH;AAyBA,sBACC;AAAA,4BACC;AAAA,gBAAQ;AAAR;AAAA;AAAA;AAAA;AAAA,YADD,eAEC;AAAA,gBAAQ,GAAEc,QAAQ,CAAC0B,MAAT,CAAgB,IAAhB,EAAsBC,MAAtB,CAA6B,MAA7B,CAAqC;AAA/C;AAAA;AAAA;AAAA;AAAA,YAFD;AAAA,kBADD;AAMA,CAxCM;;GAAM9B,c;;MAAAA,c;;AA0Cb,eAAeyB,oBAAf,CAAoCM,QAApC,EAA8CC,QAA9C,EAAwDC,MAAxD,EAAgEC,WAAhE,EAA6E;AAE5E,QAAMC,UAAU,GAAGpD,GAAG,CAACO,EAAD,EAAM,GAAE2C,MAAO,EAAf,EAAkBC,WAAlB,CAAtB;AACA,QAAM/C,SAAS,CAACgD,UAAD,EAAa;AAC3BC,IAAAA,GAAG,EAAEhD,SAAS,CAAC4C,QAAD,CADa;AAE3BK,IAAAA,GAAG,EAAEjD,SAAS,CAAC2C,QAAD;AAFa,GAAb,CAAf;AAKA;;MARcN,oB;AAQd;;AACD,eAAeG,oBAAf,CAAoCK,MAApC,EAA4CC,WAA5C,EAAyD;AAExD,QAAMC,UAAU,GAAGpD,GAAG,CAACO,EAAD,EAAM,GAAE2C,MAAO,EAAf,EAAkBC,WAAlB,CAAtB;AACA,QAAM/C,SAAS,CAACgD,UAAD,EAAa;AAC3BZ,IAAAA,SAAS,EAAE,CADgB;AAE3BD,IAAAA,SAAS,EAAE;AAFgB,GAAb,CAAf;AAKA;;MARcM,oB;AAQd","sourcesContent":["\nimport React from 'react';\nimport './Time.css';\nimport REturnPriX from './Prix';\nimport Media from 'react-media';\nimport { doc, onSnapshot, getDocs, collection, updateDoc, increment } from \"firebase/firestore\";\nimport { phoneX } from '../Sign/Input';\nimport { db } from '../firebase';\nimport moment from 'moment';\n\nexport let exchAnge = 0; // Export view \n\n// Return Phone input component\nexport default function REturnInputPhone() {\n return (\n  <>\n   <Media\n    queries={{\n     small: '(max-width: 599px)',\n     medium: '(min-width: 600px) and (max-width:1199px)',\n     large: '(min-width: 1200px)',\n    }}>\n    {matches => (\n     <>\n      {matches.small && <ScreenSmall />}\n      {matches.medium && <ScreenLarge />}\n      {matches.large && <ScreenLarge />}\n     </>\n    )}\n   </Media>\n  </>\n );\n};\n\nexport const ScreenLarge = () => {\n return (\n  <>\n   <REturnPriX />\n   <div className='wrp-frais-current'>\n    <FormInputValue />\n   </div>\n  </>\n );\n};\nexport const ScreenSmall = () => {\n return (\n  <>\n   <REturnPriX />\n   <div className='wrp-frais-current-sm'>\n    <FormInputValue />\n   </div>\n  </>\n )\n};\nexport const FormInputValue = () => {\n\n let pushArray = new Array();\n let endMonth = moment().endOf('month');\n\n const [state, setState] = React.useState('');\n const [prixusd, setPrixusd] = React.useState(null);\n const [prixcdf, setPrixcdf] = React.useState(null);\n\n React.useEffect(async () => {\n\n  const querySnapshot = await getDocs(collection(db, \"client\"));\n  querySnapshot.forEach((doc) => {\n   pushArray.push(doc.id);\n\n  });\n\n  const verifier = pushArray.some(index => index == phoneX);\n  const unsub = onSnapshot(doc(db, verifier ? \"client\" : \"agent\", phoneX), (doc) => {\n   setState(doc.data().state);\n   setPrixusd(doc.data().thriftusd);\n   setPrixcdf(doc.data().thriftcdf);\n  });\n\n  if (moment().isSame(endMonth)) {\n   IncrementThriftMoney(prixusd, prixcdf, state, phoneX);\n   window.setTimeout(() => {\n    DecrementThriftMoney(state, phoneX);\n   }, 3000);\n\n  }\n\n }, []);\n\n return (\n  <>\n   <span>{`Compte d'épargne disponible`}</span>\n   <span>{`${endMonth.locale('fr').format('LLLL')}`}</span>\n  </>\n );\n};\n\nasync function IncrementThriftMoney(soldeUsd, soldeCdf, status, phoneNumber) {\n\n const savingsRef = doc(db, `${status}`, phoneNumber);\n await updateDoc(savingsRef, {\n  cdf: increment(soldeCdf),\n  usd: increment(soldeUsd),\n });\n\n};\nasync function DecrementThriftMoney(status, phoneNumber) {\n\n const savingsRef = doc(db, `${status}`, phoneNumber);\n await updateDoc(savingsRef, {\n  thriftcdf: 0,\n  thriftusd: 0,\n });\n\n};"]},"metadata":{},"sourceType":"module"}