{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Documents/Money/src/Profil/Avatar.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Avatar.css';\nimport Media from 'react-media';\nimport { collection, getDocs, doc, onSnapshot, updateDoc } from \"firebase/firestore\";\nimport { db, storage } from '../firebase';\nimport { ref, uploadBytes, deleteObject, getDownloadURL, uploadBytesResumable } from 'firebase/storage';\nimport { v4 } from 'uuid';\nimport IconButton from '@mui/material/IconButton';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport { VscCheck } from 'react-icons/vsc';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet pushDocs = new Array();\n\nfunction CircularProgressWithLabel(props) {\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      position: 'relative',\n      display: 'inline-flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n      variant: \"determinate\",\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0,\n        position: 'absolute',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        component: \"div\",\n        color: \"text.secondary\",\n        children: `${Math.round(props.value)}%`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 3\n  }, this);\n}\n\n_c = CircularProgressWithLabel;\nCircularProgressWithLabel.propTypes = {\n  /**\n   * The value of the progress indicator for the determinate variant.\n   * Value between 0 and 100.\n   * @default 0\n   */\n  value: PropTypes.number.isRequired\n}; // Avatar IMAGE VIew\n\nexport default function ReturnAvataR() {\n  return /*#__PURE__*/_jsxDEV(Media, {\n    queries: {\n      small: '(max-width: 599px)',\n      medium: '(min-width: 600px) and (max-width:1199px)',\n      large: '(min-width: 1200px)'\n    },\n    children: matches => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [matches.small && /*#__PURE__*/_jsxDEV(ScreenSmall, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 24\n      }, this), matches.medium && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }, this), matches.large && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }, this);\n}\n_c2 = ReturnAvataR;\n;\nexport const ScreenLarge = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-avatar-profil\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avatar-circle-profil\",\n    children: /*#__PURE__*/_jsxDEV(LetteRName, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 3\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 76,\n  columnNumber: 2\n}, this);\n_c3 = ScreenLarge;\nexport const ScreenSmall = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-avatar-profil-sm\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avatar-circle-profil-sm\",\n    children: /*#__PURE__*/_jsxDEV(LetteRName, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 3\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 83,\n  columnNumber: 2\n}, this);\n_c4 = ScreenSmall;\nexport const LetteRName = () => {\n  _s();\n\n  const [imageUpload, setImageUpload] = React.useState(null);\n  const [url, setUrl] = React.useState(null);\n  const [profil, setProfil] = React.useState(null);\n  const [progress, setProgress] = React.useState(0);\n  const [viewBtn, setViewBtn] = React.useState(false);\n  const [exten, setExten] = React.useState(null);\n  React.useEffect(async () => {\n    const querySnapshot = await getDocs(collection(db, \"client\"));\n    querySnapshot.forEach(doc => {\n      // doc.data() is never undefined for query doc snapshots\n      pushDocs.push(doc.id);\n    });\n    const toCollection = pushDocs.includes(JSON.parse(window.localStorage.getItem('USER')));\n    const unsub = onSnapshot(doc(db, toCollection ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n      setProfil(doc.data().profile);\n      setExten(doc.data().extension);\n    });\n  }, []);\n\n  const uploadImage = async () => {\n    if (imageUpload == null) return;\n    const imgRef = imageUpload.name + v4();\n    const imageRef = ref(storage, `image/${imgRef}`);\n    uploadBytes(imageRef, imageUpload).then(() => {\n      getDownloadURL(imageRef, imageUpload).then(url => {\n        const uploadTask = uploadBytesResumable(imageRef, imageUpload);\n        uploadTask.on('state_changed', snapshot => {\n          const prog = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n          setProgress(prog);\n        }, err => window.console.log(err), () => {\n          getDownloadURL(uploadTask.snapshot.ref).then(url => console.log(url));\n        });\n        setUrl(url);\n        const collect = pushDocs.includes(JSON.parse(window.localStorage.getItem('USER')));\n        const washingtonRef = doc(db, collect ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n        updateDoc(washingtonRef, {\n          profile: url,\n          extension: imgRef\n        });\n      }).catch(error => {\n        window.console.log(error.message);\n      });\n      setImageUpload(null);\n    }).catch(error => {\n      window.console.log(error.message);\n    });\n    setViewBtn(false);\n    window.console.log(imgRef);\n\n    if (exten != 'extension') {\n      // Create a reference to the file to delete\n      const desertRef = ref(storage, `image/${exten}`); // Delete the file\n\n      deleteObject(desertRef).then(() => {\n        // File deleted successfully\n        window.console.log('Success remove image');\n      }).catch(error => {\n        window.console.log('Error Reomve'); // Uh-oh, an error occurred!\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrp-profil-avatar-user\",\n    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n      color: \"primary\",\n      \"aria-label\": \"upload picture\",\n      component: \"label\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-user\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: profil\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          hidden: true,\n          accept: \"image/*\",\n          type: \"file\",\n          onChange: event => {\n            setImageUpload(event.target.files[0]);\n            setViewBtn(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon-camera-profil\",\n          children: /*#__PURE__*/_jsxDEV(PhotoCamera, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(CircularProgressWithLabel, {\n      value: progress\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 4\n    }, this), viewBtn && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: uploadImage,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Cliqu\\xE9 pour changer image \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(VscCheck, {\n        size: '1.2em'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 44\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 16\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 3\n  }, this);\n};\n\n_s(LetteRName, \"JO8BWAXC6lYK0DEkO+X16IOgz/A=\");\n\n_c5 = LetteRName;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"CircularProgressWithLabel\");\n$RefreshReg$(_c2, \"ReturnAvataR\");\n$RefreshReg$(_c3, \"ScreenLarge\");\n$RefreshReg$(_c4, \"ScreenSmall\");\n$RefreshReg$(_c5, \"LetteRName\");","map":{"version":3,"sources":["/Users/USER/Documents/Money/src/Profil/Avatar.js"],"names":["React","Media","collection","getDocs","doc","onSnapshot","updateDoc","db","storage","ref","uploadBytes","deleteObject","getDownloadURL","uploadBytesResumable","v4","IconButton","PhotoCamera","PropTypes","CircularProgress","Typography","Box","VscCheck","pushDocs","Array","CircularProgressWithLabel","props","position","display","top","left","bottom","right","alignItems","justifyContent","Math","round","value","propTypes","number","isRequired","ReturnAvataR","small","medium","large","matches","ScreenLarge","ScreenSmall","LetteRName","imageUpload","setImageUpload","useState","url","setUrl","profil","setProfil","progress","setProgress","viewBtn","setViewBtn","exten","setExten","useEffect","querySnapshot","forEach","push","id","toCollection","includes","JSON","parse","window","localStorage","getItem","unsub","data","profile","extension","uploadImage","imgRef","name","imageRef","then","uploadTask","on","snapshot","prog","bytesTransferred","totalBytes","err","console","log","collect","washingtonRef","catch","error","message","desertRef","event","target","files"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,UAAT,EAAqBC,OAArB,EAA8BC,GAA9B,EAAmCC,UAAnC,EAA+CC,SAA/C,QAAgE,oBAAhE;AACA,SAASC,EAAT,EAAaC,OAAb,QAA4B,aAA5B;AACA,SAASC,GAAT,EAAcC,WAAd,EAA2BC,YAA3B,EAAyCC,cAAzC,EAAyDC,oBAAzD,QAAqF,kBAArF;AACA,SAASC,EAAT,QAAmB,MAAnB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AAEA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,gBAAP,MAA6B,gCAA7B;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,SAASC,QAAT,QAAyB,iBAAzB;;;AAGA,IAAIC,QAAQ,GAAG,IAAIC,KAAJ,EAAf;;AAGA,SAASC,yBAAT,CAAmCC,KAAnC,EAA0C;AACzC,sBACC,QAAC,GAAD;AAAK,IAAA,EAAE,EAAE;AAAEC,MAAAA,QAAQ,EAAE,UAAZ;AAAwBC,MAAAA,OAAO,EAAE;AAAjC,KAAT;AAAA,4BACC,QAAC,gBAAD;AAAkB,MAAA,OAAO,EAAC,aAA1B;AAAA,SAA4CF;AAA5C;AAAA;AAAA;AAAA;AAAA,YADD,eAEC,QAAC,GAAD;AACC,MAAA,EAAE,EAAE;AACHG,QAAAA,GAAG,EAAE,CADF;AAEHC,QAAAA,IAAI,EAAE,CAFH;AAGHC,QAAAA,MAAM,EAAE,CAHL;AAIHC,QAAAA,KAAK,EAAE,CAJJ;AAKHL,QAAAA,QAAQ,EAAE,UALP;AAMHC,QAAAA,OAAO,EAAE,MANN;AAOHK,QAAAA,UAAU,EAAE,QAPT;AAQHC,QAAAA,cAAc,EAAE;AARb,OADL;AAAA,6BAYC,QAAC,UAAD;AAAY,QAAA,OAAO,EAAC,SAApB;AAA8B,QAAA,SAAS,EAAC,KAAxC;AAA8C,QAAA,KAAK,EAAC,gBAApD;AAAA,kBACG,GAAEC,IAAI,CAACC,KAAL,CAAWV,KAAK,CAACW,KAAjB,CAAwB;AAD7B;AAAA;AAAA;AAAA;AAAA;AAZD;AAAA;AAAA;AAAA;AAAA,YAFD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAqBA;;KAtBQZ,yB;AAwBTA,yBAAyB,CAACa,SAA1B,GAAsC;AACrC;AACD;AACA;AACA;AACA;AACCD,EAAAA,KAAK,EAAEnB,SAAS,CAACqB,MAAV,CAAiBC;AANa,CAAtC,C,CAUA;;AACA,eAAe,SAASC,YAAT,GAAwB;AACtC,sBACC,QAAC,KAAD;AACC,IAAA,OAAO,EAAE;AACRC,MAAAA,KAAK,EAAE,oBADC;AAERC,MAAAA,MAAM,EAAE,2CAFA;AAGRC,MAAAA,KAAK,EAAE;AAHC,KADV;AAAA,cAMEC,OAAO,iBACP;AAAA,iBACEA,OAAO,CAACH,KAAR,iBAAiB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,cADnB,EAEEG,OAAO,CAACF,MAAR,iBAAkB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,cAFpB,EAGEE,OAAO,CAACD,KAAR,iBAAiB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,cAHnB;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,UADD;AAgBA;MAjBuBH,Y;AAiBvB;AAED,OAAO,MAAMK,WAAW,GAAG,mBAC1B;AAAK,EAAA,SAAS,EAAC,mBAAf;AAAA,yBACC;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA,2BACC,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,QADM;MAAMA,W;AAOb,OAAO,MAAMC,WAAW,GAAG,mBAC1B;AAAK,EAAA,SAAS,EAAC,sBAAf;AAAA,yBACC;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA,2BACC,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,QADM;MAAMA,W;AAOb,OAAO,MAAMC,UAAU,GAAG,MAAM;AAAA;;AAE/B,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCjD,KAAK,CAACkD,QAAN,CAAe,IAAf,CAAtC;AACA,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBpD,KAAK,CAACkD,QAAN,CAAe,IAAf,CAAtB;AACA,QAAM,CAACG,MAAD,EAASC,SAAT,IAAsBtD,KAAK,CAACkD,QAAN,CAAe,IAAf,CAA5B;AACA,QAAM,CAACK,QAAD,EAAWC,WAAX,IAA0BxD,KAAK,CAACkD,QAAN,CAAe,CAAf,CAAhC;AACA,QAAM,CAACO,OAAD,EAAUC,UAAV,IAAwB1D,KAAK,CAACkD,QAAN,CAAe,KAAf,CAA9B;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoB5D,KAAK,CAACkD,QAAN,CAAe,IAAf,CAA1B;AAEAlD,EAAAA,KAAK,CAAC6D,SAAN,CAAgB,YAAY;AAE3B,UAAMC,aAAa,GAAG,MAAM3D,OAAO,CAACD,UAAU,CAACK,EAAD,EAAK,QAAL,CAAX,CAAnC;AACAuD,IAAAA,aAAa,CAACC,OAAd,CAAuB3D,GAAD,IAAS;AAC9B;AACAkB,MAAAA,QAAQ,CAAC0C,IAAT,CAAc5D,GAAG,CAAC6D,EAAlB;AACA,KAHD;AAKA,UAAMC,YAAY,GAAG5C,QAAQ,CAAC6C,QAAT,CAAkBC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAlB,CAArB;AACA,UAAMC,KAAK,GAAGpE,UAAU,CAACD,GAAG,CAACG,EAAD,EAAK2D,YAAY,GAAG,QAAH,GAAc,OAA/B,EAAwCE,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAxC,CAAJ,EAA+FpE,GAAD,IAAS;AAC9HkD,MAAAA,SAAS,CAAClD,GAAG,CAACsE,IAAJ,GAAWC,OAAZ,CAAT;AACAf,MAAAA,QAAQ,CAACxD,GAAG,CAACsE,IAAJ,GAAWE,SAAZ,CAAR;AACA,KAHuB,CAAxB;AAKA,GAdD,EAcG,EAdH;;AAgBA,QAAMC,WAAW,GAAG,YAAY;AAE/B,QAAI7B,WAAW,IAAI,IAAnB,EACC;AAED,UAAM8B,MAAM,GAAG9B,WAAW,CAAC+B,IAAZ,GAAmBjE,EAAE,EAApC;AACA,UAAMkE,QAAQ,GAAGvE,GAAG,CAACD,OAAD,EAAW,SAAQsE,MAAO,EAA1B,CAApB;AACApE,IAAAA,WAAW,CAACsE,QAAD,EAAWhC,WAAX,CAAX,CAAmCiC,IAAnC,CAAwC,MAAM;AAE7CrE,MAAAA,cAAc,CAACoE,QAAD,EAAWhC,WAAX,CAAd,CAAsCiC,IAAtC,CAA4C9B,GAAD,IAAS;AAEnD,cAAM+B,UAAU,GAAGrE,oBAAoB,CAACmE,QAAD,EAAWhC,WAAX,CAAvC;AACAkC,QAAAA,UAAU,CAACC,EAAX,CAAc,eAAd,EAAgCC,QAAD,IAAc;AAC5C,gBAAMC,IAAI,GAAGnD,IAAI,CAACC,KAAL,CAAYiD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAA/D,CAAb;AACA/B,UAAAA,WAAW,CAAC6B,IAAD,CAAX;AACA,SAHD,EAIEG,GAAD,IAASlB,MAAM,CAACmB,OAAP,CAAeC,GAAf,CAAmBF,GAAnB,CAJV,EAImC,MAAM;AACvC5E,UAAAA,cAAc,CAACsE,UAAU,CAACE,QAAX,CAAoB3E,GAArB,CAAd,CAAwCwE,IAAxC,CAA8C9B,GAAD,IAASsC,OAAO,CAACC,GAAR,CAAYvC,GAAZ,CAAtD;AACA,SANF;AAQAC,QAAAA,MAAM,CAACD,GAAD,CAAN;AACA,cAAMwC,OAAO,GAAGrE,QAAQ,CAAC6C,QAAT,CAAkBC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAlB,CAAhB;AACA,cAAMoB,aAAa,GAAGxF,GAAG,CAACG,EAAD,EAAKoF,OAAO,GAAG,QAAH,GAAc,OAA1B,EAAmCvB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAnC,CAAzB,CAbmD,CAcnD;;AACAlE,QAAAA,SAAS,CAACsF,aAAD,EAAgB;AACxBjB,UAAAA,OAAO,EAAExB,GADe;AAExByB,UAAAA,SAAS,EAAEE;AAFa,SAAhB,CAAT;AAKA,OApBD,EAoBGe,KApBH,CAoBSC,KAAK,IAAI;AAAExB,QAAAA,MAAM,CAACmB,OAAP,CAAeC,GAAf,CAAmBI,KAAK,CAACC,OAAzB;AAAmC,OApBvD;AAqBA9C,MAAAA,cAAc,CAAC,IAAD,CAAd;AAEA,KAzBD,EAyBG4C,KAzBH,CAyBSC,KAAK,IAAI;AAAExB,MAAAA,MAAM,CAACmB,OAAP,CAAeC,GAAf,CAAmBI,KAAK,CAACC,OAAzB;AAAmC,KAzBvD;AA0BArC,IAAAA,UAAU,CAAC,KAAD,CAAV;AAEAY,IAAAA,MAAM,CAACmB,OAAP,CAAeC,GAAf,CAAmBZ,MAAnB;;AACA,QAAInB,KAAK,IAAI,WAAb,EAA0B;AAEzB;AACA,YAAMqC,SAAS,GAAGvF,GAAG,CAACD,OAAD,EAAW,SAAQmD,KAAM,EAAzB,CAArB,CAHyB,CAIzB;;AACAhD,MAAAA,YAAY,CAACqF,SAAD,CAAZ,CAAwBf,IAAxB,CAA6B,MAAM;AAClC;AACAX,QAAAA,MAAM,CAACmB,OAAP,CAAeC,GAAf,CAAmB,sBAAnB;AAEA,OAJD,EAIGG,KAJH,CAIUC,KAAD,IAAW;AACnBxB,QAAAA,MAAM,CAACmB,OAAP,CAAeC,GAAf,CAAmB,cAAnB,EADmB,CAEnB;AACA,OAPD;AAQA;AAED,GAnDD;;AAqDA,sBACC;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA,4BAEC,QAAC,UAAD;AAAY,MAAA,KAAK,EAAC,SAAlB;AAA4B,oBAAW,gBAAvC;AAAwD,MAAA,SAAS,EAAC,OAAlE;AAAA,6BACC;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,gCAEC;AAAK,UAAA,GAAG,EAAErC;AAAV;AAAA;AAAA;AAAA;AAAA,gBAFD,eAIC;AACC,UAAA,MAAM,MADP;AAEC,UAAA,MAAM,EAAC,SAFR;AAGC,UAAA,IAAI,EAAC,MAHN;AAIC,UAAA,QAAQ,EAAG4C,KAAD,IAAW;AACpBhD,YAAAA,cAAc,CAACgD,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAd;AACAzC,YAAAA,UAAU,CAAC,IAAD,CAAV;AACA;AAPF;AAAA;AAAA;AAAA;AAAA,gBAJD,eAeC;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,iCACC,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBAfD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YAFD,eAwBC,QAAC,yBAAD;AAA2B,MAAA,KAAK,EAAEH;AAAlC;AAAA;AAAA;AAAA;AAAA,YAxBD,EAyBEE,OAAO,iBAAI;AAAQ,MAAA,OAAO,EAAEoB,WAAjB;AAAA,8BACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADW,eAC4B,QAAC,QAAD;AAAU,QAAA,IAAI,EAAE;AAAhB;AAAA;AAAA;AAAA;AAAA,cAD5B;AAAA;AAAA;AAAA;AAAA;AAAA,YAzBb;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AA8BA,CA5GM;;GAAM9B,U;;MAAAA,U","sourcesContent":["import React from 'react';\nimport './Avatar.css';\nimport Media from 'react-media';\nimport { collection, getDocs, doc, onSnapshot, updateDoc } from \"firebase/firestore\";\nimport { db, storage } from '../firebase';\nimport { ref, uploadBytes, deleteObject, getDownloadURL, uploadBytesResumable } from 'firebase/storage';\nimport { v4 } from 'uuid';\nimport IconButton from '@mui/material/IconButton';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\n\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport { VscCheck } from 'react-icons/vsc';\n\n\nlet pushDocs = new Array();\n\n\nfunction CircularProgressWithLabel(props) {\n return (\n  <Box sx={{ position: 'relative', display: 'inline-flex' }}>\n   <CircularProgress variant=\"determinate\" {...props} />\n   <Box\n    sx={{\n     top: 0,\n     left: 0,\n     bottom: 0,\n     right: 0,\n     position: 'absolute',\n     display: 'flex',\n     alignItems: 'center',\n     justifyContent: 'center',\n    }}\n   >\n    <Typography variant=\"caption\" component=\"div\" color=\"text.secondary\">\n     {`${Math.round(props.value)}%`}\n    </Typography>\n   </Box>\n  </Box>\n );\n}\n\nCircularProgressWithLabel.propTypes = {\n /**\n  * The value of the progress indicator for the determinate variant.\n  * Value between 0 and 100.\n  * @default 0\n  */\n value: PropTypes.number.isRequired,\n};\n\n\n// Avatar IMAGE VIew\nexport default function ReturnAvataR() {\n return (\n  <Media\n   queries={{\n    small: '(max-width: 599px)',\n    medium: '(min-width: 600px) and (max-width:1199px)',\n    large: '(min-width: 1200px)',\n   }}>\n   {matches => (\n    <>\n     {matches.small && <ScreenSmall />}\n     {matches.medium && <ScreenLarge />}\n     {matches.large && <ScreenLarge />}\n    </>\n   )}\n  </Media>\n );\n};\n\nexport const ScreenLarge = () => (\n <div className='wrp-avatar-profil'>\n  <div className='avatar-circle-profil'>\n   <LetteRName />\n  </div>\n </div>\n);\nexport const ScreenSmall = () => (\n <div className='wrp-avatar-profil-sm'>\n  <div className='avatar-circle-profil-sm'>\n   <LetteRName />\n  </div>\n </div>\n);\nexport const LetteRName = () => {\n\n const [imageUpload, setImageUpload] = React.useState(null);\n const [url, setUrl] = React.useState(null);\n const [profil, setProfil] = React.useState(null);\n const [progress, setProgress] = React.useState(0);\n const [viewBtn, setViewBtn] = React.useState(false);\n const [exten, setExten] = React.useState(null);\n\n React.useEffect(async () => {\n\n  const querySnapshot = await getDocs(collection(db, \"client\"));\n  querySnapshot.forEach((doc) => {\n   // doc.data() is never undefined for query doc snapshots\n   pushDocs.push(doc.id);\n  });\n\n  const toCollection = pushDocs.includes(JSON.parse(window.localStorage.getItem('USER')));\n  const unsub = onSnapshot(doc(db, toCollection ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n   setProfil(doc.data().profile);\n   setExten(doc.data().extension);\n  });\n\n }, []);\n\n const uploadImage = async () => {\n\n  if (imageUpload == null)\n   return;\n\n  const imgRef = imageUpload.name + v4();\n  const imageRef = ref(storage, `image/${imgRef}`);\n  uploadBytes(imageRef, imageUpload).then(() => {\n\n   getDownloadURL(imageRef, imageUpload).then((url) => {\n\n    const uploadTask = uploadBytesResumable(imageRef, imageUpload)\n    uploadTask.on('state_changed', (snapshot) => {\n     const prog = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n     setProgress(prog);\n    },\n     (err) => window.console.log(err), () => {\n      getDownloadURL(uploadTask.snapshot.ref).then((url) => console.log(url))\n     })\n\n    setUrl(url);\n    const collect = pushDocs.includes(JSON.parse(window.localStorage.getItem('USER')));\n    const washingtonRef = doc(db, collect ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER')));\n    // Set the \"capital\" field of the city 'DC'\n    updateDoc(washingtonRef, {\n     profile: url,\n     extension: imgRef\n    });\n\n   }).catch(error => { window.console.log(error.message) })\n   setImageUpload(null);\n\n  }).catch(error => { window.console.log(error.message) });\n  setViewBtn(false);\n\n  window.console.log(imgRef);\n  if (exten != 'extension') {\n\n   // Create a reference to the file to delete\n   const desertRef = ref(storage, `image/${exten}`);\n   // Delete the file\n   deleteObject(desertRef).then(() => {\n    // File deleted successfully\n    window.console.log('Success remove image');\n\n   }).catch((error) => {\n    window.console.log('Error Reomve');\n    // Uh-oh, an error occurred!\n   });\n  }\n\n }\n\n return (\n  <div className='wrp-profil-avatar-user'>\n\n   <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"label\">\n    <div className='profile-user'>\n\n     <img src={profil} />\n\n     <input\n      hidden\n      accept=\"image/*\"\n      type=\"file\"\n      onChange={(event) => {\n       setImageUpload(event.target.files[0]);\n       setViewBtn(true);\n      }\n      }\n\n     />\n     <div className='icon-camera-profil'>\n      <PhotoCamera />\n     </div>\n    </div>\n   </IconButton>\n\n   <CircularProgressWithLabel value={progress} />\n   {viewBtn && <button onClick={uploadImage}>\n    <span>Cliqu√© pour changer image </span><VscCheck size={'1.2em'} /></button>}\n  </div>\n );\n};\n\n"]},"metadata":{},"sourceType":"module"}