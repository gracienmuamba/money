{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Documents/Money/src/Tontine/Pin/Now/Input.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\nimport { doc, onSnapshot, updateDoc, increment, arrayUnion, setDoc } from 'firebase/firestore';\nimport { db } from '../../../firebase';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport IconButton from '@mui/material/IconButton';\nimport Input from '@mui/material/Input';\nimport InputLabel from '@mui/material/InputLabel';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport FormControl from '@mui/material/FormControl';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport moment from 'moment'; // View Form Update view\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ReturnFormUpdate() {\n  return /*#__PURE__*/_jsxDEV(Media, {\n    queries: {\n      small: '(max-width: 599px)',\n      medium: '(min-width: 600px) and (max-width:1199px)',\n      large: '(min-width: 1200px)'\n    },\n    children: matches => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [matches.small && /*#__PURE__*/_jsxDEV(ScreenSmall, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 29\n      }, this), matches.medium && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 30\n      }, this), matches.large && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n_c = ReturnFormUpdate;\n;\nexport const ScreenLarge = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-form-input-nows\",\n  children: /*#__PURE__*/_jsxDEV(FormInputField, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 47,\n  columnNumber: 3\n}, this);\n_c2 = ScreenLarge;\nexport const ScreenSmall = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-form-input-nows\",\n  children: /*#__PURE__*/_jsxDEV(FormInputField, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 52,\n  columnNumber: 3\n}, this);\n_c3 = ScreenSmall;\nexport const FormInputField = () => {\n  _s();\n\n  let regular = /[a-z]+/;\n  const navigation = useNavigate();\n  const {\n    handleSubmit,\n    reset,\n    control\n  } = useForm();\n  const [pin, setPin] = React.useState(null);\n  const [fullWidth, setFullWidth] = React.useState(true);\n  const [maxWidth, setMaxWidth] = React.useState('sm');\n  const [open, setOpen] = React.useState(false);\n  const [showPassword, setShowPassword] = React.useState(false);\n\n  const handleClickShowPassword = () => setShowPassword(show => !show);\n\n  const handleMouseDownPassword = event => {\n    event.preventDefault();\n  };\n\n  let rising = JSON.parse(window.localStorage.getItem('**tont>>count??'));\n  let namegroup = JSON.parse(window.localStorage.getItem('**tont>>name??'));\n  let currencygroup = JSON.parse(window.localStorage.getItem('**tont>>currency??'));\n  let listgroup = JSON.parse(window.localStorage.getItem('@@xi^^,view**++'));\n  let docTon = namegroup + JSON.parse(window.localStorage.getItem('USER'));\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  React.useEffect(async () => {\n    try {\n      await onSnapshot(doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n        setPin(doc.data().code);\n      });\n    } catch {\n      window.console.log(`Erreur`);\n    }\n  }, []);\n\n  const onSubmit = async data => {\n    if (data.code === undefined) {\n      setOpen(true);\n      reset();\n    } else {\n      if (data.code.length != 6 || regular.test(data.code)) {\n        setOpen(true);\n        reset();\n      } else {\n        if (pin != data.code) {\n          setOpen(true);\n          reset();\n        } else {\n          let group = namegroup + JSON.parse(window.localStorage.getItem('USER'));\n\n          if (JSON.parse(window.localStorage.getItem('**tont>>currency??')) === 'USD') {\n            decrementMoneyClientDollar(Number(rising));\n          } else {\n            decrementMoneyClientFran(Number(rising));\n          }\n\n          let list = JSON.parse(window.localStorage.getItem('@@xi^^,view**++'));\n          [...list].map(item => {\n            if (item === JSON.parse(window.localStorage.getItem('USER'))) {\n              window.setTimeout(async () => {\n                allUserTontine(group, item, rising, 0, true, moment().format(), list.indexOf(item));\n                const washingtonRef = doc(db, \"client\", item);\n                await updateDoc(washingtonRef, {\n                  grouptontine: arrayUnion(group),\n                  grouptontinename: arrayUnion(namegroup)\n                });\n              }, 500);\n            } else {\n              window.setTimeout(async () => {\n                allUserTontine(group, item, 0, 0, false, moment().format(), list.indexOf(item));\n                const washingtonRef = doc(db, \"client\", item);\n                await updateDoc(washingtonRef, {\n                  grouptontine: arrayUnion(group),\n                  grouptontinename: arrayUnion(namegroup)\n                });\n              }, 500);\n            }\n          });\n          window.localStorage.setItem('??next^^**$$', JSON.stringify(false));\n          createTontine(docTon, rising, rising, listgroup.length, currencygroup);\n          window.setTimeout(() => {\n            navigation('/tontine/form/well');\n          }, 1000);\n        }\n      }\n\n      ;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(FormControl, {\n      sx: {\n        width: '100%'\n      },\n      variant: \"standard\",\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        htmlFor: \"standard-adornment-password\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"pop-up\",\n          children: \"Pin actuel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 59\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controller, {\n        name: \"code\",\n        control: control,\n        render: ({\n          field\n        }) => /*#__PURE__*/_jsxDEV(Input, {\n          id: \"standard-adornment-password\",\n          ...field,\n          type: showPassword ? 'numeric' : 'password',\n          inputProps: {\n            autoComplete: \"off\",\n            inputMode: 'numeric'\n          },\n          endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"end\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"toggle password visibility\",\n              onClick: handleClickShowPassword,\n              onMouseDown: handleMouseDownPassword,\n              children: showPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 57\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      fullWidth: fullWidth,\n      maxWidth: maxWidth,\n      open: open,\n      onClose: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"pop-up\",\n          children: \"MuunganoMoney\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pop-up\",\n            children: \"Code pin Incorrect\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pop-up\",\n            children: \"Fermer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"Btn-Broker\",\n      children: \"Cr\\xE9er\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FormInputField, \"4k/fu0/UVNoilkUyQNWTk/BBgN8=\", false, function () {\n  return [useNavigate, useForm];\n});\n\n_c4 = FormInputField;\nexport async function decrementMoneyClientDollar(money) {\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    usd: increment(-money)\n  });\n}\n;\nexport async function decrementMoneyClientFran(money) {\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    cdf: increment(-money)\n  });\n}\n; // create Group tontine in the list\n\nexport async function createTontine(docUser, rising, asked, count, currency) {\n  // Add a new document in collection \"client\"\n  await setDoc(doc(db, \"tontine\", docUser), {\n    rising: rising,\n    date: moment().format(),\n    asked: asked,\n    count: count,\n    currency: currency,\n    position: 1\n  });\n}\n; // create col all user tontine\n\nexport async function allUserTontine(colUser, docUser, solde, asked, soldeactive, date, position) {\n  let obj = {\n    solde: solde,\n    date: date,\n    asked: asked\n  }; // Add a new document in collection \"tontine\"\n\n  await setDoc(doc(db, colUser, docUser), {\n    solde: solde,\n    soldeactive: soldeactive,\n    date: date,\n    asked: asked,\n    position: position,\n    activity: arrayUnion(obj)\n  });\n}\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ReturnFormUpdate\");\n$RefreshReg$(_c2, \"ScreenLarge\");\n$RefreshReg$(_c3, \"ScreenSmall\");\n$RefreshReg$(_c4, \"FormInputField\");","map":{"version":3,"sources":["/Users/USER/Documents/Money/src/Tontine/Pin/Now/Input.js"],"names":["React","Media","useNavigate","useForm","Controller","doc","onSnapshot","updateDoc","increment","arrayUnion","setDoc","db","Button","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","IconButton","Input","InputLabel","InputAdornment","FormControl","Visibility","VisibilityOff","moment","ReturnFormUpdate","small","medium","large","matches","ScreenLarge","ScreenSmall","FormInputField","regular","navigation","handleSubmit","reset","control","pin","setPin","useState","fullWidth","setFullWidth","maxWidth","setMaxWidth","open","setOpen","showPassword","setShowPassword","handleClickShowPassword","show","handleMouseDownPassword","event","preventDefault","rising","JSON","parse","window","localStorage","getItem","namegroup","currencygroup","listgroup","docTon","handleClose","useEffect","data","code","console","log","onSubmit","undefined","length","test","group","decrementMoneyClientDollar","Number","decrementMoneyClientFran","list","map","item","setTimeout","allUserTontine","format","indexOf","washingtonRef","grouptontine","grouptontinename","setItem","stringify","createTontine","width","field","autoComplete","inputMode","money","usd","cdf","docUser","asked","count","currency","date","position","colUser","solde","soldeactive","obj","activity"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { doc, onSnapshot, updateDoc, increment, arrayUnion, setDoc } from 'firebase/firestore';\nimport { db } from '../../../firebase';\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\n\nimport IconButton from '@mui/material/IconButton';\nimport Input from '@mui/material/Input';\nimport InputLabel from '@mui/material/InputLabel';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport FormControl from '@mui/material/FormControl';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport moment from 'moment';\n\n\n// View Form Update view\nexport default function ReturnFormUpdate() {\n  return (\n    <Media\n      queries={{\n        small: '(max-width: 599px)',\n        medium: '(min-width: 600px) and (max-width:1199px)',\n        large: '(min-width: 1200px)',\n      }}>\n      {matches => (\n        <>\n          {matches.small && <ScreenSmall />}\n          {matches.medium && <ScreenLarge />}\n          {matches.large && <ScreenLarge />}\n        </>\n      )}\n    </Media>\n  );\n};\n\nexport const ScreenLarge = () => (\n  <div className='wrp-form-input-nows'>\n    <FormInputField />\n  </div>\n);\nexport const ScreenSmall = () => (\n  <div className='wrp-form-input-nows'>\n    <FormInputField />\n  </div>\n);\nexport const FormInputField = () => {\n\n  let regular = /[a-z]+/;\n  const navigation = useNavigate();\n  const { handleSubmit, reset, control } = useForm();\n  const [pin, setPin] = React.useState(null);\n\n  const [fullWidth, setFullWidth] = React.useState(true);\n  const [maxWidth, setMaxWidth] = React.useState('sm');\n  const [open, setOpen] = React.useState(false);\n  const [showPassword, setShowPassword] = React.useState(false);\n\n  const handleClickShowPassword = () => setShowPassword((show) => !show);\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n\n  let rising = JSON.parse(window.localStorage.getItem('**tont>>count??'));\n  let namegroup = JSON.parse(window.localStorage.getItem('**tont>>name??'));\n\n  let currencygroup = JSON.parse(window.localStorage.getItem('**tont>>currency??'));\n  let listgroup = JSON.parse(window.localStorage.getItem('@@xi^^,view**++'));\n\n  let docTon = namegroup + JSON.parse(window.localStorage.getItem('USER'));\n\n  const handleClose = () => {\n    setOpen(false);\n  }\n  React.useEffect(async () => {\n\n    try {\n      await onSnapshot(doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n        setPin(doc.data().code);\n      });\n    } catch {\n      window.console.log(`Erreur`);\n    }\n\n  }, []);\n\n\n  const onSubmit = async (data) => {\n\n    if (data.code === undefined) {\n      setOpen(true);\n      reset();\n\n    } else {\n\n      if (data.code.length != 6 || regular.test(data.code)) {\n        setOpen(true);\n        reset();\n\n      } else {\n\n        if (pin != data.code) {\n          setOpen(true);\n          reset();\n        } else {\n\n          let group = namegroup + JSON.parse(window.localStorage.getItem('USER'));\n\n          if (JSON.parse(window.localStorage.getItem('**tont>>currency??')) === 'USD') {\n            decrementMoneyClientDollar(Number(rising));\n          } else {\n            decrementMoneyClientFran(Number(rising));\n          }\n\n          let list = JSON.parse(window.localStorage.getItem('@@xi^^,view**++'));\n\n          [...list].map((item) => {\n\n            if (item === JSON.parse(window.localStorage.getItem('USER'))) {\n\n              window.setTimeout(async () => {\n                allUserTontine(group, item, rising, 0, true, moment().format(), list.indexOf(item));\n                const washingtonRef = doc(db, \"client\", item);\n                await updateDoc(washingtonRef, {\n                  grouptontine: arrayUnion(group),\n                  grouptontinename: arrayUnion(namegroup)\n                });\n\n              }, 500);\n            } else {\n\n              window.setTimeout(async () => {\n                allUserTontine(group, item, 0, 0, false, moment().format(), list.indexOf(item));\n                const washingtonRef = doc(db, \"client\", item);\n                await updateDoc(washingtonRef, {\n                  grouptontine: arrayUnion(group),\n                  grouptontinename: arrayUnion(namegroup)\n                });\n              }, 500);\n            }\n          });\n\n          window.localStorage.setItem('??next^^**$$', JSON.stringify(false));\n          createTontine(docTon, rising, rising, listgroup.length, currencygroup);\n\n          window.setTimeout(() => {\n            navigation('/tontine/form/well');\n          }, 1000);\n\n\n        }\n\n      };\n\n    }\n\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <FormControl\n        sx={{ width: '100%' }}\n\n        variant=\"standard\">\n        <InputLabel htmlFor=\"standard-adornment-password\"><span className='pop-up'>Pin actuel</span></InputLabel>\n\n        <Controller\n          name=\"code\"\n          control={control}\n          render={({ field }) =>\n\n            <Input\n              id=\"standard-adornment-password\"\n              {...field}\n              type={showPassword ? 'numeric' : 'password'}\n              inputProps={{\n                autoComplete: \"off\", inputMode: 'numeric'\n              }}\n\n              endAdornment={\n                <InputAdornment position=\"end\">\n\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={handleClickShowPassword}\n                    onMouseDown={handleMouseDownPassword}\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n\n                </InputAdornment>\n              }\n\n            />}\n        />\n\n      </FormControl>\n\n      <Dialog\n        fullWidth={fullWidth}\n        maxWidth={maxWidth}\n        open={open}\n        onClose={handleClose}>\n\n        <DialogTitle><h1 className='pop-up'>MuunganoMoney</h1></DialogTitle>\n        <DialogContent>\n\n          <DialogContentText>\n            <p className='pop-up'>\n              Code pin Incorrect\n     </p>\n          </DialogContentText>\n\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}><span className='pop-up'>Fermer</span></Button>\n        </DialogActions>\n      </Dialog>\n\n      <button className='Btn-Broker'>Créer</button>\n    </form>\n  );\n};\n\n\nexport async function decrementMoneyClientDollar(money) {\n\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER')));\n\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    usd: increment(-money)\n  });\n\n};\nexport async function decrementMoneyClientFran(money) {\n\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER')));\n\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    cdf: increment(-money)\n  });\n\n};\n\n// create Group tontine in the list\nexport async function createTontine(docUser, rising, asked, count, currency) {\n  // Add a new document in collection \"client\"\n  await setDoc(doc(db, \"tontine\", docUser), {\n    rising: rising,\n    date: moment().format(),\n    asked: asked,\n    count: count,\n    currency: currency,\n    position: 1,\n  });\n\n};\n// create col all user tontine\nexport async function allUserTontine(colUser, docUser, solde, asked, soldeactive, date, position) {\n\n  let obj = { solde: solde, date: date, asked: asked }\n  // Add a new document in collection \"tontine\"\n  await setDoc(doc(db, colUser, docUser), {\n    solde: solde,\n    soldeactive: soldeactive,\n    date: date,\n    asked: asked,\n    position: position,\n    activity: arrayUnion(obj)\n  });\n\n}"]},"metadata":{},"sourceType":"module"}