{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Documents/Money/src/Brokers/Pin/Now/Input.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Input.css';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\nimport { collection, getDocs, doc, onSnapshot, updateDoc, increment, arrayUnion, setDoc } from 'firebase/firestore';\nimport { db } from '../../../firebase';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport IconButton from '@mui/material/IconButton';\nimport Input from '@mui/material/Input';\nimport InputLabel from '@mui/material/InputLabel';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport FormControl from '@mui/material/FormControl';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport moment from 'moment'; // View Form Update view\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ReturnFormUpdate() {\n  return /*#__PURE__*/_jsxDEV(Media, {\n    queries: {\n      small: '(max-width: 599px)',\n      medium: '(min-width: 600px) and (max-width:1199px)',\n      large: '(min-width: 1200px)'\n    },\n    children: matches => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [matches.small && /*#__PURE__*/_jsxDEV(ScreenSmall, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }, this), matches.medium && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 30\n      }, this), matches.large && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n_c = ReturnFormUpdate;\n;\nexport const ScreenLarge = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-form-input-nows\",\n  children: /*#__PURE__*/_jsxDEV(FormInputField, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 49,\n  columnNumber: 3\n}, this);\n_c2 = ScreenLarge;\nexport const ScreenSmall = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"wrp-form-input-nows\",\n  children: /*#__PURE__*/_jsxDEV(FormInputField, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 54,\n  columnNumber: 3\n}, this);\n_c3 = ScreenSmall;\nexport const FormInputField = () => {\n  _s();\n\n  let pushDocs = new Array();\n  let regular = /[a-z]+/;\n  const navigation = useNavigate();\n  const {\n    handleSubmit,\n    reset,\n    control\n  } = useForm();\n  const [pin, setPin] = React.useState(null);\n  const [fullWidth, setFullWidth] = React.useState(true);\n  const [maxWidth, setMaxWidth] = React.useState('sm');\n  const [open, setOpen] = React.useState(false);\n  const [showPassword, setShowPassword] = React.useState(false);\n  const [status, setStatus] = React.useState(null);\n\n  const handleClickShowPassword = () => setShowPassword(show => !show);\n\n  const handleMouseDownPassword = event => {\n    event.preventDefault();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  React.useEffect(async () => {\n    const querySnapshot = await getDocs(collection(db, \"client\"));\n    querySnapshot.forEach(doc => {\n      pushDocs.push(doc.id);\n    });\n    const verifierCollection = pushDocs.some(value => value == JSON.parse(window.localStorage.getItem('USER')));\n    const unsub = onSnapshot(doc(db, verifierCollection ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n      setPin(doc.data().code);\n      setStatus(doc.data().state);\n    });\n  }, []); // Number Valid of\n\n  let OperaVoda = JSON.parse(window.localStorage.getItem('voda#@**__'));\n  let OperaAirtel = JSON.parse(window.localStorage.getItem('airtel#@**__'));\n  let OperaOrange = JSON.parse(window.localStorage.getItem('orange#@**__'));\n  let OperaAfricell = JSON.parse(window.localStorage.getItem('africell#@**__'));\n  let moneyVoda = JSON.parse(window.localStorage.getItem('@!money%voda'));\n  let moneyAirtel = JSON.parse(window.localStorage.getItem('@!money%airtel'));\n  let moneyOrange = JSON.parse(window.localStorage.getItem('@!money%orange'));\n  let moneyAfricell = JSON.parse(window.localStorage.getItem('@!money%africell'));\n  let UniteVoda = JSON.parse(window.localStorage.getItem('@!unite%voda'));\n  let UniteAirtel = JSON.parse(window.localStorage.getItem('@!unite%airtel'));\n  let UniteOrange = JSON.parse(window.localStorage.getItem('@!unite%orange'));\n  let UniteAfricell = JSON.parse(window.localStorage.getItem('@!unite%africell')); // get phone number \n\n  let numVoda = JSON.parse(window.localStorage.getItem('^^^nu**+vod&'));\n  let phoneAirtel = JSON.parse(window.localStorage.getItem('^^^nu**+air&'));\n  let phoneOrange = JSON.parse(window.localStorage.getItem('^^^nu**+oran&'));\n  let phoneAfricell = JSON.parse(window.localStorage.getItem('^^^nu**+afri&')); // ID collections\n\n  let fiatColl = JSON.parse(window.localStorage.getItem('USER'));\n\n  const onSubmit = async data => {\n    let nowDocs = moment().format();\n    let dataCollection = fiatColl;\n    dataCollection = 'unite' + dataCollection;\n\n    if (data.code === undefined) {\n      setOpen(true);\n      reset();\n    } else {\n      if (data.code.length != 6 || regular.test(data.code)) {\n        setOpen(true);\n        reset();\n      } else {\n        if (pin != data.code) {\n          setOpen(true);\n          reset();\n        } else {\n          if (OperaVoda) {\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n              let vodaObj = {\n                money: moneyVoda,\n                devise: 'USD',\n                unite: parseInt(UniteVoda),\n                date: moment().format(),\n                phone: numVoda\n              };\n              buyUsd(moneyVoda, status);\n              getDocsView(dataCollection, nowDocs, vodaObj);\n            } else {\n              let vodaObj = {\n                money: moneyVoda,\n                devise: 'CDF',\n                unite: parseInt(UniteVoda),\n                date: moment().format(),\n                phone: numVoda\n              };\n              buyCdf(moneyVoda, status);\n              getDocsView(dataCollection, nowDocs, vodaObj);\n            }\n          }\n\n          if (OperaAirtel) {\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n              const unite = Number(moneyAirtel) * 100;\n              let airtelObj = {\n                money: moneyAirtel,\n                devise: 'USD',\n                unite: parseInt(UniteAirtel),\n                date: moment().format(),\n                phone: phoneAirtel\n              };\n              buyUsd(moneyAirtel, status);\n              getDocsView(dataCollection, nowDocs, airtelObj);\n            } else {\n              const unite = Number(moneyAirtel) / 27;\n              let airtelObj = {\n                money: moneyAirtel,\n                devise: 'CDF',\n                unite: parseInt(UniteAirtel),\n                date: moment().format(),\n                phone: phoneAirtel\n              };\n              buyCdf(moneyAirtel, status);\n              getDocsView(dataCollection, nowDocs, airtelObj);\n            }\n          }\n\n          if (OperaOrange) {\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n              const unite = Number(moneyOrange) * 100;\n              let orangeObj = {\n                money: moneyOrange,\n                devise: 'USD',\n                unite: parseInt(UniteOrange),\n                date: moment().format(),\n                phone: phoneOrange\n              };\n              buyUsd(moneyOrange, status);\n              getDocsView(dataCollection, nowDocs, orangeObj);\n            } else {\n              const unite = Number(moneyOrange) / 27;\n              let orangeObj = {\n                money: moneyOrange,\n                devise: 'CDF',\n                unite: parseInt(UniteOrange),\n                date: moment().format(),\n                phone: phoneOrange\n              };\n              buyCdf(moneyOrange, status);\n              getDocsView(dataCollection, nowDocs, orangeObj);\n            }\n          }\n\n          if (OperaAfricell) {\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n              const unite = Number(moneyAfricell) * 100;\n              let africellObj = {\n                money: moneyAfricell,\n                devise: 'USD',\n                unite: parseInt(UniteAfricell),\n                date: moment().format(),\n                phone: phoneAfricell\n              };\n              buyUsd(moneyAfricell, status);\n              getDocsView(dataCollection, nowDocs, africellObj);\n            } else {\n              const unite = Number(moneyAfricell) / 27;\n              let africellObj = {\n                money: moneyAfricell,\n                devise: 'CDF',\n                unite: parseInt(UniteAfricell),\n                date: moment().format(),\n                phone: phoneAfricell\n              };\n              buyCdf(moneyAfricell, status);\n              getDocsView(dataCollection, nowDocs, africellObj);\n            }\n          }\n\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n          updateTimeTransaction(dataCollection, nowDocs);\n          window.localStorage.setItem('^*$#path**', false);\n          navigation('/brokers/unite/thank');\n        }\n      }\n\n      ;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(FormControl, {\n      sx: {\n        width: '100%'\n      },\n      variant: \"standard\",\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        htmlFor: \"standard-adornment-password\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"pop-up\",\n          children: \"Pin actuel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 59\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controller, {\n        name: \"code\",\n        control: control,\n        render: ({\n          field\n        }) => /*#__PURE__*/_jsxDEV(Input, {\n          id: \"standard-adornment-password\",\n          ...field,\n          type: showPassword ? 'numeric' : 'password',\n          inputProps: {\n            autoComplete: \"off\",\n            inputMode: 'numeric'\n          },\n          endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"end\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"toggle password visibility\",\n              onClick: handleClickShowPassword,\n              onMouseDown: handleMouseDownPassword,\n              children: showPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 57\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      fullWidth: fullWidth,\n      maxWidth: maxWidth,\n      open: open,\n      onClose: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"pop-up\",\n          children: \"MuunganoMoney\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pop-up\",\n            children: \"Code pin Incorrect\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pop-up\",\n            children: \"Fermer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"Btn\",\n      children: \"Envoi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 255,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FormInputField, \"T91qM601aXGkWbibhLJb9eyZ71w=\", false, function () {\n  return [useNavigate, useForm];\n});\n\n_c4 = FormInputField;\nexport async function buyCdf(prix, collections) {\n  const washingtonRef = doc(db, collections, JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    cdf: increment(-prix)\n  });\n}\n;\nexport async function buyUsd(prix, collections) {\n  const washingtonRef = doc(db, collections, JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    usd: increment(-prix)\n  });\n}\n;\nexport async function creditUnion(creditprice, creditdevise, creditunite, time, collections) {\n  let unite = {\n    status: false,\n    price: creditprice,\n    devise: creditdevise,\n    unite: creditunite,\n    date: time\n  };\n  let source = {\n    a: 1,\n    b: 2\n  };\n  const washingtonRef = doc(db, collections, JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    credit: arrayUnion(source)\n  });\n}\n;\nexport async function getDocsView(col, fiatDocs, data) {\n  await setDoc(doc(db, col, fiatDocs), {\n    date: moment().format(),\n    data: arrayUnion(data)\n  }, {\n    merge: true\n  });\n}\n;\nexport async function updateTimeTransaction(userCollection, userDocs) {\n  await setDoc(doc(db, userCollection, userDocs), {\n    date: moment().format()\n  }, {\n    merge: true\n  });\n}\n;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ReturnFormUpdate\");\n$RefreshReg$(_c2, \"ScreenLarge\");\n$RefreshReg$(_c3, \"ScreenSmall\");\n$RefreshReg$(_c4, \"FormInputField\");","map":{"version":3,"sources":["/Users/USER/Documents/Money/src/Brokers/Pin/Now/Input.js"],"names":["React","Media","useNavigate","useForm","Controller","collection","getDocs","doc","onSnapshot","updateDoc","increment","arrayUnion","setDoc","db","Button","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","IconButton","Input","InputLabel","InputAdornment","FormControl","Visibility","VisibilityOff","moment","ReturnFormUpdate","small","medium","large","matches","ScreenLarge","ScreenSmall","FormInputField","pushDocs","Array","regular","navigation","handleSubmit","reset","control","pin","setPin","useState","fullWidth","setFullWidth","maxWidth","setMaxWidth","open","setOpen","showPassword","setShowPassword","status","setStatus","handleClickShowPassword","show","handleMouseDownPassword","event","preventDefault","handleClose","useEffect","querySnapshot","forEach","push","id","verifierCollection","some","value","JSON","parse","window","localStorage","getItem","unsub","data","code","state","OperaVoda","OperaAirtel","OperaOrange","OperaAfricell","moneyVoda","moneyAirtel","moneyOrange","moneyAfricell","UniteVoda","UniteAirtel","UniteOrange","UniteAfricell","numVoda","phoneAirtel","phoneOrange","phoneAfricell","fiatColl","onSubmit","nowDocs","format","dataCollection","undefined","length","test","vodaObj","money","devise","unite","parseInt","date","phone","buyUsd","getDocsView","buyCdf","Number","airtelObj","orangeObj","africellObj","setItem","stringify","updateTimeTransaction","width","field","autoComplete","inputMode","prix","collections","washingtonRef","cdf","usd","creditUnion","creditprice","creditdevise","creditunite","time","price","source","a","b","credit","col","fiatDocs","merge","userCollection","userDocs"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,iBAApC;AAEA,SAASC,UAAT,EAAqBC,OAArB,EAA8BC,GAA9B,EAAmCC,UAAnC,EAA+CC,SAA/C,EAA0DC,SAA1D,EAAqEC,UAArE,EAAiFC,MAAjF,QAA+F,oBAA/F;AACA,SAASC,EAAT,QAAmB,mBAAnB;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,iBAAP,MAA8B,iCAA9B;AAEA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,OAAOC,aAAP,MAA0B,mCAA1B;AACA,OAAOC,MAAP,MAAmB,QAAnB,C,CAIA;;;;AACA,eAAe,SAASC,gBAAT,GAA4B;AACzC,sBACE,QAAC,KAAD;AACE,IAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAE,oBADA;AAEPC,MAAAA,MAAM,EAAE,2CAFD;AAGPC,MAAAA,KAAK,EAAE;AAHA,KADX;AAAA,cAMGC,OAAO,iBACN;AAAA,iBACGA,OAAO,CAACH,KAAR,iBAAiB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,cADpB,EAEGG,OAAO,CAACF,MAAR,iBAAkB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,cAFrB,EAGGE,OAAO,CAACD,KAAR,iBAAiB,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,cAHpB;AAAA;AAPJ;AAAA;AAAA;AAAA;AAAA,UADF;AAgBD;KAjBuBH,gB;AAiBvB;AAED,OAAO,MAAMK,WAAW,GAAG,mBACzB;AAAK,EAAA,SAAS,EAAC,qBAAf;AAAA,yBACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,QADK;MAAMA,W;AAKb,OAAO,MAAMC,WAAW,GAAG,mBACzB;AAAK,EAAA,SAAS,EAAC,qBAAf;AAAA,yBACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,QADK;MAAMA,W;AAKb,OAAO,MAAMC,cAAc,GAAG,MAAM;AAAA;;AAElC,MAAIC,QAAQ,GAAG,IAAIC,KAAJ,EAAf;AACA,MAAIC,OAAO,GAAG,QAAd;AAEA,QAAMC,UAAU,GAAGrC,WAAW,EAA9B;AACA,QAAM;AAAEsC,IAAAA,YAAF;AAAgBC,IAAAA,KAAhB;AAAuBC,IAAAA;AAAvB,MAAmCvC,OAAO,EAAhD;AACA,QAAM,CAACwC,GAAD,EAAMC,MAAN,IAAgB5C,KAAK,CAAC6C,QAAN,CAAe,IAAf,CAAtB;AAEA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4B/C,KAAK,CAAC6C,QAAN,CAAe,IAAf,CAAlC;AACA,QAAM,CAACG,QAAD,EAAWC,WAAX,IAA0BjD,KAAK,CAAC6C,QAAN,CAAe,IAAf,CAAhC;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBnD,KAAK,CAAC6C,QAAN,CAAe,KAAf,CAAxB;AACA,QAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCrD,KAAK,CAAC6C,QAAN,CAAe,KAAf,CAAxC;AACA,QAAM,CAACS,MAAD,EAASC,SAAT,IAAsBvD,KAAK,CAAC6C,QAAN,CAAe,IAAf,CAA5B;;AAEA,QAAMW,uBAAuB,GAAG,MAAMH,eAAe,CAAEI,IAAD,IAAU,CAACA,IAAZ,CAArD;;AACA,QAAMC,uBAAuB,GAAIC,KAAD,IAAW;AACzCA,IAAAA,KAAK,CAACC,cAAN;AACD,GAFD;;AAIA,QAAMC,WAAW,GAAG,MAAM;AACxBV,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIAnD,EAAAA,KAAK,CAAC8D,SAAN,CAAgB,YAAY;AAE1B,UAAMC,aAAa,GAAG,MAAMzD,OAAO,CAACD,UAAU,CAACQ,EAAD,EAAK,QAAL,CAAX,CAAnC;AACAkD,IAAAA,aAAa,CAACC,OAAd,CAAuBzD,GAAD,IAAS;AAC7B6B,MAAAA,QAAQ,CAAC6B,IAAT,CAAc1D,GAAG,CAAC2D,EAAlB;AACD,KAFD;AAIA,UAAMC,kBAAkB,GAAG/B,QAAQ,CAACgC,IAAT,CAAeC,KAAD,IAAWA,KAAK,IAAIC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAlC,CAA3B;AACA,UAAMC,KAAK,GAAGnE,UAAU,CAACD,GAAG,CAACM,EAAD,EAAKsD,kBAAkB,GAAG,QAAH,GAAc,OAArC,EAA8CG,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAA9C,CAAJ,EAAqGnE,GAAD,IAAS;AACnIqC,MAAAA,MAAM,CAACrC,GAAG,CAACqE,IAAJ,GAAWC,IAAZ,CAAN;AACAtB,MAAAA,SAAS,CAAChD,GAAG,CAACqE,IAAJ,GAAWE,KAAZ,CAAT;AACD,KAHuB,CAAxB;AAKD,GAbD,EAaG,EAbH,EAxBkC,CAuClC;;AACA,MAAIC,SAAS,GAAGT,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,CAAX,CAAhB;AACA,MAAIM,WAAW,GAAGV,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAX,CAAlB;AACA,MAAIO,WAAW,GAAGX,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAX,CAAlB;AACA,MAAIQ,aAAa,GAAGZ,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,CAAX,CAApB;AAGA,MAAIS,SAAS,GAAGb,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAX,CAAhB;AACA,MAAIU,WAAW,GAAGd,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,CAAX,CAAlB;AACA,MAAIW,WAAW,GAAGf,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,CAAX,CAAlB;AACA,MAAIY,aAAa,GAAGhB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,kBAA5B,CAAX,CAApB;AAGA,MAAIa,SAAS,GAAGjB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAX,CAAhB;AACA,MAAIc,WAAW,GAAGlB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,CAAX,CAAlB;AACA,MAAIe,WAAW,GAAGnB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,CAAX,CAAlB;AACA,MAAIgB,aAAa,GAAGpB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,kBAA5B,CAAX,CAApB,CAvDkC,CA0DlC;;AACA,MAAIiB,OAAO,GAAGrB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAX,CAAd;AACA,MAAIkB,WAAW,GAAGtB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAX,CAAlB;AACA,MAAImB,WAAW,GAAGvB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAAX,CAAlB;AACA,MAAIoB,aAAa,GAAGxB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAAX,CAApB,CA9DkC,CAkElC;;AACA,MAAIqB,QAAQ,GAAGzB,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAf;;AAGA,QAAMsB,QAAQ,GAAG,MAAOpB,IAAP,IAAgB;AAE/B,QAAIqB,OAAO,GAAGtE,MAAM,GAAGuE,MAAT,EAAd;AAEA,QAAIC,cAAc,GAAGJ,QAArB;AACAI,IAAAA,cAAc,GAAG,UAAUA,cAA3B;;AAGA,QAAIvB,IAAI,CAACC,IAAL,KAAcuB,SAAlB,EAA6B;AAC3BjD,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAV,MAAAA,KAAK;AAEN,KAJD,MAIO;AAEL,UAAImC,IAAI,CAACC,IAAL,CAAUwB,MAAV,IAAoB,CAApB,IAAyB/D,OAAO,CAACgE,IAAR,CAAa1B,IAAI,CAACC,IAAlB,CAA7B,EAAsD;AACpD1B,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAV,QAAAA,KAAK;AAEN,OAJD,MAIO;AAEL,YAAIE,GAAG,IAAIiC,IAAI,CAACC,IAAhB,EAAsB;AACpB1B,UAAAA,OAAO,CAAC,IAAD,CAAP;AACAV,UAAAA,KAAK;AACN,SAHD,MAGO;AAEL,cAAIsC,SAAJ,EAAe;AAEb,gBAAIT,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,iBAA5B,CAAX,CAAJ,EAAgE;AAE9D,kBAAI6B,OAAO,GAAG;AAAEC,gBAAAA,KAAK,EAAErB,SAAT;AAAoBsB,gBAAAA,MAAM,EAAE,KAA5B;AAAmCC,gBAAAA,KAAK,EAAEC,QAAQ,CAACpB,SAAD,CAAlD;AAA+DqB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAArE;AAAwFW,gBAAAA,KAAK,EAAElB;AAA/F,eAAd;AACAmB,cAAAA,MAAM,CAAC3B,SAAD,EAAY7B,MAAZ,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BM,OAA1B,CAAX;AAED,aAND,MAMO;AAEL,kBAAIA,OAAO,GAAG;AAAEC,gBAAAA,KAAK,EAAErB,SAAT;AAAoBsB,gBAAAA,MAAM,EAAE,KAA5B;AAAmCC,gBAAAA,KAAK,EAAEC,QAAQ,CAACpB,SAAD,CAAlD;AAA+DqB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAArE;AAAwFW,gBAAAA,KAAK,EAAElB;AAA/F,eAAd;AAEAqB,cAAAA,MAAM,CAAC7B,SAAD,EAAY7B,MAAZ,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BM,OAA1B,CAAX;AAED;AAGF;;AACD,cAAIvB,WAAJ,EAAiB;AAEf,gBAAIV,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,iBAA5B,CAAX,CAAJ,EAAgE;AAE9D,oBAAMgC,KAAK,GAAGO,MAAM,CAAC7B,WAAD,CAAN,GAAsB,GAApC;AACA,kBAAI8B,SAAS,GAAG;AAAEV,gBAAAA,KAAK,EAAEpB,WAAT;AAAsBqB,gBAAAA,MAAM,EAAE,KAA9B;AAAqCC,gBAAAA,KAAK,EAAEC,QAAQ,CAACnB,WAAD,CAApD;AAAmEoB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAAzE;AAA4FW,gBAAAA,KAAK,EAAEjB;AAAnG,eAAhB;AAEAkB,cAAAA,MAAM,CAAC1B,WAAD,EAAc9B,MAAd,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BiB,SAA1B,CAAX;AAED,aARD,MAQO;AAEL,oBAAMR,KAAK,GAAGO,MAAM,CAAC7B,WAAD,CAAN,GAAsB,EAApC;AACA,kBAAI8B,SAAS,GAAG;AAAEV,gBAAAA,KAAK,EAAEpB,WAAT;AAAsBqB,gBAAAA,MAAM,EAAE,KAA9B;AAAqCC,gBAAAA,KAAK,EAAEC,QAAQ,CAACnB,WAAD,CAApD;AAAmEoB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAAzE;AAA4FW,gBAAAA,KAAK,EAAEjB;AAAnG,eAAhB;AAEAoB,cAAAA,MAAM,CAAC5B,WAAD,EAAc9B,MAAd,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BiB,SAA1B,CAAX;AACD;AAEF;;AACD,cAAIjC,WAAJ,EAAiB;AAEf,gBAAIX,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,iBAA5B,CAAX,CAAJ,EAAgE;AAE9D,oBAAMgC,KAAK,GAAGO,MAAM,CAAC5B,WAAD,CAAN,GAAsB,GAApC;AACA,kBAAI8B,SAAS,GAAG;AAAEX,gBAAAA,KAAK,EAAEnB,WAAT;AAAsBoB,gBAAAA,MAAM,EAAE,KAA9B;AAAqCC,gBAAAA,KAAK,EAAEC,QAAQ,CAAClB,WAAD,CAApD;AAAmEmB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAAzE;AAA4FW,gBAAAA,KAAK,EAAEhB;AAAnG,eAAhB;AAEAiB,cAAAA,MAAM,CAACzB,WAAD,EAAc/B,MAAd,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BkB,SAA1B,CAAX;AAED,aARD,MAQO;AAEL,oBAAMT,KAAK,GAAGO,MAAM,CAAC5B,WAAD,CAAN,GAAsB,EAApC;AACA,kBAAI8B,SAAS,GAAG;AAAEX,gBAAAA,KAAK,EAAEnB,WAAT;AAAsBoB,gBAAAA,MAAM,EAAE,KAA9B;AAAqCC,gBAAAA,KAAK,EAAEC,QAAQ,CAAClB,WAAD,CAApD;AAAmEmB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAAzE;AAA4FW,gBAAAA,KAAK,EAAEhB;AAAnG,eAAhB;AAEAmB,cAAAA,MAAM,CAAC3B,WAAD,EAAc/B,MAAd,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BkB,SAA1B,CAAX;AAGD;AAEF;;AACD,cAAIjC,aAAJ,EAAmB;AAEjB,gBAAIZ,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,iBAA5B,CAAX,CAAJ,EAAgE;AAE9D,oBAAMgC,KAAK,GAAGO,MAAM,CAAC3B,aAAD,CAAN,GAAwB,GAAtC;AACA,kBAAI8B,WAAW,GAAG;AAAEZ,gBAAAA,KAAK,EAAElB,aAAT;AAAwBmB,gBAAAA,MAAM,EAAE,KAAhC;AAAuCC,gBAAAA,KAAK,EAAEC,QAAQ,CAACjB,aAAD,CAAtD;AAAuEkB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAA7E;AAAgGW,gBAAAA,KAAK,EAAEf;AAAvG,eAAlB;AAEAgB,cAAAA,MAAM,CAACxB,aAAD,EAAgBhC,MAAhB,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BmB,WAA1B,CAAX;AAED,aARD,MAQO;AAEL,oBAAMV,KAAK,GAAGO,MAAM,CAAC3B,aAAD,CAAN,GAAwB,EAAtC;AACA,kBAAI8B,WAAW,GAAG;AAAEZ,gBAAAA,KAAK,EAAElB,aAAT;AAAwBmB,gBAAAA,MAAM,EAAE,KAAhC;AAAuCC,gBAAAA,KAAK,EAAEC,QAAQ,CAACjB,aAAD,CAAtD;AAAuEkB,gBAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAA7E;AAAgGW,gBAAAA,KAAK,EAAEf;AAAvG,eAAlB;AAEAkB,cAAAA,MAAM,CAAC1B,aAAD,EAAgBhC,MAAhB,CAAN;AACAyD,cAAAA,WAAW,CAACZ,cAAD,EAAiBF,OAAjB,EAA0BmB,WAA1B,CAAX;AAED;AAEF;;AAED5C,UAAAA,MAAM,CAACC,YAAP,CAAoB4C,OAApB,CAA4B,cAA5B,EAA4C/C,IAAI,CAACgD,SAAL,CAAe,CAAf,CAA5C;AACA9C,UAAAA,MAAM,CAACC,YAAP,CAAoB4C,OAApB,CAA4B,cAA5B,EAA4C/C,IAAI,CAACgD,SAAL,CAAe,CAAf,CAA5C;AACA9C,UAAAA,MAAM,CAACC,YAAP,CAAoB4C,OAApB,CAA4B,cAA5B,EAA4C/C,IAAI,CAACgD,SAAL,CAAe,CAAf,CAA5C;AACA9C,UAAAA,MAAM,CAACC,YAAP,CAAoB4C,OAApB,CAA4B,cAA5B,EAA4C/C,IAAI,CAACgD,SAAL,CAAe,CAAf,CAA5C;AAEAC,UAAAA,qBAAqB,CAACpB,cAAD,EAAiBF,OAAjB,CAArB;AACAzB,UAAAA,MAAM,CAACC,YAAP,CAAoB4C,OAApB,CAA4B,YAA5B,EAA0C,KAA1C;AACA9E,UAAAA,UAAU,CAAC,sBAAD,CAAV;AAGD;AAEF;;AAAA;AAEF;AAEF,GA5HD;;AA8HA,sBACE;AAAM,IAAA,QAAQ,EAAEC,YAAY,CAACwD,QAAD,CAA5B;AAAA,4BAEE,QAAC,WAAD;AACE,MAAA,EAAE,EAAE;AAAEwB,QAAAA,KAAK,EAAE;AAAT,OADN;AAGE,MAAA,OAAO,EAAC,UAHV;AAAA,8BAIE,QAAC,UAAD;AAAY,QAAA,OAAO,EAAC,6BAApB;AAAA,+BAAkD;AAAM,UAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlD;AAAA;AAAA;AAAA;AAAA,cAJF,eAME,QAAC,UAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,OAAO,EAAE9E,OAFX;AAGE,QAAA,MAAM,EAAE,CAAC;AAAE+E,UAAAA;AAAF,SAAD,kBAEN,QAAC,KAAD;AACE,UAAA,EAAE,EAAC,6BADL;AAAA,aAEMA,KAFN;AAGE,UAAA,IAAI,EAAErE,YAAY,GAAG,SAAH,GAAe,UAHnC;AAKE,UAAA,UAAU,EAAE;AACVsE,YAAAA,YAAY,EAAE,KADJ;AACWC,YAAAA,SAAS,EAAE;AADtB,WALd;AASE,UAAA,YAAY,eACV,QAAC,cAAD;AAAgB,YAAA,QAAQ,EAAC,KAAzB;AAAA,mCAEE,QAAC,UAAD;AACE,4BAAW,4BADb;AAEE,cAAA,OAAO,EAAEnE,uBAFX;AAGE,cAAA,WAAW,EAAEE,uBAHf;AAAA,wBAKGN,YAAY,gBAAG,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,sBAAH,gBAAuB,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AALtC;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA;AAVJ;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAyCE,QAAC,MAAD;AACE,MAAA,SAAS,EAAEN,SADb;AAEE,MAAA,QAAQ,EAAEE,QAFZ;AAGE,MAAA,IAAI,EAAEE,IAHR;AAIE,MAAA,OAAO,EAAEW,WAJX;AAAA,8BAME,QAAC,WAAD;AAAA,+BAAa;AAAI,UAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAb;AAAA;AAAA;AAAA;AAAA,cANF,eAOE,QAAC,aAAD;AAAA,+BAEE,QAAC,iBAAD;AAAA,iCACE;AAAG,YAAA,SAAS,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,cAPF,eAgBE,QAAC,aAAD;AAAA,+BACE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAEA,WAAjB;AAAA,iCAA8B;AAAM,YAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA9B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,YAzCF,eA8DE;AAAQ,MAAA,SAAS,EAAC,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA9DF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAkED,CAtQM;;GAAM1B,c;UAKQjC,W,EACsBC,O;;;MAN9BgC,c;AAyQb,OAAO,eAAe6E,MAAf,CAAsBY,IAAtB,EAA4BC,WAA5B,EAAyC;AAE9C,QAAMC,aAAa,GAAGvH,GAAG,CAACM,EAAD,EAAKgH,WAAL,EAAkBvD,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAlB,CAAzB,CAF8C,CAI9C;;AACA,QAAMjE,SAAS,CAACqH,aAAD,EAAgB;AAC7BC,IAAAA,GAAG,EAAErH,SAAS,CAAC,CAAEkH,IAAH;AADe,GAAhB,CAAf;AAGD;AAAA;AACD,OAAO,eAAed,MAAf,CAAsBc,IAAtB,EAA4BC,WAA5B,EAAyC;AAE9C,QAAMC,aAAa,GAAGvH,GAAG,CAACM,EAAD,EAAKgH,WAAL,EAAkBvD,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAlB,CAAzB,CAF8C,CAI9C;;AACA,QAAMjE,SAAS,CAACqH,aAAD,EAAgB;AAC7BE,IAAAA,GAAG,EAAEtH,SAAS,CAAC,CAAEkH,IAAH;AADe,GAAhB,CAAf;AAID;AAAA;AACD,OAAO,eAAeK,WAAf,CAA2BC,WAA3B,EAAwCC,YAAxC,EAAsDC,WAAtD,EAAmEC,IAAnE,EAAyER,WAAzE,EAAsF;AAE3F,MAAInB,KAAK,GAAG;AAAEpD,IAAAA,MAAM,EAAE,KAAV;AAAiBgF,IAAAA,KAAK,EAAEJ,WAAxB;AAAqCzB,IAAAA,MAAM,EAAE0B,YAA7C;AAA2DzB,IAAAA,KAAK,EAAE0B,WAAlE;AAA+ExB,IAAAA,IAAI,EAAEyB;AAArF,GAAZ;AACA,MAAIE,MAAM,GAAG;AAAEC,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAAb;AAEA,QAAMX,aAAa,GAAGvH,GAAG,CAACM,EAAD,EAAKgH,WAAL,EAAkBvD,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAlB,CAAzB,CAL2F,CAM3F;;AACA,QAAMjE,SAAS,CAACqH,aAAD,EAAgB;AAC7BY,IAAAA,MAAM,EAAE/H,UAAU,CAAC4H,MAAD;AADW,GAAhB,CAAf;AAID;AAAA;AAED,OAAO,eAAexB,WAAf,CAA2B4B,GAA3B,EAAgCC,QAAhC,EAA0ChE,IAA1C,EAAgD;AACrD,QAAMhE,MAAM,CAACL,GAAG,CAACM,EAAD,EAAK8H,GAAL,EAAUC,QAAV,CAAJ,EAAyB;AAAEhC,IAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT,EAAR;AAA2BtB,IAAAA,IAAI,EAAEjE,UAAU,CAACiE,IAAD;AAA3C,GAAzB,EAA8E;AAAEiE,IAAAA,KAAK,EAAE;AAAT,GAA9E,CAAZ;AACD;AAAA;AAED,OAAO,eAAetB,qBAAf,CAAqCuB,cAArC,EAAqDC,QAArD,EAA+D;AACpE,QAAMnI,MAAM,CAACL,GAAG,CAACM,EAAD,EAAKiI,cAAL,EAAqBC,QAArB,CAAJ,EAAoC;AAAEnC,IAAAA,IAAI,EAAEjF,MAAM,GAAGuE,MAAT;AAAR,GAApC,EAAiE;AAAE2C,IAAAA,KAAK,EAAE;AAAT,GAAjE,CAAZ;AACD;AAAA","sourcesContent":["import React from 'react';\nimport './Input.css';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { collection, getDocs, doc, onSnapshot, updateDoc, increment, arrayUnion, setDoc } from 'firebase/firestore';\nimport { db } from '../../../firebase';\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\n\nimport IconButton from '@mui/material/IconButton';\nimport Input from '@mui/material/Input';\nimport InputLabel from '@mui/material/InputLabel';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport FormControl from '@mui/material/FormControl';\nimport Visibility from '@mui/icons-material/Visibility';\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\nimport moment from 'moment';\n\n\n\n// View Form Update view\nexport default function ReturnFormUpdate() {\n  return (\n    <Media\n      queries={{\n        small: '(max-width: 599px)',\n        medium: '(min-width: 600px) and (max-width:1199px)',\n        large: '(min-width: 1200px)',\n      }}>\n      {matches => (\n        <>\n          {matches.small && <ScreenSmall />}\n          {matches.medium && <ScreenLarge />}\n          {matches.large && <ScreenLarge />}\n        </>\n      )}\n    </Media>\n  );\n};\n\nexport const ScreenLarge = () => (\n  <div className='wrp-form-input-nows'>\n    <FormInputField />\n  </div>\n);\nexport const ScreenSmall = () => (\n  <div className='wrp-form-input-nows'>\n    <FormInputField />\n  </div>\n);\nexport const FormInputField = () => {\n\n  let pushDocs = new Array();\n  let regular = /[a-z]+/;\n\n  const navigation = useNavigate();\n  const { handleSubmit, reset, control } = useForm();\n  const [pin, setPin] = React.useState(null);\n\n  const [fullWidth, setFullWidth] = React.useState(true);\n  const [maxWidth, setMaxWidth] = React.useState('sm');\n  const [open, setOpen] = React.useState(false);\n  const [showPassword, setShowPassword] = React.useState(false);\n  const [status, setStatus] = React.useState(null);\n\n  const handleClickShowPassword = () => setShowPassword((show) => !show);\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  React.useEffect(async () => {\n\n    const querySnapshot = await getDocs(collection(db, \"client\"));\n    querySnapshot.forEach((doc) => {\n      pushDocs.push(doc.id);\n    });\n\n    const verifierCollection = pushDocs.some((value) => value == JSON.parse(window.localStorage.getItem('USER')));\n    const unsub = onSnapshot(doc(db, verifierCollection ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n      setPin(doc.data().code);\n      setStatus(doc.data().state);\n    });\n\n  }, []);\n\n  // Number Valid of\n  let OperaVoda = JSON.parse(window.localStorage.getItem('voda#@**__'));\n  let OperaAirtel = JSON.parse(window.localStorage.getItem('airtel#@**__'));\n  let OperaOrange = JSON.parse(window.localStorage.getItem('orange#@**__'));\n  let OperaAfricell = JSON.parse(window.localStorage.getItem('africell#@**__'));\n\n\n  let moneyVoda = JSON.parse(window.localStorage.getItem('@!money%voda'));\n  let moneyAirtel = JSON.parse(window.localStorage.getItem('@!money%airtel'));\n  let moneyOrange = JSON.parse(window.localStorage.getItem('@!money%orange'));\n  let moneyAfricell = JSON.parse(window.localStorage.getItem('@!money%africell'));\n\n\n  let UniteVoda = JSON.parse(window.localStorage.getItem('@!unite%voda'));\n  let UniteAirtel = JSON.parse(window.localStorage.getItem('@!unite%airtel'));\n  let UniteOrange = JSON.parse(window.localStorage.getItem('@!unite%orange'));\n  let UniteAfricell = JSON.parse(window.localStorage.getItem('@!unite%africell'));\n\n\n  // get phone number \n  let numVoda = JSON.parse(window.localStorage.getItem('^^^nu**+vod&'));\n  let phoneAirtel = JSON.parse(window.localStorage.getItem('^^^nu**+air&'));\n  let phoneOrange = JSON.parse(window.localStorage.getItem('^^^nu**+oran&'));\n  let phoneAfricell = JSON.parse(window.localStorage.getItem('^^^nu**+afri&'));\n\n\n\n  // ID collections\n  let fiatColl = JSON.parse(window.localStorage.getItem('USER'));\n\n\n  const onSubmit = async (data) => {\n\n    let nowDocs = moment().format();\n\n    let dataCollection = fiatColl;\n    dataCollection = 'unite' + dataCollection;\n\n\n    if (data.code === undefined) {\n      setOpen(true);\n      reset();\n\n    } else {\n\n      if (data.code.length != 6 || regular.test(data.code)) {\n        setOpen(true);\n        reset();\n\n      } else {\n\n        if (pin != data.code) {\n          setOpen(true);\n          reset();\n        } else {\n\n          if (OperaVoda) {\n\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n\n              let vodaObj = { money: moneyVoda, devise: 'USD', unite: parseInt(UniteVoda), date: moment().format(), phone: numVoda }\n              buyUsd(moneyVoda, status);\n              getDocsView(dataCollection, nowDocs, vodaObj);\n\n            } else {\n\n              let vodaObj = { money: moneyVoda, devise: 'CDF', unite: parseInt(UniteVoda), date: moment().format(), phone: numVoda }\n\n              buyCdf(moneyVoda, status);\n              getDocsView(dataCollection, nowDocs, vodaObj);\n\n            }\n\n\n          }\n          if (OperaAirtel) {\n\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n\n              const unite = Number(moneyAirtel) * 100;\n              let airtelObj = { money: moneyAirtel, devise: 'USD', unite: parseInt(UniteAirtel), date: moment().format(), phone: phoneAirtel }\n\n              buyUsd(moneyAirtel, status);\n              getDocsView(dataCollection, nowDocs, airtelObj);\n\n            } else {\n\n              const unite = Number(moneyAirtel) / 27;\n              let airtelObj = { money: moneyAirtel, devise: 'CDF', unite: parseInt(UniteAirtel), date: moment().format(), phone: phoneAirtel }\n\n              buyCdf(moneyAirtel, status);\n              getDocsView(dataCollection, nowDocs, airtelObj);\n            }\n\n          }\n          if (OperaOrange) {\n\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n\n              const unite = Number(moneyOrange) * 100;\n              let orangeObj = { money: moneyOrange, devise: 'USD', unite: parseInt(UniteOrange), date: moment().format(), phone: phoneOrange }\n\n              buyUsd(moneyOrange, status);\n              getDocsView(dataCollection, nowDocs, orangeObj);\n\n            } else {\n\n              const unite = Number(moneyOrange) / 27;\n              let orangeObj = { money: moneyOrange, devise: 'CDF', unite: parseInt(UniteOrange), date: moment().format(), phone: phoneOrange }\n\n              buyCdf(moneyOrange, status);\n              getDocsView(dataCollection, nowDocs, orangeObj);\n\n\n            }\n\n          }\n          if (OperaAfricell) {\n\n            if (JSON.parse(window.localStorage.getItem('@!access%devise'))) {\n\n              const unite = Number(moneyAfricell) * 100;\n              let africellObj = { money: moneyAfricell, devise: 'USD', unite: parseInt(UniteAfricell), date: moment().format(), phone: phoneAfricell }\n\n              buyUsd(moneyAfricell, status);\n              getDocsView(dataCollection, nowDocs, africellObj);\n\n            } else {\n\n              const unite = Number(moneyAfricell) / 27;\n              let africellObj = { money: moneyAfricell, devise: 'CDF', unite: parseInt(UniteAfricell), date: moment().format(), phone: phoneAfricell }\n\n              buyCdf(moneyAfricell, status);\n              getDocsView(dataCollection, nowDocs, africellObj);\n\n            }\n\n          }\n\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n          window.localStorage.setItem('@!money%voda', JSON.stringify(0));\n\n          updateTimeTransaction(dataCollection, nowDocs)\n          window.localStorage.setItem('^*$#path**', false);\n          navigation('/brokers/unite/thank');\n\n\n        }\n\n      };\n\n    }\n\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n\n      <FormControl\n        sx={{ width: '100%' }}\n\n        variant=\"standard\">\n        <InputLabel htmlFor=\"standard-adornment-password\"><span className='pop-up'>Pin actuel</span></InputLabel>\n\n        <Controller\n          name=\"code\"\n          control={control}\n          render={({ field }) =>\n\n            <Input\n              id=\"standard-adornment-password\"\n              {...field}\n              type={showPassword ? 'numeric' : 'password'}\n\n              inputProps={{\n                autoComplete: \"off\", inputMode: 'numeric'\n              }}\n\n              endAdornment={\n                <InputAdornment position=\"end\">\n\n                  <IconButton\n                    aria-label=\"toggle password visibility\"\n                    onClick={handleClickShowPassword}\n                    onMouseDown={handleMouseDownPassword}\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n\n                </InputAdornment>\n              }\n\n            />}\n        />\n\n      </FormControl>\n\n      <Dialog\n        fullWidth={fullWidth}\n        maxWidth={maxWidth}\n        open={open}\n        onClose={handleClose}>\n\n        <DialogTitle><h1 className='pop-up'>MuunganoMoney</h1></DialogTitle>\n        <DialogContent>\n\n          <DialogContentText>\n            <p className='pop-up'>\n              Code pin Incorrect\n     </p>\n          </DialogContentText>\n\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}><span className='pop-up'>Fermer</span></Button>\n        </DialogActions>\n      </Dialog>\n\n      <button className='Btn'>Envoi</button>\n    </form>\n  );\n};\n\n\nexport async function buyCdf(prix, collections) {\n\n  const washingtonRef = doc(db, collections, JSON.parse(window.localStorage.getItem('USER')));\n\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    cdf: increment(-(prix))\n  });\n};\nexport async function buyUsd(prix, collections) {\n\n  const washingtonRef = doc(db, collections, JSON.parse(window.localStorage.getItem('USER')));\n\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    usd: increment(-(prix)),\n  });\n\n};\nexport async function creditUnion(creditprice, creditdevise, creditunite, time, collections) {\n\n  let unite = { status: false, price: creditprice, devise: creditdevise, unite: creditunite, date: time }\n  let source = { a: 1, b: 2 }\n\n  const washingtonRef = doc(db, collections, JSON.parse(window.localStorage.getItem('USER')));\n  // Set the \"capital\" field of the city 'DC'\n  await updateDoc(washingtonRef, {\n    credit: arrayUnion(source),\n  });\n\n};\n\nexport async function getDocsView(col, fiatDocs, data) {\n  await setDoc(doc(db, col, fiatDocs), { date: moment().format(), data: arrayUnion(data) }, { merge: true });\n};\n\nexport async function updateTimeTransaction(userCollection, userDocs) {\n  await setDoc(doc(db, userCollection, userDocs), { date: moment().format() }, { merge: true });\n};\n"]},"metadata":{},"sourceType":"module"}