{"ast":null,"code":"import _defineProperty from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'./Input.css';import Media from'react-media';import{useForm}from'react-hook-form';import{useNavigate}from'react-router-dom';import{doc,getDocs,collection,getDoc,updateDoc,increment,onSnapshot}from\"firebase/firestore\";import{db}from'../../../firebase';import{phoneX}from'../../../Sign/Input';import{sendPhone}from'../../../ValidExFran/Input';import{frais,Unite,solde,money}from'../../../FC/Input';import Button from'@mui/material/Button';import Dialog from'@mui/material/Dialog';import DialogActions from'@mui/material/DialogActions';import DialogContent from'@mui/material/DialogContent';import DialogTitle from'@mui/material/DialogTitle';import DialogContentText from'@mui/material/DialogContentText';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var nowField=moment().date()-1;export var prixHash=0;export var hashTrue=true;// Input Field Component \nexport default function ReturnInput(){return/*#__PURE__*/_jsx(Media,{queries:{small:'(max-width: 599px)',medium:'(min-width: 600px) and (max-width:1199px)',large:'(min-width: 1200px)'},children:function children(matches){return/*#__PURE__*/_jsxs(_Fragment,{children:[matches.small&&/*#__PURE__*/_jsx(ScreenSmall,{}),matches.medium&&/*#__PURE__*/_jsx(SreenLarge,{}),matches.large&&/*#__PURE__*/_jsx(SreenLarge,{})]});}});};export var SreenLarge=function SreenLarge(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-input-send-money\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var ScreenSmall=function ScreenSmall(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-input-send-money-sm\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var FormInput=function FormInput(){var pushDocs=new Array();var verifierSend;var verifierGet;var navigation=useNavigate();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;//  order notebook\nvar _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),tableClient=_React$useState2[0],setTableClient=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),tableAgent=_React$useState4[0],setTableAgent=_React$useState4[1];var _React$useState5=React.useState(),_React$useState6=_slicedToArray(_React$useState5,2),tableUpgrade=_React$useState6[0],setTableUpgrade=_React$useState6[1];var _React$useState7=React.useState(),_React$useState8=_slicedToArray(_React$useState7,2),tableAdmin=_React$useState8[0],setTableAdmin=_React$useState8[1];var _React$useState9=React.useState(),_React$useState10=_slicedToArray(_React$useState9,2),tableFrais=_React$useState10[0],setTableFrais=_React$useState10[1];// send React useState  \nvar _React$useState11=React.useState(null),_React$useState12=_slicedToArray(_React$useState11,2),pin=_React$useState12[0],setPin=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),state=_React$useState14[0],setState=_React$useState14[1];var _React$useState15=React.useState(''),_React$useState16=_slicedToArray(_React$useState15,2),first=_React$useState16[0],setFirst=_React$useState16[1];var _React$useState17=React.useState(''),_React$useState18=_slicedToArray(_React$useState17,2),last=_React$useState18[0],setLast=_React$useState18[1];// getting React useState\nvar _React$useState19=React.useState(null),_React$useState20=_slicedToArray(_React$useState19,2),getstate=_React$useState20[0],setGetstate=_React$useState20[1];var _React$useState21=React.useState(''),_React$useState22=_slicedToArray(_React$useState21,2),getfirst=_React$useState22[0],setGetFirst=_React$useState22[1];var _React$useState23=React.useState(''),_React$useState24=_slicedToArray(_React$useState23,2),getlast=_React$useState24[0],setGetLast=_React$useState24[1];var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),open=_React$useState26[0],setOpen=_React$useState26[1];var _React$useState27=React.useState(true),_React$useState28=_slicedToArray(_React$useState27,2),fullWidth=_React$useState28[0],setFullWidth=_React$useState28[1];var _React$useState29=React.useState('sm'),_React$useState30=_slicedToArray(_React$useState29,2),maxWidth=_React$useState30[0],setMaxWidth=_React$useState30[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};React.useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var querySnapshot,sendRef,sendSnap,getRef,getSnap;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(collection(db,\"client\"));case 2:querySnapshot=_context.sent;querySnapshot.forEach(function(doc){pushDocs.push(doc.id);});verifierSend=pushDocs.some(function(value){return value==phoneX;});verifierGet=pushDocs.some(function(value){return value==sendPhone;});sendRef=doc(db,verifierSend?\"client\":\"agent\",phoneX);_context.next=9;return getDoc(sendRef);case 9:sendSnap=_context.sent;if(sendSnap.exists()){setPin(sendSnap.data().code);setState(sendSnap.data().state);setFirst(sendSnap.data().firstname);setLast(sendSnap.data().lastname);};getRef=doc(db,verifierGet?\"client\":\"agent\",sendPhone);_context.next=15;return getDoc(getRef);case 15:getSnap=_context.sent;if(getSnap.exists()){setGetstate(getSnap.data().state);setGetFirst(getSnap.data().firstname);setGetLast(getSnap.data().lastname);};_context.prev=18;_context.next=21;return onSnapshot(doc(db,\"clients\",\"emoney\"),function(doc){setTableClient(doc.data().cdf);});case 21:_context.next=23;return onSnapshot(doc(db,\"agents\",\"emoney\"),function(doc){setTableAgent(doc.data().cdf);});case 23:_context.next=25;return onSnapshot(doc(db,\"muungano\",\"commission\"),function(doc){setTableAdmin(doc.data().cdf);});case 25:_context.next=27;return onSnapshot(doc(db,\"agents\",\"commission\"),function(doc){setTableFrais(doc.data().cdf);});case 27:_context.next=29;return onSnapshot(doc(db,\"muungano\",\"upgrade\"),function(doc){setTableUpgrade(doc.data().cdf);});case 29:_context.next=34;break;case 31:_context.prev=31;_context.t0=_context[\"catch\"](18);window.console.log('Erreur disponible');case 34:case\"end\":return _context.stop();}}},_callee,null,[[18,31]]);})),[]);var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var sendUser,getUser,arrayAgent,arrayUpgrade,arrayClient,_arrayUpgrade,arrayAdmin,_arrayAgent,_arrayUpgrade2,_arrayClient,_arrayUpgrade3,arrayFrais,_arrayAdmin;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Checked if value code is length valid\nif(data.code.length!=6||pin!=data.code){setOpen(true);reset();}else{sendUser=first.toLowerCase()+' '+last.toLowerCase();getUser=getfirst.toLowerCase()+' '+getlast.toLowerCase();if(state==\"agent\"&&getstate==\"agent\"){hashTrue=false;prixHash=solde;arrayAgent=tableAgent;arrayUpgrade=tableUpgrade;arrayAgent[nowField]=Number(tableAgent[nowField])+solde;arrayUpgrade[nowField]=Number(tableUpgrade[nowField])+solde;swapInWithDocsAgent(phoneX,sendPhone,sendUser,getUser,solde,Unite,arrayAgent,arrayUpgrade);navigation('/send-success-blocked');}else if(state==\"client\"&&getstate==\"client\"){hashTrue=true;prixHash=money;arrayClient=tableClient;_arrayUpgrade=tableUpgrade;arrayAdmin=tableAdmin;arrayClient[nowField]=Number(tableClient[nowField])+Math.floor(Number(money));_arrayUpgrade[nowField]=Number(tableUpgrade[nowField])+Math.floor(Number(money));arrayAdmin[nowField]=Number(tableAdmin[nowField])+Math.floor(Number(frais));isSwapInWithClientToClient(phoneX,sendPhone,sendUser,getUser,solde,money,Unite,arrayClient,_arrayUpgrade,arrayAdmin);navigation('/send-success-blocked');}else{if(state==\"agent\"){hashTrue=false;prixHash=solde;_arrayAgent=tableAgent;_arrayUpgrade2=tableUpgrade;_arrayAgent[nowField]=Number(tableAgent[nowField])+solde;_arrayUpgrade2[nowField]=Number(tableUpgrade[nowField])+solde;swapInWithDocsAgentToClient(phoneX,sendPhone,sendUser,getUser,solde,Unite,_arrayAgent,_arrayUpgrade2);navigation('/send-success-blocked');}else{hashTrue=true;prixHash=money;_arrayClient=tableClient;_arrayUpgrade3=tableUpgrade;arrayFrais=tableFrais;_arrayAdmin=tableAdmin;_arrayClient[nowField]=Number(tableClient[nowField])+Math.floor(Number(money));_arrayUpgrade3[nowField]=Number(tableUpgrade[nowField])+Math.floor(Number(money));_arrayAdmin[nowField]=Number(tableAdmin[nowField])+Math.floor(Number(frais)*70/100);arrayFrais[nowField]=Number(tableFrais[nowField])+Math.floor(Number(frais)*30/100);isSwapInWithClientToAgent(phoneX,sendPhone,sendUser,getUser,solde,money,Unite,_arrayClient,_arrayUpgrade3,arrayFrais,_arrayAdmin);navigation('/send-success-blocked');}}}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",name:\"code\"},register('code',{required:true}))),/*#__PURE__*/_jsxs(Dialog,{fullWidth:fullWidth,maxWidth:maxWidth,open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"MuunganoMoney\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"Code d'acc\\xE8s refus\\xE9. Veuillez v\\xE9rifier\"})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Fermer\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Btn\",children:\"Valider\"})]});};function swapInWithDocsAgent(_x2,_x3,_x4,_x5,_x6,_x7,_x8,_x9){return _swapInWithDocsAgent.apply(this,arguments);}function _swapInWithDocsAgent(){_swapInWithDocsAgent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(sendPhone,getPhone,sendUser,getUser,prix,unite,arrayAgentMoney,upgrade){var sendRef,getRef,agentsemoneyRef,upgradeRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:sendRef=doc(db,\"agent\",sendPhone);_context3.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:prix,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"agent\",getPhone);_context3.next=6;return updateDoc(getRef,{thriftcdf:increment(prix),money:prix,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format()});case 6:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context3.next=9;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 9:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context3.next=12;return updateDoc(upgradeRef,{cdf:upgrade});case 12:case\"end\":return _context3.stop();}}},_callee3);}));return _swapInWithDocsAgent.apply(this,arguments);};function swapInWithDocsAgentToClient(_x10,_x11,_x12,_x13,_x14,_x15,_x16,_x17){return _swapInWithDocsAgentToClient.apply(this,arguments);}function _swapInWithDocsAgentToClient(){_swapInWithDocsAgentToClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(sendPhone,getPhone,sendUser,getUser,prix,unite,arrayAgentMoney,upgrade){var sendRef,getRef,agentsemoneyRef,upgradeRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:sendRef=doc(db,\"agent\",sendPhone);_context4.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:prix,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"client\",getPhone);_context4.next=6;return updateDoc(getRef,{thriftcdf:increment(prix),money:prix,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format()});case 6:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context4.next=9;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 9:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context4.next=12;return updateDoc(upgradeRef,{cdf:upgrade});case 12:case\"end\":return _context4.stop();}}},_callee4);}));return _swapInWithDocsAgentToClient.apply(this,arguments);};function isSwapInWithClientToAgent(_x18,_x19,_x20,_x21,_x22,_x23,_x24,_x25,_x26,_x27,_x28){return _isSwapInWithClientToAgent.apply(this,arguments);}function _isSwapInWithClientToAgent(){_isSwapInWithClientToAgent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(sendPhone,getPhone,sendUser,getUser,prix,money,unite,arrayAgentMoney,upgrade,agentFrais,adminFrais){var _updateDoc;var sendRef,getRef,adminRef,agentsemoneyRef,upgradeRef,agentFraisRef,fraisRef;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sendRef=doc(db,\"client\",sendPhone);_context5.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:money,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"agent\",getPhone);_context5.next=6;return updateDoc(getRef,(_updateDoc={thriftcdf:increment(money),money:money,user:sendUser,unite:unite},_defineProperty(_updateDoc,\"thriftcdf\",increment(Math.floor(Number(frais*30/100)))),_defineProperty(_updateDoc,\"phoneclient\",sendPhone),_defineProperty(_updateDoc,\"delay\",moment().format()),_updateDoc));case 6:adminRef=doc(db,\"muunganomoney\",\"money\");_context5.next=9;return updateDoc(adminRef,{cdf:increment(Math.floor(Number(frais*70/100)))});case 9:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context5.next=12;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 12:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context5.next=15;return updateDoc(upgradeRef,{cdf:upgrade});case 15:agentFraisRef=doc(db,\"agents\",\"commission\");_context5.next=18;return updateDoc(agentFraisRef,{cdf:agentFrais});case 18:fraisRef=doc(db,\"muungano\",\"commission\");_context5.next=21;return updateDoc(fraisRef,{cdf:adminFrais});case 21:case\"end\":return _context5.stop();}}},_callee5);}));return _isSwapInWithClientToAgent.apply(this,arguments);};function isSwapInWithClientToClient(_x29,_x30,_x31,_x32,_x33,_x34,_x35,_x36,_x37,_x38){return _isSwapInWithClientToClient.apply(this,arguments);}function _isSwapInWithClientToClient(){_isSwapInWithClientToClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(sendPhone,getPhone,sendUser,getUser,prix,money,unite,arrayAgentMoney,upgrade,adminFrais){var sendRef,getRef,adminRef,agentsemoneyRef,upgradeRef,fraisRef;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:sendRef=doc(db,\"client\",sendPhone);_context6.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:money,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"client\",getPhone);_context6.next=6;return updateDoc(getRef,{thriftcdf:increment(money),money:money,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format()});case 6:adminRef=doc(db,\"muunganomoney\",\"money\");_context6.next=9;return updateDoc(adminRef,{cdf:increment(Math.floor(Number(frais)))});case 9:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context6.next=12;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 12:upgradeRef=doc(db,\"muungano\",\"upgrade\");_context6.next=15;return updateDoc(upgradeRef,{cdf:upgrade});case 15:fraisRef=doc(db,\"muungano\",\"commission\");_context6.next=18;return updateDoc(fraisRef,{cdf:adminFrais});case 18:case\"end\":return _context6.stop();}}},_callee6);}));return _isSwapInWithClientToClient.apply(this,arguments);};","map":{"version":3,"sources":["/Users/USER/Desktop/MuunganoMoney/src/Pin/Fc/Blocked/Input.js"],"names":["React","Media","useForm","useNavigate","doc","getDocs","collection","getDoc","updateDoc","increment","onSnapshot","db","phoneX","sendPhone","frais","Unite","solde","money","Button","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","moment","nowField","date","prixHash","hashTrue","ReturnInput","small","medium","large","matches","SreenLarge","ScreenSmall","FormInput","pushDocs","Array","verifierSend","verifierGet","navigation","register","handleSubmit","reset","useState","tableClient","setTableClient","tableAgent","setTableAgent","tableUpgrade","setTableUpgrade","tableAdmin","setTableAdmin","tableFrais","setTableFrais","pin","setPin","state","setState","first","setFirst","last","setLast","getstate","setGetstate","getfirst","setGetFirst","getlast","setGetLast","open","setOpen","fullWidth","setFullWidth","maxWidth","setMaxWidth","handleClickOpen","handleClose","useEffect","querySnapshot","forEach","push","id","some","value","sendRef","sendSnap","exists","data","code","firstname","lastname","getRef","getSnap","cdf","window","console","log","onSubmit","length","sendUser","toLowerCase","getUser","arrayAgent","arrayUpgrade","Number","swapInWithDocsAgent","arrayClient","arrayAdmin","Math","floor","isSwapInWithClientToClient","swapInWithDocsAgentToClient","arrayFrais","isSwapInWithClientToAgent","required","getPhone","prix","unite","arrayAgentMoney","upgrade","user","phoneclient","delay","format","thriftcdf","agentsemoneyRef","upgradeRef","agentFrais","adminFrais","adminRef","agentFraisRef","fraisRef"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Input.css';\nimport Media from 'react-media';\nimport { useForm } from 'react-hook-form';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, getDocs, collection, getDoc, updateDoc, increment, onSnapshot } from \"firebase/firestore\";\nimport { db } from '../../../firebase';\n\nimport { phoneX } from '../../../Sign/Input';\nimport { sendPhone } from '../../../ValidExFran/Input';\nimport { frais, Unite, solde, money } from '../../../FC/Input';\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\n\nimport moment from 'moment';\nexport let nowField = (moment().date()) - 1;\n\nexport let prixHash = 0;\nexport let hashTrue = true;\n\n// Input Field Component \nexport default function ReturnInput() {\n return (\n  <Media\n   queries={{\n    small: '(max-width: 599px)',\n    medium: '(min-width: 600px) and (max-width:1199px)',\n    large: '(min-width: 1200px)',\n   }}>\n   {matches => (\n    <>\n     {matches.small && <ScreenSmall />}\n     {matches.medium && <SreenLarge />}\n     {matches.large && <SreenLarge />}\n    </>\n   )}\n  </Media>\n );\n};\nexport const SreenLarge = () => (\n <div className='wrp-input-send-money'>\n  <FormInput />\n\n </div>\n);\nexport const ScreenSmall = () => (\n <div className='wrp-input-send-money-sm'>\n  <FormInput />\n </div>\n);\n\nexport const FormInput = () => {\n\n let pushDocs = new Array();\n let verifierSend;\n let verifierGet;\n\n const navigation = useNavigate();\n const { register, handleSubmit, reset } = useForm();\n\n //  order notebook\n const [tableClient, setTableClient] = React.useState();\n const [tableAgent, setTableAgent] = React.useState();\n const [tableUpgrade, setTableUpgrade] = React.useState();\n const [tableAdmin, setTableAdmin] = React.useState();\n const [tableFrais, setTableFrais] = React.useState();\n\n\n // send React useState  \n const [pin, setPin] = React.useState(null);\n const [state, setState] = React.useState(null);\n const [first, setFirst] = React.useState('');\n const [last, setLast] = React.useState('');\n\n // getting React useState\n const [getstate, setGetstate] = React.useState(null);\n const [getfirst, setGetFirst] = React.useState('');\n const [getlast, setGetLast] = React.useState('');\n\n\n const [open, setOpen] = React.useState(false);\n const [fullWidth, setFullWidth] = React.useState(true);\n const [maxWidth, setMaxWidth] = React.useState('sm');\n\n const handleClickOpen = () => {\n  setOpen(true);\n };\n const handleClose = () => {\n  setOpen(false);\n };\n\n\n React.useEffect(async () => {\n\n  const querySnapshot = await getDocs(collection(db, \"client\"));\n  querySnapshot.forEach((doc) => {\n   pushDocs.push(doc.id);\n  });\n\n  verifierSend = pushDocs.some(value => value == phoneX);\n  verifierGet = pushDocs.some(value => value == sendPhone);\n\n  const sendRef = doc(db, verifierSend ? \"client\" : \"agent\", phoneX);\n  const sendSnap = await getDoc(sendRef);\n\n  if (sendSnap.exists()) {\n   setPin(sendSnap.data().code);\n   setState(sendSnap.data().state);\n   setFirst(sendSnap.data().firstname);\n   setLast(sendSnap.data().lastname);\n  };\n\n  const getRef = doc(db, verifierGet ? \"client\" : \"agent\", sendPhone);\n  const getSnap = await getDoc(getRef);\n\n  if (getSnap.exists()) {\n   setGetstate(getSnap.data().state);\n   setGetFirst(getSnap.data().firstname);\n   setGetLast(getSnap.data().lastname);\n  };\n\n  try {\n   await onSnapshot(doc(db, \"clients\", \"emoney\"), (doc) => {\n    setTableClient(doc.data().cdf);\n   });\n\n   await onSnapshot(doc(db, \"agents\", \"emoney\"), (doc) => {\n    setTableAgent(doc.data().cdf);\n   });\n\n   await onSnapshot(doc(db, \"muungano\", \"commission\"), (doc) => {\n    setTableAdmin(doc.data().cdf);\n   });\n\n   await onSnapshot(doc(db, \"agents\", \"commission\"), (doc) => {\n    setTableFrais(doc.data().cdf);\n   });\n\n   await onSnapshot(doc(db, \"muungano\", \"upgrade\"), (doc) => {\n    setTableUpgrade(doc.data().cdf);\n   });\n\n  } catch {\n   window.console.log('Erreur disponible');\n  }\n\n }, []);\n\n const onSubmit = async (data) => {\n\n  // Checked if value code is length valid\n  if (data.code.length != 6 || pin != data.code) {\n   setOpen(true);\n   reset();\n  } else {\n\n   const sendUser = first.toLowerCase() + ' ' + last.toLowerCase();\n   const getUser = getfirst.toLowerCase() + ' ' + getlast.toLowerCase();\n\n   if (state == \"agent\" && getstate == \"agent\") {\n\n    hashTrue = false;\n    prixHash = solde;\n\n    let arrayAgent = tableAgent;\n    let arrayUpgrade = tableUpgrade;\n\n    arrayAgent[nowField] = Number(tableAgent[nowField]) + solde;\n    arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + solde;\n\n    swapInWithDocsAgent(phoneX, sendPhone, sendUser, getUser, solde, Unite, arrayAgent, arrayUpgrade);\n    navigation('/send-success-blocked');\n\n   } else if (state == \"client\" && getstate == \"client\") {\n\n    hashTrue = true;\n    prixHash = money;\n\n    let arrayClient = tableClient;\n    let arrayUpgrade = tableUpgrade;\n    let arrayAdmin = tableAdmin;\n\n\n    arrayClient[nowField] = Number(tableClient[nowField]) + Math.floor(Number(money));\n    arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + Math.floor(Number(money));\n    arrayAdmin[nowField] = Number(tableAdmin[nowField]) + Math.floor(Number(frais));\n    isSwapInWithClientToClient(phoneX, sendPhone, sendUser, getUser, solde, money, Unite, arrayClient, arrayUpgrade, arrayAdmin);\n\n\n    navigation('/send-success-blocked');\n\n   } else {\n\n    if (state == \"agent\") {\n\n     hashTrue = false;\n     prixHash = solde;\n\n     let arrayAgent = tableAgent;\n     let arrayUpgrade = tableUpgrade;\n\n     arrayAgent[nowField] = Number(tableAgent[nowField]) + solde;\n     arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + solde;\n\n     swapInWithDocsAgentToClient(phoneX, sendPhone, sendUser, getUser, solde, Unite, arrayAgent, arrayUpgrade);\n     navigation('/send-success-blocked');\n\n    } else {\n\n     hashTrue = true;\n     prixHash = money;\n\n     let arrayClient = tableClient;\n     let arrayUpgrade = tableUpgrade;\n     let arrayFrais = tableFrais;\n     let arrayAdmin = tableAdmin;\n\n     arrayClient[nowField] = Number(tableClient[nowField]) + Math.floor(Number(money));\n     arrayUpgrade[nowField] = Number(tableUpgrade[nowField]) + Math.floor(Number(money));\n     arrayAdmin[nowField] = Number(tableAdmin[nowField]) + Math.floor(Number(frais) * 70 / 100);\n     arrayFrais[nowField] = Number(tableFrais[nowField]) + Math.floor(Number(frais) * 30 / 100);\n\n     isSwapInWithClientToAgent(phoneX, sendPhone, sendUser, getUser, solde, money, Unite, arrayClient, arrayUpgrade, arrayFrais, arrayAdmin);\n\n\n     navigation('/send-success-blocked');\n\n    }\n\n   }\n\n  }\n };\n\n return (\n  <form onSubmit={handleSubmit(onSubmit)}>\n   <input type='password'\n    placeholder='•••••••'\n    name='code' {...register('code', { required: true })}\n   />\n\n   <Dialog\n    fullWidth={fullWidth}\n    maxWidth={maxWidth}\n    open={open}\n    onClose={handleClose}\n   >\n    <DialogTitle>MuunganoMoney</DialogTitle>\n    <DialogContent>\n\n     <DialogContentText>\n      Code d'accès refusé. Veuillez vérifier\n     </DialogContentText>\n\n    </DialogContent>\n    <DialogActions>\n     <Button onClick={handleClose}>Fermer</Button>\n    </DialogActions>\n   </Dialog>\n\n   <button className='Btn'>Valider</button>\n  </form>\n )\n};\n\n\nasync function swapInWithDocsAgent(sendPhone, getPhone, sendUser, getUser, prix, unite, arrayAgentMoney, upgrade) {\n\n const sendRef = doc(db, \"agent\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: prix,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"agent\", getPhone);\n await updateDoc(getRef, {\n  thriftcdf: increment(prix),\n  money: prix,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  cdf: upgrade,\n });\n\n};\nasync function swapInWithDocsAgentToClient(sendPhone, getPhone, sendUser, getUser, prix, unite, arrayAgentMoney, upgrade) {\n\n const sendRef = doc(db, \"agent\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: prix,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"client\", getPhone);\n await updateDoc(getRef, {\n  thriftcdf: increment(prix),\n  money: prix,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  cdf: upgrade,\n });\n\n};\nasync function isSwapInWithClientToAgent(sendPhone, getPhone, sendUser, getUser, prix, money, unite, arrayAgentMoney, upgrade, agentFrais, adminFrais) {\n\n const sendRef = doc(db, \"client\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: money,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"agent\", getPhone);\n await updateDoc(getRef, {\n  thriftcdf: increment(money),\n  money: money,\n  user: sendUser,\n  unite: unite,\n  thriftcdf: increment(Math.floor(Number(frais * 30 / 100))),\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n const adminRef = doc(db, \"muunganomoney\", \"money\");\n await updateDoc(adminRef, {\n  cdf: increment(Math.floor(Number(frais * 70 / 100)))\n });\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  cdf: upgrade,\n });\n\n const agentFraisRef = doc(db, \"agents\", \"commission\");\n await updateDoc(agentFraisRef, {\n  cdf: agentFrais,\n });\n\n const fraisRef = doc(db, \"muungano\", \"commission\");\n await updateDoc(fraisRef, {\n  cdf: adminFrais,\n });\n\n\n};\nasync function isSwapInWithClientToClient(sendPhone, getPhone, sendUser, getUser, prix, money, unite, arrayAgentMoney, upgrade, adminFrais) {\n\n const sendRef = doc(db, \"client\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: money,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"client\", getPhone);\n await updateDoc(getRef, {\n  thriftcdf: increment(money),\n  money: money,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n const adminRef = doc(db, \"muunganomoney\", \"money\");\n await updateDoc(adminRef, {\n  cdf: increment(Math.floor(Number(frais)))\n });\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n const upgradeRef = doc(db, \"muungano\", \"upgrade\");\n await updateDoc(upgradeRef, {\n  cdf: upgrade,\n });\n\n const fraisRef = doc(db, \"muungano\", \"commission\");\n await updateDoc(fraisRef, {\n  cdf: adminFrais,\n });\n\n};\n"]},"metadata":{},"sourceType":"module"}