{"ast":null,"code":"import _objectSpread from\"/Users/USER/Desktop/Agent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/USER/Desktop/Agent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/USER/Desktop/Agent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/USER/Desktop/Agent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'./Input.css';import{useForm}from'react-hook-form';import Media from'react-media';import{useNavigate}from'react-router-dom';import{phoneX}from'../Phone/Input';import{doc,getDoc,updateDoc,serverTimestamp}from\"firebase/firestore\";import{db}from'../../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var prixSuccess=0;// withdraw input\nexport default function ReturnWithdrAwInput(){return/*#__PURE__*/_jsx(Media,{queries:{small:'(max-width: 599px)',medium:'(min-width: 600px) and (max-width:1199px)',large:'(min-width: 1200px)'},children:function children(matches){return/*#__PURE__*/_jsxs(_Fragment,{children:[matches.small&&/*#__PURE__*/_jsx(ScreenSmall,{}),matches.medium&&/*#__PURE__*/_jsx(ScreenLarge,{}),matches.large&&/*#__PURE__*/_jsx(ScreenLarge,{})]});}});};export var ScreenLarge=function ScreenLarge(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-withdraw-input\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var ScreenSmall=function ScreenSmall(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-withdraw-input-sm\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var FormInput=function FormInput(){var newSolde=0;var navigation=useNavigate();var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register,reset=_useForm.reset;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),getPin=_React$useState2[0],setGetPin=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),getUsd=_React$useState4[0],setGetUsd=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),user=_React$useState6[0],setUser=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),getUsdAdmin=_React$useState8[0],setGetUsdAdmin=_React$useState8[1];var _React$useState9=React.useState(0),_React$useState10=_slicedToArray(_React$useState9,2),actif=_React$useState10[0],setActif=_React$useState10[1];React.useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var docRefPin,docSnap,agentRef,agentSnap;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:docRefPin=doc(db,\"ungama\",\"money\");_context.next=3;return getDoc(docRefPin);case 3:docSnap=_context.sent;if(docSnap.exists()){setGetPin(docSnap.data().pin);setGetUsdAdmin(docSnap.data().usd);setActif(docSnap.data().allusd);};agentRef=doc(db,\"agent\",phoneX);_context.next=9;return getDoc(agentRef);case 9:agentSnap=_context.sent;if(agentSnap.exists()){setGetUsd(Number(agentSnap.data().usd));setUser(agentSnap.data().firstname);}case 11:case\"end\":return _context.stop();}}},_callee);})),[]);var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var newActif;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(getPin==data.code&&data.code.length==6){if(data.count>2500){window.alert(\"La valeur est superieur \\xE0 200000\");reset();}else{addSoldeAgent(phoneX,Number(getUsd)+Number(data.count),data.count);newSolde=Number(getUsdAdmin)-Number(data.count);newActif=Number(actif)+Number(data.count);updateSolde(data.count,newSolde,newActif,user);prixSuccess=data.count;navigation('/send/success-usd');}}else{prixSuccess=data.count;window.alert(\"Erreur de code d'acc\\xE8s invalide\");reset();}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:'text'},register('count',{required:true})),{},{name:\"count\",placeholder:'USD'})),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:'text'},register('code',{required:true})),{},{name:\"code\",placeholder:'••••••'})),/*#__PURE__*/_jsx(\"button\",{className:\"Btn\",children:\"Envoyer\"})]});};// get money client\nexport var updateSolde=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(solde,newSolde,actif,userClient){var washingtonRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:washingtonRef=doc(db,\"ungama\",\"money\");// Set the \"capital\" field of the city 'DC'\n_context3.next=3;return updateDoc(washingtonRef,{usd:Math.floor(newSolde),allusd:Math.floor(actif),money:Math.floor(Number(solde)),user:userClient,delay:serverTimestamp(),unite:'USD'});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function updateSolde(_x2,_x3,_x4,_x5){return _ref3.apply(this,arguments);};}();export var addSoldeAgent=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(numPhoneInDocs,money,solde){var washingtonRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:washingtonRef=doc(db,\"agent\",numPhoneInDocs);// Set the \"capital\" field of the city 'DC'\n_context4.next=3;return updateDoc(washingtonRef,{usd:Math.floor(money),money:Math.floor(solde),unite:'usd',delay:serverTimestamp()});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function addSoldeAgent(_x6,_x7,_x8){return _ref4.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/USER/Desktop/Agent/src/Send/USD/Input.js"],"names":["React","useForm","Media","useNavigate","phoneX","doc","getDoc","updateDoc","serverTimestamp","db","prixSuccess","ReturnWithdrAwInput","small","medium","large","matches","ScreenLarge","ScreenSmall","FormInput","newSolde","navigation","handleSubmit","register","reset","useState","getPin","setGetPin","getUsd","setGetUsd","user","setUser","getUsdAdmin","setGetUsdAdmin","actif","setActif","useEffect","docRefPin","docSnap","exists","data","pin","usd","allusd","agentRef","agentSnap","Number","firstname","onSubmit","code","length","count","window","alert","addSoldeAgent","newActif","updateSolde","required","solde","userClient","washingtonRef","Math","floor","money","delay","unite","numPhoneInDocs"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport './Input.css';\nimport { useForm } from 'react-hook-form';\nimport Media from 'react-media';\nimport { useNavigate } from 'react-router-dom';\nimport { phoneX } from '../Phone/Input';\nimport { doc, getDoc, updateDoc, serverTimestamp } from \"firebase/firestore\";\n\nimport { db } from '../../firebase';\n\nexport let prixSuccess = 0;\n\n// withdraw input\nexport default function ReturnWithdrAwInput() {\n return (\n  <Media\n   queries={{\n    small: '(max-width: 599px)',\n    medium: '(min-width: 600px) and (max-width:1199px)',\n    large: '(min-width: 1200px)',\n   }}>\n   {matches => (\n    <>\n     {matches.small && <ScreenSmall />}\n     {matches.medium && <ScreenLarge />}\n     {matches.large && <ScreenLarge />}\n    </>\n   )}\n  </Media>\n );\n};\n\nexport const ScreenLarge = () => (\n <div className='wrp-withdraw-input'>\n  <FormInput />\n </div>\n);\nexport const ScreenSmall = () => (\n <div className='wrp-withdraw-input-sm'>\n  <FormInput />\n </div>\n);\nexport const FormInput = () => {\n\n let newSolde = 0;\n\n const navigation = useNavigate();\n const { handleSubmit, register, reset } = useForm();\n\n const [getPin, setGetPin] = React.useState('');\n const [getUsd, setGetUsd] = React.useState(null);\n const [user, setUser] = React.useState(null);\n const [getUsdAdmin, setGetUsdAdmin] = React.useState(0);\n const [actif, setActif] = React.useState(0);\n\n\n React.useEffect(async () => {\n\n  const docRefPin = doc(db, \"ungama\", \"money\");\n  const docSnap = await getDoc(docRefPin);\n\n  if (docSnap.exists()) {\n   setGetPin(docSnap.data().pin);\n   setGetUsdAdmin(docSnap.data().usd);\n   setActif(docSnap.data().allusd);\n  };\n\n  const agentRef = doc(db, \"agent\", phoneX);\n  const agentSnap = await getDoc(agentRef);\n\n  if (agentSnap.exists()) {\n   setGetUsd(Number(agentSnap.data().usd));\n   setUser(agentSnap.data().firstname);\n  }\n\n }, []);\n\n\n const onSubmit = async (data) => {\n\n  if (getPin == data.code && data.code.length == 6) {\n\n   if (data.count > 2500) {\n    window.alert(`La valeur est superieur à 200000`);\n    reset();\n\n   } else {\n\n    addSoldeAgent(phoneX, Number(getUsd) + Number(data.count), data.count);\n\n    newSolde = Number(getUsdAdmin) - Number(data.count);\n    let newActif = Number(actif) + Number(data.count);\n    updateSolde(data.count, newSolde, newActif, user);\n\n    prixSuccess = data.count;\n    navigation('/send/success-usd');\n   }\n\n  } else {\n   prixSuccess = data.count;\n   window.alert(`Erreur de code d'accès invalide`)\n   reset();\n  }\n\n };\n\n return (\n  <form onSubmit={handleSubmit(onSubmit)}>\n\n   <input type={'text'}\n    {...register('count', { required: true })}\n    name=\"count\"\n    placeholder={'USD'}\n   />\n   <input type={'text'}\n    {...register('code', { required: true })}\n    name=\"code\"\n    placeholder={'••••••'}\n   />\n\n   <button className='Btn'>Envoyer</button>\n  </form>\n );\n};\n\n// get money client\nexport const updateSolde = async (solde, newSolde, actif, userClient) => {\n\n const washingtonRef = doc(db, \"ungama\", \"money\");\n\n // Set the \"capital\" field of the city 'DC'\n await updateDoc(washingtonRef, {\n  usd: Math.floor(newSolde),\n  allusd: Math.floor(actif),\n  money: Math.floor(Number(solde)),\n  user: userClient,\n  delay: serverTimestamp(),\n  unite: 'USD'\n });\n\n};\n\nexport const addSoldeAgent = async (numPhoneInDocs, money, solde) => {\n\n const washingtonRef = doc(db, \"agent\", numPhoneInDocs);\n // Set the \"capital\" field of the city 'DC'\n await updateDoc(washingtonRef, {\n  usd: Math.floor(money),\n  money: Math.floor(solde),\n  unite: 'usd',\n  delay: serverTimestamp(),\n });\n};"]},"metadata":{},"sourceType":"module"}