{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Documents/Money/src/Wallet/Home/Slide2/Btn.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Btn.css';\nimport Media from 'react-media';\nimport { doc, onSnapshot, getDocs, collection, updateDoc, increment } from \"firebase/firestore\";\nimport { db } from '../../../firebase';\nimport moment from 'moment';\nimport Box from '@mui/material/Box';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { green } from '@mui/material/colors';\nimport Button from '@mui/material/Button';\nimport Fab from '@mui/material/Fab';\nimport CheckIcon from '@mui/icons-material/Check'; // import SaveIcon from '@mui/icons-material/Save';\n\nimport { CiUnlock } from 'react-icons/ci';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport let exchAnge = 0; // Export view \n\nlet pushDocs = new Array();\nlet verifierCollection; // Return Phone input component\n\nexport default function REturnCurrenT() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Media, {\n      queries: {\n        small: '(max-width: 599px)',\n        medium: '(min-width: 600px) and (max-width:1199px)',\n        large: '(min-width: 1200px)'\n      },\n      children: matches => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [matches.small && /*#__PURE__*/_jsxDEV(ScreenSmall, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 25\n        }, this), matches.medium && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 26\n        }, this), matches.large && /*#__PURE__*/_jsxDEV(ScreenLarge, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n}\n_c = REturnCurrenT;\n;\nexport const ScreenLarge = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrp-frais-current\",\n    children: /*#__PURE__*/_jsxDEV(FormInputValue, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 3\n  }, this);\n};\n_c2 = ScreenLarge;\nexport const ScreenSmall = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrp-frais-current-sm\",\n    children: /*#__PURE__*/_jsxDEV(FormInputValue, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 3\n  }, this);\n};\n_c3 = ScreenSmall;\nexport const FormInputValue = () => {\n  _s();\n\n  const [cdf, setCdf] = React.useState(null);\n  const [usd, setUsd] = React.useState(null);\n  const [open, setOpen] = React.useState(false);\n  const [add, setAdd] = React.useState(false);\n  const [fullWidth, setFullWidth] = React.useState(true);\n  const [maxWidth, setMaxWidth] = React.useState('sm');\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleAdd = () => {\n    setAdd(false);\n  };\n\n  const [loading, setLoading] = React.useState(false);\n  const [success, setSuccess] = React.useState(false);\n  const timer = React.useRef();\n  const buttonSx = { ...(success && {\n      bgcolor: green[500],\n      '&:hover': {\n        bgcolor: green[700]\n      }\n    })\n  };\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(timer.current);\n    };\n  }, []);\n\n  const handleButtonClick = () => {\n    if (!loading) {\n      setSuccess(false);\n      setLoading(true);\n      timer.current = window.setTimeout(() => {\n        setSuccess(true);\n        setLoading(false);\n      }, 2000);\n    }\n  };\n\n  React.useEffect(async () => {\n    const querySnapshot = await getDocs(collection(db, \"client\"));\n    querySnapshot.forEach(doc => {\n      pushDocs.push(doc.id);\n    });\n    verifierCollection = pushDocs.includes(JSON.parse(window.localStorage.getItem('USER')));\n\n    try {\n      const unsub = onSnapshot(doc(db, verifierCollection ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n        setCdf(doc.data().thriftcdf);\n        setUsd(doc.data().thriftusd);\n      });\n    } catch {\n      window.console.log('error');\n    }\n  }, []);\n\n  const handleIncrementMoney = event => {\n    event.preventDefault();\n\n    if (cdf > 0 || usd > 0) {\n      window.setTimeout(() => {\n        setAdd(true);\n        incrementThrift(cdf, usd, verifierCollection);\n        depreciateThrift(verifierCollection);\n      }, 3000);\n    } else {\n      setOpen(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [moment().date() <= 3 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: handleIncrementMoney,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          m: 1,\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Fab, {\n          \"aria-label\": \"save\",\n          color: \"primary\",\n          sx: buttonSx,\n          onClick: handleButtonClick,\n          children: success ? /*#__PURE__*/_jsxDEV(CheckIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(CiUnlock, {\n            size: '3em'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 7\n        }, this), loading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 68,\n          sx: {\n            color: green[500],\n            position: 'absolute',\n            top: -6,\n            left: -6,\n            zIndex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      fullWidth: fullWidth,\n      maxWidth: maxWidth,\n      open: open,\n      onClose: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"pop-up\",\n          children: \"MuunganoMoney\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pop-up\",\n            children: \"D\\xE9sol\\xE9 solde insuffisant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          children: \"Fermer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      fullWidth: fullWidth,\n      maxWidth: maxWidth,\n      open: add,\n      onClose: handleAdd,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"pop-up\",\n          children: \"MuunganoMoney\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"pop-up\",\n            children: \"Le solde principal vient d'\\xEAtre augment\\xE9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleAdd,\n          children: \"Fermer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(FormInputValue, \"LPqWTt0dxbGlJruCVSMsu7rPpsw=\");\n\n_c4 = FormInputValue;\n\nasync function incrementThrift(prixCdf, prixUsd, collections) {\n  const washingtonRef = doc(db, collections ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    cdf: increment(prixCdf),\n    usd: increment(prixUsd)\n  });\n}\n\nasync function depreciateThrift(collections) {\n  const washingtonRef = doc(db, collections ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    thriftcdf: 0,\n    thriftusd: 0\n  });\n}\n\n;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"REturnCurrenT\");\n$RefreshReg$(_c2, \"ScreenLarge\");\n$RefreshReg$(_c3, \"ScreenSmall\");\n$RefreshReg$(_c4, \"FormInputValue\");","map":{"version":3,"sources":["/Users/USER/Documents/Money/src/Wallet/Home/Slide2/Btn.js"],"names":["React","Media","doc","onSnapshot","getDocs","collection","updateDoc","increment","db","moment","Box","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","CircularProgress","green","Button","Fab","CheckIcon","CiUnlock","exchAnge","pushDocs","Array","verifierCollection","REturnCurrenT","small","medium","large","matches","ScreenLarge","ScreenSmall","FormInputValue","cdf","setCdf","useState","usd","setUsd","open","setOpen","add","setAdd","fullWidth","setFullWidth","maxWidth","setMaxWidth","handleClose","handleAdd","loading","setLoading","success","setSuccess","timer","useRef","buttonSx","bgcolor","useEffect","clearTimeout","current","handleButtonClick","window","setTimeout","querySnapshot","forEach","push","id","includes","JSON","parse","localStorage","getItem","unsub","data","thriftcdf","thriftusd","console","log","handleIncrementMoney","event","preventDefault","incrementThrift","depreciateThrift","date","m","position","color","top","left","zIndex","prixCdf","prixUsd","collections","washingtonRef"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Btn.css';\nimport Media from 'react-media';\nimport { doc, onSnapshot, getDocs, collection, updateDoc, increment } from \"firebase/firestore\";\nimport { db } from '../../../firebase';\nimport moment from 'moment';\n\nimport Box from '@mui/material/Box';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\n\n\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { green } from '@mui/material/colors';\nimport Button from '@mui/material/Button';\nimport Fab from '@mui/material/Fab';\nimport CheckIcon from '@mui/icons-material/Check';\n// import SaveIcon from '@mui/icons-material/Save';\n\nimport { CiUnlock } from 'react-icons/ci';\n\nexport let exchAnge = 0; // Export view \nlet pushDocs = new Array();\nlet verifierCollection;\n\n\n// Return Phone input component\nexport default function REturnCurrenT() {\n return (\n  <>\n   <Media\n    queries={{\n     small: '(max-width: 599px)',\n     medium: '(min-width: 600px) and (max-width:1199px)',\n     large: '(min-width: 1200px)',\n    }}>\n    {matches => (\n     <>\n      {matches.small && <ScreenSmall />}\n      {matches.medium && <ScreenLarge />}\n      {matches.large && <ScreenLarge />}\n     </>\n    )}\n   </Media>\n  </>\n );\n};\n\nexport const ScreenLarge = () => {\n return (\n  <div className='wrp-frais-current'>\n   <FormInputValue />\n  </div>\n );\n};\nexport const ScreenSmall = () => {\n return (\n  <div className='wrp-frais-current-sm'>\n   <FormInputValue />\n  </div>\n )\n};\nexport const FormInputValue = () => {\n\n const [cdf, setCdf] = React.useState(null);\n const [usd, setUsd] = React.useState(null);\n\n const [open, setOpen] = React.useState(false);\n const [add, setAdd] = React.useState(false);\n\n const [fullWidth, setFullWidth] = React.useState(true);\n const [maxWidth, setMaxWidth] = React.useState('sm');\n\n const handleClose = () => {\n  setOpen(false);\n };\n const handleAdd = () => {\n  setAdd(false);\n };\n\n\n const [loading, setLoading] = React.useState(false);\n const [success, setSuccess] = React.useState(false);\n const timer = React.useRef();\n\n const buttonSx = {\n  ...(success && {\n   bgcolor: green[500],\n   '&:hover': {\n    bgcolor: green[700],\n   },\n  }),\n };\n\n\n\n React.useEffect(() => {\n  return () => {\n   clearTimeout(timer.current);\n  };\n }, []);\n\n const handleButtonClick = () => {\n  if (!loading) {\n   setSuccess(false);\n   setLoading(true);\n   timer.current = window.setTimeout(() => {\n    setSuccess(true);\n    setLoading(false);\n   }, 2000);\n  }\n };\n\n React.useEffect(async () => {\n\n  const querySnapshot = await getDocs(collection(db, \"client\"));\n  querySnapshot.forEach((doc) => {\n   pushDocs.push(doc.id);\n  });\n\n  verifierCollection = pushDocs.includes(JSON.parse(window.localStorage.getItem('USER')));\n\n  try {\n   const unsub = onSnapshot(doc(db, verifierCollection ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n    setCdf(doc.data().thriftcdf);\n    setUsd(doc.data().thriftusd);\n   });\n  } catch {\n   window.console.log('error');\n  }\n\n }, []);\n\n const handleIncrementMoney = (event) => {\n\n  event.preventDefault();\n\n  if (cdf > 0 || usd > 0) {\n\n   window.setTimeout(() => {\n\n    setAdd(true);\n    incrementThrift(cdf, usd, verifierCollection);\n    depreciateThrift(verifierCollection);\n\n   }, 3000);\n\n  } else {\n   setOpen(true);\n\n  }\n };\n\n return (\n  <>\n   {moment().date() <= 3 ?\n    <div onClick={handleIncrementMoney}>\n\n     <Box sx={{ m: 1, position: 'relative' }}>\n      <Fab\n       aria-label=\"save\"\n       color=\"primary\"\n       sx={buttonSx}\n       onClick={handleButtonClick}\n      >\n       {success ? <CheckIcon /> : <CiUnlock size={'3em'} />}\n      </Fab>\n\n\n      {loading && (\n       <CircularProgress\n        size={68}\n        sx={{\n         color: green[500],\n         position: 'absolute',\n         top: -6,\n         left: -6,\n         zIndex: 1,\n        }}\n       />)}\n\n     </Box>\n\n\n    </div>\n    :\n    <div></div>\n   }\n\n   <Dialog\n    fullWidth={fullWidth}\n    maxWidth={maxWidth}\n    open={open}\n    onClose={handleClose}>\n    <DialogTitle><p className='pop-up'>MuunganoMoney</p></DialogTitle>\n    <DialogContent>\n\n     <DialogContentText>\n      <p className='pop-up'>\n       Désolé solde insuffisant\n     </p>\n     </DialogContentText>\n\n    </DialogContent>\n    <DialogActions>\n     <Button onClick={handleClose}>Fermer</Button>\n    </DialogActions>\n   </Dialog>\n\n   <Dialog\n    fullWidth={fullWidth}\n    maxWidth={maxWidth}\n    open={add}\n    onClose={handleAdd}>\n    <DialogTitle><p className='pop-up'>MuunganoMoney</p></DialogTitle>\n    <DialogContent>\n\n     <DialogContentText>\n      <p className='pop-up'>\n       Le solde principal vient d'être augmenté\n     </p>\n     </DialogContentText>\n\n    </DialogContent>\n    <DialogActions>\n     <Button onClick={handleAdd}>Fermer</Button>\n    </DialogActions>\n   </Dialog>\n\n  </>\n );\n};\n\nasync function incrementThrift(prixCdf, prixUsd, collections) {\n\n const washingtonRef = doc(db, collections ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER')));\n // Set the \"capital\" field of the city 'DC'\n await updateDoc(washingtonRef, {\n  cdf: increment(prixCdf),\n  usd: increment(prixUsd),\n });\n\n}\nasync function depreciateThrift(collections) {\n\n const washingtonRef = doc(db, collections ? \"client\" : \"agent\", JSON.parse(window.localStorage.getItem('USER')));\n // Set the \"capital\" field of the city 'DC'\n await updateDoc(washingtonRef, {\n  thriftcdf: 0,\n  thriftusd: 0,\n });\n\n};\n\n\n"]},"metadata":{},"sourceType":"module"}