{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Documents/Money/src/Pret/Dash/Head/Prix/Btn.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Btn.css';\nimport { doc, onSnapshot, updateDoc } from \"firebase/firestore\";\nimport { db } from '../../../../firebase';\nimport moment from 'moment';\nimport { useNavigate } from 'react-router-dom'; // Btn Component view \n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ReturnBTn() {\n  _s();\n\n  const navigation = useNavigate();\n  const [cdf, setCdf] = React.useState(0.00);\n  const [usd, setUsd] = React.useState(0.00);\n  const [time, setTime] = React.useState(null);\n  const [walletusd, setWalletusd] = React.useState(0.00);\n  const [walletcdf, setWalletcdf] = React.useState(0.00);\n  const [soldecdf, setSoldecdf] = React.useState(0);\n  const [soldeusd, setSoldeusd] = React.useState(0);\n  React.useEffect(async () => {\n    try {\n      await onSnapshot(doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n        setSoldecdf(doc.data().cdf);\n        setSoldeusd(doc.data().usd);\n      });\n    } catch {\n      window.console.log(`Erreur`);\n    }\n  }, []);\n  let moneycdf = new Intl.NumberFormat('en-US').format(soldecdf);\n  let moneyusd = new Intl.NumberFormat('en-US').format(soldeusd);\n  let commacdf = moneycdf.split('.');\n  let commausd = moneyusd.split('.');\n  let franComma = commacdf[1] == undefined ? 0 : commacdf[1];\n  let DollarComma = commausd[1] == undefined ? 0 : commausd[1];\n  let Comma = Number(franComma) + Number(DollarComma);\n  let solde = Number(parseInt(soldecdf)) + Number(parseInt(soldeusd));\n  React.useEffect(async () => {\n    try {\n      await onSnapshot(doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n        setCdf(doc.data().pretcdf);\n        setUsd(doc.data().pretusd);\n        setTime(doc.data().date);\n      });\n    } catch {\n      window.console.log(`Erreur`);\n    }\n  }, []);\n  React.useEffect(async () => {\n    try {\n      await onSnapshot(doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))), doc => {\n        setWalletusd(doc.data().usd);\n        setWalletcdf(doc.data().cdf);\n      });\n    } catch {\n      window.console.log(`Erreur`);\n    }\n  }, []);\n  var now = moment(); //todays date\n\n  let year = moment(time).get('year');\n  let months = moment(time).get('month');\n  let days = moment(time).get('date');\n  var end = moment([year, months, days]); // another date\n\n  var duration = moment.duration(now.diff(end));\n  var day = duration.asDays();\n  let pretCdf = cdf;\n  let modulecdf = 0;\n  let pourcentage = JSON.parse(window.localStorage.getItem('%%pret-*%'));\n\n  for (let index = 0; index <= parseInt(day); index++) {\n    if (index === 0) {\n      continue;\n    } else {\n      modulecdf = pretCdf * pourcentage / 100;\n      pretCdf += modulecdf;\n    }\n  }\n\n  ;\n  let yearusd = moment(time).get('year');\n  let monthsusd = moment(time).get('month');\n  let daysusd = moment(time).get('date');\n  var end = moment([yearusd, monthsusd, daysusd]); // another date\n\n  var duration = moment.duration(now.diff(end));\n  var dayusd = duration.asDays();\n  let pretUsd = usd;\n  let moduleusd = 0;\n\n  for (let index = 0; index <= parseInt(dayusd); index++) {\n    if (index === 0) {\n      continue;\n    } else {\n      moduleusd = pretUsd * pourcentage / 100;\n      pretUsd += moduleusd;\n    }\n  }\n\n  ;\n\n  const handlepathcdf = event => {\n    event.preventDefault();\n    window.localStorage.setItem('&&money::pret__', JSON.stringify(pretCdf));\n    window.localStorage.setItem('&&money::wallet__', JSON.stringify(walletcdf));\n    window.localStorage.setItem('&&money::unite__', JSON.stringify('cdf'));\n    window.localStorage.setItem('^^pret->', JSON.stringify(true));\n\n    if (solde <= 0 && Comma <= 10) {\n      window.localStorage.setItem('^^pret->ok', JSON.stringify(true));\n      asKedpret();\n    } else {\n      window.console.log('continue');\n    } // navigation('/pret/costs/asked/cdf');\n\n\n    window.localStorage.setItem('solde&&%%¢pret', JSON.stringify('/pret/costs/asked/cdf'));\n    navigation('/pret/method');\n  };\n\n  const handlepathusd = event => {\n    event.preventDefault();\n    window.localStorage.setItem('&&money::pret__', JSON.stringify(pretUsd));\n    window.localStorage.setItem('&&money::wallet__', JSON.stringify(walletusd));\n    window.localStorage.setItem('&&money::unite__', JSON.stringify('usd'));\n    window.localStorage.setItem('^^pret->', JSON.stringify(true));\n\n    if (solde <= 0 && Comma <= 10) {\n      window.localStorage.setItem('^^pret->ok', JSON.stringify(true));\n      asKedpret();\n    } else {\n      window.console.log('continue');\n    } // navigation('/pret/costs/asked/usd');\n\n\n    window.localStorage.setItem('solde&&%%¢pret', JSON.stringify('/pret/costs/asked/usd'));\n    navigation('/pret/method');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [usd > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn-pret-asked\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlepathusd,\n        children: \"Rembours\\xE9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }, this), cdf > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn-pret-asked\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlepathcdf,\n        children: \"Rembours\\xE9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ReturnBTn, \"vYa+6EXn33CSfwHd+4pUg3UsCY0=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ReturnBTn;\n; // add pret for client\n\nexport async function asKedpret() {\n  const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))); // Set the \"capital\" field of the city 'DC'\n\n  await updateDoc(washingtonRef, {\n    pret: false,\n    pretactive: false,\n    pretregister: false\n  });\n}\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReturnBTn\");","map":{"version":3,"sources":["/Users/USER/Documents/Money/src/Pret/Dash/Head/Prix/Btn.js"],"names":["React","doc","onSnapshot","updateDoc","db","moment","useNavigate","ReturnBTn","navigation","cdf","setCdf","useState","usd","setUsd","time","setTime","walletusd","setWalletusd","walletcdf","setWalletcdf","soldecdf","setSoldecdf","soldeusd","setSoldeusd","useEffect","JSON","parse","window","localStorage","getItem","data","console","log","moneycdf","Intl","NumberFormat","format","moneyusd","commacdf","split","commausd","franComma","undefined","DollarComma","Comma","Number","solde","parseInt","pretcdf","pretusd","date","now","year","get","months","days","end","duration","diff","day","asDays","pretCdf","modulecdf","pourcentage","index","yearusd","monthsusd","daysusd","dayusd","pretUsd","moduleusd","handlepathcdf","event","preventDefault","setItem","stringify","asKedpret","handlepathusd","washingtonRef","pret","pretactive","pretregister"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Btn.css';\nimport { doc, onSnapshot, updateDoc } from \"firebase/firestore\";\nimport { db } from '../../../../firebase';\n\nimport moment from 'moment';\nimport { useNavigate } from 'react-router-dom';\n\n\n// Btn Component view \nexport default function ReturnBTn() {\n\n const navigation = useNavigate();\n\n const [cdf, setCdf] = React.useState(0.00);\n const [usd, setUsd] = React.useState(0.00);\n const [time, setTime] = React.useState(null);\n\n const [walletusd, setWalletusd] = React.useState(0.00);\n const [walletcdf, setWalletcdf] = React.useState(0.00);\n\n\n const [soldecdf, setSoldecdf] = React.useState(0);\n const [soldeusd, setSoldeusd] = React.useState(0);\n\n React.useEffect(async () => {\n\n  try {\n   await onSnapshot(doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n\n    setSoldecdf(doc.data().cdf);\n    setSoldeusd(doc.data().usd);\n\n   });\n  } catch {\n   window.console.log(`Erreur`);\n  }\n\n }, []);\n\n\n let moneycdf = new Intl.NumberFormat('en-US').format(soldecdf);\n let moneyusd = new Intl.NumberFormat('en-US').format(soldeusd);\n\n let commacdf = moneycdf.split('.');\n let commausd = moneyusd.split('.');\n\n let franComma = commacdf[1] == undefined ? 0 : commacdf[1];\n let DollarComma = commausd[1] == undefined ? 0 : commausd[1];\n let Comma = Number(franComma) + Number(DollarComma);\n\n let solde = Number(parseInt(soldecdf)) + Number(parseInt(soldeusd));\n\n React.useEffect(async () => {\n\n  try {\n   await onSnapshot(doc(db, \"pret\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n\n    setCdf(doc.data().pretcdf);\n    setUsd(doc.data().pretusd);\n    setTime(doc.data().date);\n   });\n  } catch {\n   window.console.log(`Erreur`);\n  }\n\n }, []);\n\n React.useEffect(async () => {\n\n  try {\n   await onSnapshot(doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER'))), (doc) => {\n    setWalletusd(doc.data().usd);\n    setWalletcdf(doc.data().cdf);\n   });\n  } catch {\n   window.console.log(`Erreur`);\n  }\n\n }, []);\n\n\n var now = moment(); //todays date\n\n let year = moment(time).get('year');\n let months = moment(time).get('month');\n let days = moment(time).get('date');\n var end = moment([year, months, days]); // another date\n\n var duration = moment.duration(now.diff(end));\n var day = duration.asDays();\n\n let pretCdf = cdf;\n let modulecdf = 0;\n let pourcentage = JSON.parse(window.localStorage.getItem('%%pret-*%'));\n\n for (let index = 0; index <= parseInt(day); index++) {\n  if (index === 0) {\n   continue;\n\n  } else {\n\n   modulecdf = (pretCdf * pourcentage / 100);\n   pretCdf += modulecdf;\n  }\n\n };\n\n let yearusd = moment(time).get('year');\n let monthsusd = moment(time).get('month');\n let daysusd = moment(time).get('date');\n var end = moment([yearusd, monthsusd, daysusd]); // another date\n\n var duration = moment.duration(now.diff(end));\n var dayusd = duration.asDays();\n\n let pretUsd = usd;\n let moduleusd = 0;\n\n for (let index = 0; index <= parseInt(dayusd); index++) {\n  if (index === 0) {\n   continue;\n\n  } else {\n   moduleusd = (pretUsd * pourcentage / 100);\n   pretUsd += moduleusd;\n\n  }\n };\n\n const handlepathcdf = (event) => {\n  event.preventDefault();\n  window.localStorage.setItem('&&money::pret__', JSON.stringify(pretCdf));\n\n  window.localStorage.setItem('&&money::wallet__', JSON.stringify(walletcdf));\n  window.localStorage.setItem('&&money::unite__', JSON.stringify('cdf'));\n  window.localStorage.setItem('^^pret->', JSON.stringify(true));\n\n  if (solde <= 0 && Comma <= 10) {\n   window.localStorage.setItem('^^pret->ok', JSON.stringify(true));\n   asKedpret();\n  } else {\n   window.console.log('continue');\n  }\n\n  // navigation('/pret/costs/asked/cdf');\n  window.localStorage.setItem('solde&&%%¢pret', JSON.stringify('/pret/costs/asked/cdf'));\n  navigation('/pret/method');\n\n }\n\n\n const handlepathusd = (event) => {\n\n  event.preventDefault();\n  window.localStorage.setItem('&&money::pret__', JSON.stringify(pretUsd));\n  window.localStorage.setItem('&&money::wallet__', JSON.stringify(walletusd));\n  window.localStorage.setItem('&&money::unite__', JSON.stringify('usd'));\n\n  window.localStorage.setItem('^^pret->', JSON.stringify(true))\n\n  if (solde <= 0 && Comma <= 10) {\n   window.localStorage.setItem('^^pret->ok', JSON.stringify(true));\n   asKedpret();\n  } else {\n   window.console.log('continue');\n\n  }\n\n  // navigation('/pret/costs/asked/usd');\n  window.localStorage.setItem('solde&&%%¢pret', JSON.stringify('/pret/costs/asked/usd'));\n  navigation('/pret/method');\n\n }\n\n return (\n  <>\n   {\n    usd > 0 &&\n    <div className='btn-pret-asked'>\n     <button onClick={handlepathusd}>Remboursé</button>\n    </div>\n   }\n\n   {\n    cdf > 0 &&\n    <div className='btn-pret-asked'>\n     <button onClick={handlepathcdf}>Remboursé</button>\n    </div>\n   }\n  </>\n );\n};\n\n// add pret for client\nexport async function asKedpret() {\n const washingtonRef = doc(db, \"client\", JSON.parse(window.localStorage.getItem('USER')));\n // Set the \"capital\" field of the city 'DC'\n await updateDoc(washingtonRef, {\n  pret: false,\n  pretactive: false,\n  pretregister: false\n });\n\n};\n\n"]},"metadata":{},"sourceType":"module"}