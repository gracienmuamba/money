{"ast":null,"code":"import _objectSpread from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/USER/Desktop/MuunganoMoney/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'./Input.css';import Media from'react-media';import{useForm}from'react-hook-form';import{useNavigate}from'react-router-dom';import{doc,getDocs,collection,getDoc,updateDoc,increment,onSnapshot}from\"firebase/firestore\";import{db}from'../../../firebase';import{phoneX}from'../../../Sign/Input';import{sendPhone}from'../../../ValidExFran/Input';import{frais,Unite,solde,money}from'../../../FC/Input';import Button from'@mui/material/Button';import Dialog from'@mui/material/Dialog';import DialogActions from'@mui/material/DialogActions';import DialogContent from'@mui/material/DialogContent';import DialogTitle from'@mui/material/DialogTitle';import DialogContentText from'@mui/material/DialogContentText';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var nowField=moment().date()-1;export var prixHash=0;export var hashTrue=true;// Input Field Component \nexport default function ReturnInput(){return/*#__PURE__*/_jsx(Media,{queries:{small:'(max-width: 599px)',medium:'(min-width: 600px) and (max-width:1199px)',large:'(min-width: 1200px)'},children:function children(matches){return/*#__PURE__*/_jsxs(_Fragment,{children:[matches.small&&/*#__PURE__*/_jsx(ScreenSmall,{}),matches.medium&&/*#__PURE__*/_jsx(SreenLarge,{}),matches.large&&/*#__PURE__*/_jsx(SreenLarge,{})]});}});};export var SreenLarge=function SreenLarge(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-input-phone-register\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var ScreenSmall=function ScreenSmall(){return/*#__PURE__*/_jsx(\"div\",{className:\"wrp-input-phone-register-sm\",children:/*#__PURE__*/_jsx(FormInput,{})});};export var FormInput=function FormInput(){var pushDocs=new Array();var verifierSend;var verifierGet;var navigation=useNavigate();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;//  order notebook\nvar _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),tableClient=_React$useState2[0],setTableClient=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),tableAgent=_React$useState4[0],setTableAgent=_React$useState4[1];// send React useState  \nvar _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),pin=_React$useState6[0],setPin=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),state=_React$useState8[0],setState=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),first=_React$useState10[0],setFirst=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),last=_React$useState12[0],setLast=_React$useState12[1];// getting React useState\nvar _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),getstate=_React$useState14[0],setGetstate=_React$useState14[1];var _React$useState15=React.useState(''),_React$useState16=_slicedToArray(_React$useState15,2),getfirst=_React$useState16[0],setGetFirst=_React$useState16[1];var _React$useState17=React.useState(''),_React$useState18=_slicedToArray(_React$useState17,2),getlast=_React$useState18[0],setGetLast=_React$useState18[1];var _React$useState19=React.useState(false),_React$useState20=_slicedToArray(_React$useState19,2),open=_React$useState20[0],setOpen=_React$useState20[1];var _React$useState21=React.useState(true),_React$useState22=_slicedToArray(_React$useState21,2),fullWidth=_React$useState22[0],setFullWidth=_React$useState22[1];var _React$useState23=React.useState('sm'),_React$useState24=_slicedToArray(_React$useState23,2),maxWidth=_React$useState24[0],setMaxWidth=_React$useState24[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};React.useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var querySnapshot,sendRef,sendSnap,getRef,getSnap;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(collection(db,\"client\"));case 2:querySnapshot=_context.sent;querySnapshot.forEach(function(doc){pushDocs.push(doc.id);});verifierSend=pushDocs.some(function(value){return value==phoneX;});verifierGet=pushDocs.some(function(value){return value==sendPhone;});sendRef=doc(db,verifierSend?\"client\":\"agent\",phoneX);_context.next=9;return getDoc(sendRef);case 9:sendSnap=_context.sent;if(sendSnap.exists()){setPin(sendSnap.data().code);setState(sendSnap.data().state);setFirst(sendSnap.data().firstname);setLast(sendSnap.data().lastname);};getRef=doc(db,verifierGet?\"client\":\"agent\",sendPhone);_context.next=15;return getDoc(getRef);case 15:getSnap=_context.sent;if(getSnap.exists()){setGetstate(getSnap.data().state);setGetFirst(getSnap.data().firstname);setGetLast(getSnap.data().lastname);};_context.prev=18;_context.next=21;return onSnapshot(doc(db,\"clients\",\"emoney\"),function(doc){setTableClient(doc.data().cdf);});case 21:_context.next=23;return onSnapshot(doc(db,\"agents\",\"emoney\"),function(doc){setTableAgent(doc.data().cdf);});case 23:_context.next=28;break;case 25:_context.prev=25;_context.t0=_context[\"catch\"](18);window.console.log('Erreur disponible');case 28:case\"end\":return _context.stop();}}},_callee,null,[[18,25]]);})),[]);var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var sendUser,getUser,arrayAgent,arrayClient,_arrayAgent,_arrayClient;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Checked if value code is length valid\nif(data.code.length!=6||pin!=data.code){setOpen(true);reset();}else{sendUser=first.toLowerCase()+' '+last.toLowerCase();getUser=getfirst.toLowerCase()+' '+getlast.toLowerCase();if(state==\"agent\"&&getstate==\"agent\"){hashTrue=false;prixHash=solde;arrayAgent=tableAgent;arrayAgent[nowField]=Number(tableAgent[nowField])+solde;swapInWithDocsAgent(phoneX,sendPhone,sendUser,getUser,solde,Unite,arrayAgent);navigation('/send-success');}else if(state==\"client\"&&getstate==\"client\"){hashTrue=true;prixHash=money;arrayClient=tableClient;arrayClient[nowField]=Number(tableClient[nowField])+money;isSwapInWithClientToClient(phoneX,sendPhone,sendUser,getUser,solde,money,Unite,arrayClient);navigation('/send-success');}else{if(state==\"agent\"){hashTrue=false;prixHash=solde;_arrayAgent=tableAgent;_arrayAgent[nowField]=Number(tableAgent[nowField])-solde;swapInWithDocsAgentToClient(phoneX,sendPhone,sendUser,getUser,solde,Unite,_arrayAgent);navigation('/send-success');}else{hashTrue=true;prixHash=money;_arrayClient=tableClient;_arrayClient[nowField]=Number(tableClient[nowField])-money;isSwapInWithClientToAgent(phoneX,sendPhone,sendUser,getUser,solde,money,Unite,_arrayClient);navigation('/send-success');}}}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",placeholder:\"Code\",name:\"code\"},register('code',{required:true}))),/*#__PURE__*/_jsxs(Dialog,{fullWidth:fullWidth,maxWidth:maxWidth,open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"MuunganoMoney\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"Code d'acc\\xE8s refus\\xE9. Veuillez v\\xE9rifier\"})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Fermer\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Btn\",children:\"Valider\"})]});};function swapInWithDocsAgent(_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _swapInWithDocsAgent.apply(this,arguments);}function _swapInWithDocsAgent(){_swapInWithDocsAgent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(sendPhone,getPhone,sendUser,getUser,prix,unite,arrayAgentMoney){var sendRef,getRef,agentsemoneyRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:sendRef=doc(db,\"agent\",sendPhone);_context3.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:prix,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"agent\",getPhone);_context3.next=6;return updateDoc(getRef,{cdf:increment(prix),money:prix,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format()});case 6:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context3.next=9;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 9:case\"end\":return _context3.stop();}}},_callee3);}));return _swapInWithDocsAgent.apply(this,arguments);};function swapInWithDocsAgentToClient(_x9,_x10,_x11,_x12,_x13,_x14,_x15){return _swapInWithDocsAgentToClient.apply(this,arguments);}function _swapInWithDocsAgentToClient(){_swapInWithDocsAgentToClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(sendPhone,getPhone,sendUser,getUser,prix,unite,arrayAgentMoney){var sendRef,getRef,agentsemoneyRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:sendRef=doc(db,\"agent\",sendPhone);_context4.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:prix,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"client\",getPhone);_context4.next=6;return updateDoc(getRef,{cdf:increment(prix),money:prix,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format()});case 6:agentsemoneyRef=doc(db,\"agents\",\"emoney\");_context4.next=9;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 9:case\"end\":return _context4.stop();}}},_callee4);}));return _swapInWithDocsAgentToClient.apply(this,arguments);};function isSwapInWithClientToAgent(_x16,_x17,_x18,_x19,_x20,_x21,_x22,_x23){return _isSwapInWithClientToAgent.apply(this,arguments);}function _isSwapInWithClientToAgent(){_isSwapInWithClientToAgent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(sendPhone,getPhone,sendUser,getUser,prix,money,unite,arrayAgentMoney){var sendRef,getRef,adminRef,agentsemoneyRef;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sendRef=doc(db,\"client\",sendPhone);_context5.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:money,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"agent\",getPhone);_context5.next=6;return updateDoc(getRef,{cdf:increment(money),money:money,user:sendUser,unite:unite,thriftcdf:increment(Math.floor(Number(frais*30/100))),phoneclient:sendPhone,delay:moment().format()});case 6:adminRef=doc(db,\"muunganomoney\",\"money\");_context5.next=9;return updateDoc(adminRef,{cdf:increment(Math.floor(Number(frais*70/100)))});case 9:agentsemoneyRef=doc(db,\"clients\",\"emoney\");_context5.next=12;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 12:case\"end\":return _context5.stop();}}},_callee5);}));return _isSwapInWithClientToAgent.apply(this,arguments);};function isSwapInWithClientToClient(_x24,_x25,_x26,_x27,_x28,_x29,_x30,_x31){return _isSwapInWithClientToClient.apply(this,arguments);}function _isSwapInWithClientToClient(){_isSwapInWithClientToClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(sendPhone,getPhone,sendUser,getUser,prix,money,unite,arrayAgentMoney){var sendRef,getRef,adminRef,agentsemoneyRef;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:sendRef=doc(db,\"client\",sendPhone);_context6.next=3;return updateDoc(sendRef,{cdf:increment(-prix),money:money,user:getUser,unite:unite,phoneclient:getPhone,delay:moment().format()});case 3:getRef=doc(db,\"client\",getPhone);_context6.next=6;return updateDoc(getRef,{cdf:increment(money),money:money,user:sendUser,unite:unite,phoneclient:sendPhone,delay:moment().format()});case 6:adminRef=doc(db,\"muunganomoney\",\"money\");_context6.next=9;return updateDoc(adminRef,{cdf:increment(Math.floor(Number(frais)))});case 9:agentsemoneyRef=doc(db,\"clients\",\"emoney\");_context6.next=12;return updateDoc(agentsemoneyRef,{cdf:arrayAgentMoney});case 12:case\"end\":return _context6.stop();}}},_callee6);}));return _isSwapInWithClientToClient.apply(this,arguments);};","map":{"version":3,"sources":["/Users/USER/Desktop/MuunganoMoney/src/Pin/Fc/Simple/Input.js"],"names":["React","Media","useForm","useNavigate","doc","getDocs","collection","getDoc","updateDoc","increment","onSnapshot","db","phoneX","sendPhone","frais","Unite","solde","money","Button","Dialog","DialogActions","DialogContent","DialogTitle","DialogContentText","moment","nowField","date","prixHash","hashTrue","ReturnInput","small","medium","large","matches","SreenLarge","ScreenSmall","FormInput","pushDocs","Array","verifierSend","verifierGet","navigation","register","handleSubmit","reset","useState","tableClient","setTableClient","tableAgent","setTableAgent","pin","setPin","state","setState","first","setFirst","last","setLast","getstate","setGetstate","getfirst","setGetFirst","getlast","setGetLast","open","setOpen","fullWidth","setFullWidth","maxWidth","setMaxWidth","handleClickOpen","handleClose","useEffect","querySnapshot","forEach","push","id","some","value","sendRef","sendSnap","exists","data","code","firstname","lastname","getRef","getSnap","cdf","window","console","log","onSubmit","length","sendUser","toLowerCase","getUser","arrayAgent","Number","swapInWithDocsAgent","arrayClient","isSwapInWithClientToClient","swapInWithDocsAgentToClient","isSwapInWithClientToAgent","required","getPhone","prix","unite","arrayAgentMoney","user","phoneclient","delay","format","agentsemoneyRef","thriftcdf","Math","floor","adminRef"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Input.css';\nimport Media from 'react-media';\nimport { useForm } from 'react-hook-form';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, getDocs, collection, getDoc, updateDoc, increment, onSnapshot } from \"firebase/firestore\";\nimport { db } from '../../../firebase';\n\nimport { phoneX } from '../../../Sign/Input';\nimport { sendPhone } from '../../../ValidExFran/Input';\nimport { frais, Unite, solde, money } from '../../../FC/Input';\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContentText from '@mui/material/DialogContentText';\n\nimport moment from 'moment';\nexport let nowField = (moment().date()) - 1;\n\nexport let prixHash = 0;\nexport let hashTrue = true;\n\n// Input Field Component \nexport default function ReturnInput() {\n return (\n  <Media\n   queries={{\n    small: '(max-width: 599px)',\n    medium: '(min-width: 600px) and (max-width:1199px)',\n    large: '(min-width: 1200px)',\n   }}>\n   {matches => (\n    <>\n     {matches.small && <ScreenSmall />}\n     {matches.medium && <SreenLarge />}\n     {matches.large && <SreenLarge />}\n    </>\n   )}\n  </Media>\n );\n};\nexport const SreenLarge = () => (\n <div className='wrp-input-phone-register'>\n  <FormInput />\n\n </div>\n);\nexport const ScreenSmall = () => (\n <div className='wrp-input-phone-register-sm'>\n  <FormInput />\n </div>\n);\nexport const FormInput = () => {\n\n let pushDocs = new Array();\n let verifierSend;\n let verifierGet;\n\n const navigation = useNavigate();\n const { register, handleSubmit, reset } = useForm();\n\n //  order notebook\n const [tableClient, setTableClient] = React.useState();\n const [tableAgent, setTableAgent] = React.useState();\n\n // send React useState  \n const [pin, setPin] = React.useState(null);\n const [state, setState] = React.useState(null);\n const [first, setFirst] = React.useState('');\n const [last, setLast] = React.useState('');\n\n // getting React useState\n const [getstate, setGetstate] = React.useState(null);\n const [getfirst, setGetFirst] = React.useState('');\n const [getlast, setGetLast] = React.useState('');\n\n\n const [open, setOpen] = React.useState(false);\n const [fullWidth, setFullWidth] = React.useState(true);\n const [maxWidth, setMaxWidth] = React.useState('sm');\n\n const handleClickOpen = () => {\n  setOpen(true);\n };\n const handleClose = () => {\n  setOpen(false);\n };\n\n\n React.useEffect(async () => {\n\n  const querySnapshot = await getDocs(collection(db, \"client\"));\n  querySnapshot.forEach((doc) => {\n   pushDocs.push(doc.id);\n  });\n\n  verifierSend = pushDocs.some(value => value == phoneX);\n  verifierGet = pushDocs.some(value => value == sendPhone);\n\n  const sendRef = doc(db, verifierSend ? \"client\" : \"agent\", phoneX);\n  const sendSnap = await getDoc(sendRef);\n\n  if (sendSnap.exists()) {\n   setPin(sendSnap.data().code);\n   setState(sendSnap.data().state);\n   setFirst(sendSnap.data().firstname);\n   setLast(sendSnap.data().lastname);\n  };\n\n  const getRef = doc(db, verifierGet ? \"client\" : \"agent\", sendPhone);\n  const getSnap = await getDoc(getRef);\n\n  if (getSnap.exists()) {\n   setGetstate(getSnap.data().state);\n   setGetFirst(getSnap.data().firstname);\n   setGetLast(getSnap.data().lastname);\n  };\n\n  try {\n   await onSnapshot(doc(db, \"clients\", \"emoney\"), (doc) => {\n    setTableClient(doc.data().cdf);\n   });\n\n   await onSnapshot(doc(db, \"agents\", \"emoney\"), (doc) => {\n    setTableAgent(doc.data().cdf);\n   });\n\n  } catch {\n   window.console.log('Erreur disponible');\n  }\n\n\n }, []);\n\n const onSubmit = async (data) => {\n\n  // Checked if value code is length valid\n  if (data.code.length != 6 || pin != data.code) {\n\n   setOpen(true);\n   reset();\n\n  } else {\n\n   const sendUser = first.toLowerCase() + ' ' + last.toLowerCase();\n   const getUser = getfirst.toLowerCase() + ' ' + getlast.toLowerCase();\n\n   if (state == \"agent\" && getstate == \"agent\") {\n\n    hashTrue = false;\n    prixHash = solde;\n\n    let arrayAgent = tableAgent;\n    arrayAgent[nowField] = Number(tableAgent[nowField]) + solde;\n\n    swapInWithDocsAgent(phoneX, sendPhone, sendUser, getUser, solde, Unite, arrayAgent);\n    navigation('/send-success');\n\n   } else if (state == \"client\" && getstate == \"client\") {\n\n\n    hashTrue = true;\n    prixHash = money;\n\n    let arrayClient = tableClient;\n    arrayClient[nowField] = Number(tableClient[nowField]) + money;\n\n    isSwapInWithClientToClient(phoneX, sendPhone, sendUser, getUser, solde, money, Unite, arrayClient);\n    navigation('/send-success');\n\n\n   } else {\n\n    if (state == \"agent\") {\n\n     hashTrue = false;\n     prixHash = solde;\n\n     let arrayAgent = tableAgent;\n     arrayAgent[nowField] = Number(tableAgent[nowField]) - solde;\n\n     swapInWithDocsAgentToClient(phoneX, sendPhone, sendUser, getUser, solde, Unite, arrayAgent);\n     navigation('/send-success');\n\n    } else {\n\n     hashTrue = true;\n     prixHash = money;\n\n     let arrayClient = tableClient;\n     arrayClient[nowField] = Number(tableClient[nowField]) - money;\n\n     isSwapInWithClientToAgent(phoneX, sendPhone, sendUser, getUser, solde, money, Unite, arrayClient);\n     navigation('/send-success');\n    }\n\n   }\n\n  }\n };\n\n return (\n  <form onSubmit={handleSubmit(onSubmit)}>\n   <input type='password'\n    placeholder='Code'\n    name='code' {...register('code', { required: true })}\n   />\n\n   <Dialog\n    fullWidth={fullWidth}\n    maxWidth={maxWidth}\n    open={open}\n    onClose={handleClose}\n   >\n    <DialogTitle>MuunganoMoney</DialogTitle>\n    <DialogContent>\n\n     <DialogContentText>\n      Code d'accès refusé. Veuillez vérifier\n     </DialogContentText>\n\n    </DialogContent>\n    <DialogActions>\n     <Button onClick={handleClose}>Fermer</Button>\n    </DialogActions>\n   </Dialog>\n\n\n   <button className='Btn'>Valider</button>\n  </form>\n )\n};\n\n\nasync function swapInWithDocsAgent(sendPhone, getPhone, sendUser, getUser, prix, unite, arrayAgentMoney) {\n\n const sendRef = doc(db, \"agent\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: prix,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"agent\", getPhone);\n await updateDoc(getRef, {\n  cdf: increment(prix),\n  money: prix,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n};\nasync function swapInWithDocsAgentToClient(sendPhone, getPhone, sendUser, getUser, prix, unite, arrayAgentMoney) {\n\n const sendRef = doc(db, \"agent\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: prix,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"client\", getPhone);\n await updateDoc(getRef, {\n  cdf: increment(prix),\n  money: prix,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n\n const agentsemoneyRef = doc(db, \"agents\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n};\nasync function isSwapInWithClientToAgent(sendPhone, getPhone, sendUser, getUser, prix, money, unite, arrayAgentMoney) {\n\n const sendRef = doc(db, \"client\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: money,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"agent\", getPhone);\n await updateDoc(getRef, {\n  cdf: increment(money),\n  money: money,\n  user: sendUser,\n  unite: unite,\n  thriftcdf: increment(Math.floor(Number(frais * 30 / 100))),\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n const adminRef = doc(db, \"muunganomoney\", \"money\");\n await updateDoc(adminRef, {\n  cdf: increment(Math.floor(Number(frais * 70 / 100)))\n });\n\n const agentsemoneyRef = doc(db, \"clients\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n};\nasync function isSwapInWithClientToClient(sendPhone, getPhone, sendUser, getUser, prix, money, unite, arrayAgentMoney) {\n\n const sendRef = doc(db, \"client\", sendPhone);\n await updateDoc(sendRef, {\n  cdf: increment(-(prix)),\n  money: money,\n  user: getUser,\n  unite: unite,\n  phoneclient: getPhone,\n  delay: moment().format()\n });\n\n const getRef = doc(db, \"client\", getPhone);\n await updateDoc(getRef, {\n  cdf: increment(money),\n  money: money,\n  user: sendUser,\n  unite: unite,\n  phoneclient: sendPhone,\n  delay: moment().format()\n });\n\n const adminRef = doc(db, \"muunganomoney\", \"money\");\n await updateDoc(adminRef, {\n  cdf: increment(Math.floor(Number(frais)))\n });\n\n const agentsemoneyRef = doc(db, \"clients\", \"emoney\");\n await updateDoc(agentsemoneyRef, {\n  cdf: arrayAgentMoney,\n });\n\n};\n"]},"metadata":{},"sourceType":"module"}