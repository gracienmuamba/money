{"version":3,"names":["react_utilities_1","require","react_shared_contexts_1","useSliderStyles_1","sliderStepsPercentVar","sliderProgressVar","sliderDirectionVar","sliderCSSVars","getPercent","value","min","max","useSliderState_unstable","state","props","defaultValue","step","dir","useFluent_unstable","currentValue","setCurrentValue","useControllableState","undefined","clamp","defaultState","initialState","valuePercent","inputOnChange","input","onChange","propsOnChange","useEventCallback","ev","newValue","Number","target","rootVariables","vertical","root","style","exports"],"sources":["../src/packages/react-components/react-slider/src/components/Slider/useSliderState.tsx"],"sourcesContent":["import * as React from 'react';\nimport { clamp, useControllableState, useEventCallback } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { sliderCSSVars } from './useSliderStyles';\nimport type { SliderState, SliderProps } from './Slider.types';\n\nconst { sliderStepsPercentVar, sliderProgressVar, sliderDirectionVar } = sliderCSSVars;\n\nconst getPercent = (value: number, min: number, max: number) => {\n  return max === min ? 0 : ((value - min) / (max - min)) * 100;\n};\n\nexport const useSliderState_unstable = (state: SliderState, props: SliderProps) => {\n  const { defaultValue = 0, min = 0, max = 100, step, value } = props;\n  const { dir } = useFluent();\n  const [currentValue, setCurrentValue] = useControllableState({\n    state: value !== undefined ? clamp(value, min, max) : undefined,\n    defaultState: clamp(defaultValue, min, max),\n    initialState: 0,\n  });\n  const valuePercent = getPercent(currentValue, min, max);\n\n  const inputOnChange = state.input.onChange;\n  const propsOnChange = props.onChange;\n\n  const onChange: React.ChangeEventHandler<HTMLInputElement> = useEventCallback(ev => {\n    const newValue = Number(ev.target.value);\n    setCurrentValue(clamp(newValue, min, max));\n\n    if (inputOnChange && inputOnChange !== propsOnChange) {\n      inputOnChange(ev);\n    } else if (propsOnChange) {\n      propsOnChange(ev, { value: newValue });\n    }\n  });\n\n  const rootVariables = {\n    [sliderDirectionVar]: state.vertical ? '0deg' : dir === 'ltr' ? '90deg' : '270deg',\n    [sliderStepsPercentVar]: step && step > 0 ? `${(step * 100) / (max - min)}%` : '',\n    [sliderProgressVar]: `${valuePercent}%`,\n  };\n\n  // Root props\n  state.root.style = {\n    ...rootVariables,\n    ...state.root.style,\n  };\n\n  // Input Props\n  state.input.value = currentValue;\n  state.input.onChange = onChange;\n\n  return state;\n};\n"],"mappings":";;;;;;AACA,MAAAA,iBAAA,gBAAAC,OAAA;AACA,MAAAC,uBAAA,gBAAAD,OAAA;AACA,MAAAE,iBAAA,gBAAAF,OAAA;AAGA,MAAM;EAAEG,qBAAqB;EAAEC,iBAAiB;EAAEC;AAAkB,CAAE,GAAGH,iBAAA,CAAAI,aAAa;AAEtF,MAAMC,UAAU,GAAGA,CAACC,KAAa,EAAEC,GAAW,EAAEC,GAAW,KAAI;EAC7D,OAAOA,GAAG,KAAKD,GAAG,GAAG,CAAC,GAAI,CAACD,KAAK,GAAGC,GAAG,KAAKC,GAAG,GAAGD,GAAG,CAAC,GAAI,GAAG;AAC9D,CAAC;AAEM,MAAME,uBAAuB,GAAGA,CAACC,KAAkB,EAAEC,KAAkB,KAAI;EAChF,MAAM;IAAEC,YAAY,GAAG,CAAC;IAAEL,GAAG,GAAG,CAAC;IAAEC,GAAG,GAAG,GAAG;IAAEK,IAAI;IAAEP;EAAK,CAAE,GAAGK,KAAK;EACnE,MAAM;IAAEG;EAAG,CAAE,GAAGf,uBAAA,CAAAgB,kBAAS,EAAE;EAC3B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGpB,iBAAA,CAAAqB,oBAAoB,CAAC;IAC3DR,KAAK,EAAEJ,KAAK,KAAKa,SAAS,GAAGtB,iBAAA,CAAAuB,KAAK,CAACd,KAAK,EAAEC,GAAG,EAAEC,GAAG,CAAC,GAAGW,SAAS;IAC/DE,YAAY,EAAExB,iBAAA,CAAAuB,KAAK,CAACR,YAAY,EAAEL,GAAG,EAAEC,GAAG,CAAC;IAC3Cc,YAAY,EAAE;GACf,CAAC;EACF,MAAMC,YAAY,GAAGlB,UAAU,CAACW,YAAY,EAAET,GAAG,EAAEC,GAAG,CAAC;EAEvD,MAAMgB,aAAa,GAAGd,KAAK,CAACe,KAAK,CAACC,QAAQ;EAC1C,MAAMC,aAAa,GAAGhB,KAAK,CAACe,QAAQ;EAEpC,MAAMA,QAAQ,GAA+C7B,iBAAA,CAAA+B,gBAAgB,CAACC,EAAE,IAAG;IACjF,MAAMC,QAAQ,GAAGC,MAAM,CAACF,EAAE,CAACG,MAAM,CAAC1B,KAAK,CAAC;IACxCW,eAAe,CAACpB,iBAAA,CAAAuB,KAAK,CAACU,QAAQ,EAAEvB,GAAG,EAAEC,GAAG,CAAC,CAAC;IAE1C,IAAIgB,aAAa,IAAIA,aAAa,KAAKG,aAAa,EAAE;MACpDH,aAAa,CAACK,EAAE,CAAC;KAClB,MAAM,IAAIF,aAAa,EAAE;MACxBA,aAAa,CAACE,EAAE,EAAE;QAAEvB,KAAK,EAAEwB;MAAQ,CAAE,CAAC;;EAE1C,CAAC,CAAC;EAEF,MAAMG,aAAa,GAAG;IACpB,CAAC9B,kBAAkB,GAAGO,KAAK,CAACwB,QAAQ,GAAG,MAAM,GAAGpB,GAAG,KAAK,KAAK,GAAG,OAAO,GAAG,QAAQ;IAClF,CAACb,qBAAqB,GAAGY,IAAI,IAAIA,IAAI,GAAG,CAAC,GAAG,GAAIA,IAAI,GAAG,GAAG,IAAKL,GAAG,GAAGD,GAAG,CAAC,GAAG,GAAG,EAAE;IACjF,CAACL,iBAAiB,GAAG,GAAGqB,YAAY;GACrC;EAED;EACAb,KAAK,CAACyB,IAAI,CAACC,KAAK,GAAG;IACjB,GAAGH,aAAa;IAChB,GAAGvB,KAAK,CAACyB,IAAI,CAACC;GACf;EAED;EACA1B,KAAK,CAACe,KAAK,CAACnB,KAAK,GAAGU,YAAY;EAChCN,KAAK,CAACe,KAAK,CAACC,QAAQ,GAAGA,QAAQ;EAE/B,OAAOhB,KAAK;AACd,CAAC;AAzCY2B,OAAA,CAAA5B,uBAAuB,GAAAA,uBAAA"}