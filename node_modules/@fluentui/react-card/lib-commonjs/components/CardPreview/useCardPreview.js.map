{"version":3,"names":["React","require","react_utilities_1","CardContext_1","useCardPreviewStyles_1","useCardPreview_unstable","props","ref","logo","selectableA11yProps","referenceLabel","referenceId","setReferenceLabel","setReferenceId","useCardContext_unstable","previewRef","useMergedRefs","useRef","useEffect","current","parentNode","img","querySelector","cardPreviewClassNames","root","ariaLabel","getAttribute","ariaDescribedby","alt","components","getNativeElementProps","resolveShorthand","exports"],"sources":["../src/packages/react-components/react-card/src/components/CardPreview/useCardPreview.ts"],"sourcesContent":["import * as React from 'react';\nimport { getNativeElementProps, resolveShorthand, useMergedRefs } from '@fluentui/react-utilities';\nimport type { CardPreviewProps, CardPreviewState } from './CardPreview.types';\nimport { useCardContext_unstable } from '../Card/CardContext';\nimport { cardPreviewClassNames } from './useCardPreviewStyles';\n\n/**\n * Create the state required to render CardPreview.\n *\n * The returned state can be modified with hooks such as useCardPreviewStyles_unstable,\n * before being passed to renderCardPreview_unstable.\n *\n * @param props - props from this instance of CardPreview\n * @param ref - reference to root HTMLElement of CardPreview\n */\nexport const useCardPreview_unstable = (props: CardPreviewProps, ref: React.Ref<HTMLElement>): CardPreviewState => {\n  const { logo } = props;\n\n  const {\n    selectableA11yProps: { referenceLabel, referenceId, setReferenceLabel, setReferenceId },\n  } = useCardContext_unstable();\n  const previewRef = useMergedRefs(ref, React.useRef<HTMLDivElement>(null));\n\n  React.useEffect(() => {\n    if (referenceLabel && referenceId) {\n      return;\n    }\n\n    if (previewRef.current && previewRef.current.parentNode) {\n      const img = previewRef.current.parentNode.querySelector<HTMLImageElement>(`.${cardPreviewClassNames.root} > img`);\n\n      if (img) {\n        const ariaLabel = img.getAttribute('aria-label');\n        const ariaDescribedby = img.getAttribute('aria-describedby');\n\n        if (ariaDescribedby) {\n          setReferenceId(ariaDescribedby);\n        } else if (img.alt) {\n          setReferenceLabel(img.alt);\n        } else if (ariaLabel) {\n          setReferenceLabel(ariaLabel);\n        }\n      }\n    }\n  }, [setReferenceLabel, referenceLabel, previewRef, referenceId, setReferenceId]);\n\n  return {\n    components: {\n      root: 'div',\n      logo: 'div',\n    },\n\n    root: getNativeElementProps('div', {\n      ref: previewRef,\n      ...props,\n    }),\n    logo: resolveShorthand(logo),\n  };\n};\n"],"mappings":";;;;;;AAAA,MAAAA,KAAA,gBAAAC,OAAA;AACA,MAAAC,iBAAA,gBAAAD,OAAA;AAEA,MAAAE,aAAA,gBAAAF,OAAA;AACA,MAAAG,sBAAA,gBAAAH,OAAA;AAEA;;;;;;;;;AASO,MAAMI,uBAAuB,GAAGA,CAACC,KAAuB,EAAEC,GAA2B,KAAsB;EAChH,MAAM;IAAEC;EAAI,CAAE,GAAGF,KAAK;EAEtB,MAAM;IACJG,mBAAmB,EAAE;MAAEC,cAAc;MAAEC,WAAW;MAAEC,iBAAiB;MAAEC;IAAc;EAAE,CACxF,GAAGV,aAAA,CAAAW,uBAAuB,EAAE;EAC7B,MAAMC,UAAU,GAAGb,iBAAA,CAAAc,aAAa,CAACT,GAAG,EAAEP,KAAK,CAACiB,MAAM,CAAiB,IAAI,CAAC,CAAC;EAEzEjB,KAAK,CAACkB,SAAS,CAAC,MAAK;IACnB,IAAIR,cAAc,IAAIC,WAAW,EAAE;MACjC;;IAGF,IAAII,UAAU,CAACI,OAAO,IAAIJ,UAAU,CAACI,OAAO,CAACC,UAAU,EAAE;MACvD,MAAMC,GAAG,GAAGN,UAAU,CAACI,OAAO,CAACC,UAAU,CAACE,aAAa,CAAmB,IAAIlB,sBAAA,CAAAmB,qBAAqB,CAACC,IAAI,QAAQ,CAAC;MAEjH,IAAIH,GAAG,EAAE;QACP,MAAMI,SAAS,GAAGJ,GAAG,CAACK,YAAY,CAAC,YAAY,CAAC;QAChD,MAAMC,eAAe,GAAGN,GAAG,CAACK,YAAY,CAAC,kBAAkB,CAAC;QAE5D,IAAIC,eAAe,EAAE;UACnBd,cAAc,CAACc,eAAe,CAAC;SAChC,MAAM,IAAIN,GAAG,CAACO,GAAG,EAAE;UAClBhB,iBAAiB,CAACS,GAAG,CAACO,GAAG,CAAC;SAC3B,MAAM,IAAIH,SAAS,EAAE;UACpBb,iBAAiB,CAACa,SAAS,CAAC;;;;EAIpC,CAAC,EAAE,CAACb,iBAAiB,EAAEF,cAAc,EAAEK,UAAU,EAAEJ,WAAW,EAAEE,cAAc,CAAC,CAAC;EAEhF,OAAO;IACLgB,UAAU,EAAE;MACVL,IAAI,EAAE,KAAK;MACXhB,IAAI,EAAE;KACP;IAEDgB,IAAI,EAAEtB,iBAAA,CAAA4B,qBAAqB,CAAC,KAAK,EAAE;MACjCvB,GAAG,EAAEQ,UAAU;MACf,GAAGT;KACJ,CAAC;IACFE,IAAI,EAAEN,iBAAA,CAAA6B,gBAAgB,CAACvB,IAAI;GAC5B;AACH,CAAC;AA3CYwB,OAAA,CAAA3B,uBAAuB,GAAAA,uBAAA"}