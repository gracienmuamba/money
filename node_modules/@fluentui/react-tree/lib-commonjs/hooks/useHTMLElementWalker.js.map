{"version":3,"names":["react_utilities_1","require","React","createHTMLElementWalker","root","filter","NodeFilter","FILTER_ACCEPT","temporaryFilter","treeWalker","document","createTreeWalker","SHOW_ELEMENT","acceptNode","node","isHTMLElement","FILTER_REJECT","filterResult","_a","currentElement","currentNode","element","firstChild","localFilter","result","undefined","lastChild","nextElement","nextNode","nextSibling","parentElement","parentNode","previousElement","previousNode","previousSibling","exports","useHTMLElementWalkerRef","walkerRef","useRef","rootRefCallback","current"],"sources":["../src/packages/react-components/react-tree/src/hooks/useHTMLElementWalker.ts"],"sourcesContent":["import { isHTMLElement } from '@fluentui/react-utilities';\nimport * as React from 'react';\n\nexport interface HTMLElementWalker {\n  readonly root: HTMLElement;\n  currentElement: HTMLElement;\n  firstChild(filter?: HTMLElementFilter): HTMLElement | null;\n  lastChild(filter?: HTMLElementFilter): HTMLElement | null;\n  nextElement(filter?: HTMLElementFilter): HTMLElement | null;\n  nextSibling(filter?: HTMLElementFilter): HTMLElement | null;\n  parentElement(filter?: HTMLElementFilter): HTMLElement | null;\n  previousElement(filter?: HTMLElementFilter): HTMLElement | null;\n  previousSibling(filter?: HTMLElementFilter): HTMLElement | null;\n}\n\nexport type HTMLElementFilter = (element: HTMLElement) => number;\n\nexport function createHTMLElementWalker(\n  root: HTMLElement,\n  filter: HTMLElementFilter = () => NodeFilter.FILTER_ACCEPT,\n): HTMLElementWalker {\n  let temporaryFilter: HTMLElementFilter | undefined;\n  const treeWalker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node: Node) {\n      if (!isHTMLElement(node)) {\n        return NodeFilter.FILTER_REJECT;\n      }\n      const filterResult = filter(node);\n      return filterResult === NodeFilter.FILTER_ACCEPT ? temporaryFilter?.(node) ?? filterResult : filterResult;\n    },\n  });\n  return {\n    get root() {\n      return treeWalker.root as HTMLElement;\n    },\n    get currentElement() {\n      return treeWalker.currentNode as HTMLElement;\n    },\n    set currentElement(element) {\n      treeWalker.currentNode = element;\n    },\n    firstChild: localFilter => {\n      temporaryFilter = localFilter;\n      const result = treeWalker.firstChild() as HTMLElement | null;\n      temporaryFilter = undefined;\n      return result;\n    },\n    lastChild: localFilter => {\n      temporaryFilter = localFilter;\n      const result = treeWalker.lastChild() as HTMLElement | null;\n      temporaryFilter = undefined;\n      return result;\n    },\n    nextElement: localFilter => {\n      temporaryFilter = localFilter;\n      const result = treeWalker.nextNode() as HTMLElement | null;\n      temporaryFilter = undefined;\n      return result;\n    },\n    nextSibling: localFilter => {\n      temporaryFilter = localFilter;\n      const result = treeWalker.nextSibling() as HTMLElement | null;\n      temporaryFilter = undefined;\n      return result;\n    },\n    parentElement: localFilter => {\n      temporaryFilter = localFilter;\n      const result = treeWalker.parentNode() as HTMLElement | null;\n      temporaryFilter = undefined;\n      return result;\n    },\n    previousElement: localFilter => {\n      temporaryFilter = localFilter;\n      const result = treeWalker.previousNode() as HTMLElement | null;\n      temporaryFilter = undefined;\n      return result;\n    },\n    previousSibling: localFilter => {\n      temporaryFilter = localFilter;\n      const result = treeWalker.previousSibling() as HTMLElement | null;\n      temporaryFilter = undefined;\n      return result;\n    },\n  };\n}\n\nexport const useHTMLElementWalkerRef = (filter?: HTMLElementFilter) => {\n  const walkerRef = React.useRef<HTMLElementWalker>();\n\n  const rootRefCallback = (element?: HTMLElement) => {\n    if (!element) {\n      walkerRef.current = undefined;\n      return;\n    }\n    walkerRef.current = createHTMLElementWalker(element, filter);\n  };\n  return [walkerRef as React.RefObject<HTMLElementWalker>, rootRefCallback as React.Ref<HTMLElement>] as const;\n};\n"],"mappings":"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"}