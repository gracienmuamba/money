{"version":3,"names":["React","require","AvatarGroupContext_1","useAvatarGroup_1","react_utilities_1","react_icons_1","react_popover_1","react_tooltip_1","useAvatarGroupPopover_unstable","props","size","_a","useAvatarGroupContext_unstable","ctx","defaultAvatarGroupSize","layout","indicator","count","Children","children","restOfProps","popoverOpen","setPopoverOpen","useControllableState","state","open","defaultState","defaultOpen","initialState","handleOnPopoverChange","e","data","onOpenChange","call","triggerButtonChildren","createElement","MoreHorizontalRegular","components","root","Popover","triggerButton","content","popoverSurface","PopoverSurface","tooltip","Tooltip","Fragment","trapFocus","resolveShorthand","required","defaultProps","type","role","tabIndex","relationship","exports"],"sources":["../src/packages/react-components/react-avatar/src/components/AvatarGroupPopover/useAvatarGroupPopover.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useAvatarGroupContext_unstable } from '../../contexts/AvatarGroupContext';\nimport { defaultAvatarGroupSize } from '../AvatarGroup/useAvatarGroup';\nimport { resolveShorthand, useControllableState } from '@fluentui/react-utilities';\nimport { MoreHorizontalRegular } from '@fluentui/react-icons';\nimport { OnOpenChangeData, OpenPopoverEvents, Popover, PopoverSurface } from '@fluentui/react-popover';\nimport type { AvatarGroupPopoverProps, AvatarGroupPopoverState } from './AvatarGroupPopover.types';\nimport { Tooltip } from '@fluentui/react-tooltip';\n\n/**\n * Create the state required to render AvatarGroupPopover.\n *\n * The returned state can be modified with hooks such as useAvatarGroupPopoverStyles_unstable,\n * before being passed to renderAvatarGroupPopover_unstable.\n *\n * @param props - props from this instance of AvatarGroupPopover\n */\nexport const useAvatarGroupPopover_unstable = (props: AvatarGroupPopoverProps): AvatarGroupPopoverState => {\n  const size = useAvatarGroupContext_unstable(ctx => ctx.size) ?? defaultAvatarGroupSize;\n  const layout = useAvatarGroupContext_unstable(ctx => ctx.layout);\n  const {\n    indicator = size < 24 ? 'icon' : 'count',\n    count = React.Children.count(props.children),\n    children,\n    ...restOfProps\n  } = props;\n\n  const [popoverOpen, setPopoverOpen] = useControllableState({\n    state: props.open,\n    defaultState: props.defaultOpen,\n    initialState: false,\n  });\n\n  const handleOnPopoverChange = (e: OpenPopoverEvents, data: OnOpenChangeData) => {\n    restOfProps.onOpenChange?.(e, data);\n    setPopoverOpen(data.open);\n  };\n\n  let triggerButtonChildren;\n  if (layout === 'pie') {\n    triggerButtonChildren = null;\n  } else if (indicator === 'icon') {\n    triggerButtonChildren = <MoreHorizontalRegular />;\n  } else {\n    triggerButtonChildren = count > 99 ? '99+' : `+${count}`;\n  }\n\n  return {\n    count,\n    indicator,\n    layout,\n    popoverOpen,\n    size,\n\n    components: {\n      root: Popover,\n      triggerButton: 'button',\n      content: 'ul',\n      popoverSurface: PopoverSurface,\n      tooltip: Tooltip,\n    },\n    root: {\n      // Popover expects a child for its children. The children are added in the renderAvatarGroupPopover.\n      children: <></>,\n      size: 'small',\n      trapFocus: true,\n      ...restOfProps,\n      open: popoverOpen,\n      onOpenChange: handleOnPopoverChange,\n    },\n    triggerButton: resolveShorthand(props.triggerButton, {\n      required: true,\n      defaultProps: {\n        children: triggerButtonChildren,\n        type: 'button',\n      },\n    }),\n    content: resolveShorthand(props.content, {\n      required: true,\n      defaultProps: {\n        children,\n        role: 'list',\n      },\n    }),\n    popoverSurface: resolveShorthand(props.popoverSurface, {\n      required: true,\n      defaultProps: {\n        'aria-label': 'Overflow',\n        tabIndex: 0,\n      },\n    }),\n    tooltip: resolveShorthand(props.tooltip, {\n      required: true,\n      defaultProps: {\n        content: 'View more people.',\n        relationship: 'label',\n      },\n    }),\n  };\n};\n"],"mappings":"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"}