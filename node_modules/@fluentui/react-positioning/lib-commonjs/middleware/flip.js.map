{"version":3,"names":["dom_1","require","index_1","flip","options","hasScrollableElement","flipBoundary","container","fallbackPositions","isRtl","fallbackPlacements","reduce","acc","shorthand","position","align","resolvePositioningShorthand","placement","toFloatingUIPlacement","push","boundary","altBoundary","getBoundary","fallbackStrategy","length","exports"],"sources":["../src/packages/react-components/react-positioning/src/middleware/flip.ts"],"sourcesContent":["import { flip as baseFlip, Placement } from '@floating-ui/dom';\nimport type { PositioningOptions } from '../types';\nimport { getBoundary, resolvePositioningShorthand, toFloatingUIPlacement } from '../utils/index';\n\nexport interface FlipMiddlewareOptions extends Pick<PositioningOptions, 'flipBoundary' | 'fallbackPositions'> {\n  hasScrollableElement?: boolean;\n  container: HTMLElement | null;\n  isRtl?: boolean;\n}\n\nexport function flip(options: FlipMiddlewareOptions) {\n  const { hasScrollableElement, flipBoundary, container, fallbackPositions = [], isRtl } = options;\n\n  const fallbackPlacements = fallbackPositions.reduce<Placement[]>((acc, shorthand) => {\n    const { position, align } = resolvePositioningShorthand(shorthand);\n    const placement = toFloatingUIPlacement(align, position, isRtl);\n    if (placement) {\n      acc.push(placement);\n    }\n    return acc;\n  }, []);\n\n  return baseFlip({\n    ...(hasScrollableElement && { boundary: 'clippingAncestors' }),\n    ...(flipBoundary && { altBoundary: true, boundary: getBoundary(container, flipBoundary) }),\n    fallbackStrategy: 'bestFit',\n    ...(fallbackPlacements.length && { fallbackPlacements }),\n  });\n}\n"],"mappings":";;;;;;AAAA,MAAAA,KAAA,gBAAAC,OAAA;AAEA,MAAAC,OAAA,gBAAAD,OAAA;AAQA,SAAgBE,IAAIA,CAACC,OAA8B;EACjD,MAAM;IAAEC,oBAAoB;IAAEC,YAAY;IAAEC,SAAS;IAAEC,iBAAiB,GAAG,EAAE;IAAEC;EAAK,CAAE,GAAGL,OAAO;EAEhG,MAAMM,kBAAkB,GAAGF,iBAAiB,CAACG,MAAM,CAAc,CAACC,GAAG,EAAEC,SAAS,KAAI;IAClF,MAAM;MAAEC,QAAQ;MAAEC;IAAK,CAAE,GAAGb,OAAA,CAAAc,2BAA2B,CAACH,SAAS,CAAC;IAClE,MAAMI,SAAS,GAAGf,OAAA,CAAAgB,qBAAqB,CAACH,KAAK,EAAED,QAAQ,EAAEL,KAAK,CAAC;IAC/D,IAAIQ,SAAS,EAAE;MACbL,GAAG,CAACO,IAAI,CAACF,SAAS,CAAC;;IAErB,OAAOL,GAAG;EACZ,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOZ,KAAA,CAAAG,IAAQ,CAAC;IACd,IAAIE,oBAAoB,IAAI;MAAEe,QAAQ,EAAE;IAAmB,CAAE,CAAC;IAC9D,IAAId,YAAY,IAAI;MAAEe,WAAW,EAAE,IAAI;MAAED,QAAQ,EAAElB,OAAA,CAAAoB,WAAW,CAACf,SAAS,EAAED,YAAY;IAAC,CAAE,CAAC;IAC1FiB,gBAAgB,EAAE,SAAS;IAC3B,IAAIb,kBAAkB,CAACc,MAAM,IAAI;MAAEd;IAAkB,CAAE;GACxD,CAAC;AACJ;AAlBAe,OAAA,CAAAtB,IAAA,GAAAA,IAAA"}