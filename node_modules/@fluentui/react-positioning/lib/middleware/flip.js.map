{"version":3,"names":["flip","baseFlip","getBoundary","resolvePositioningShorthand","toFloatingUIPlacement","options","hasScrollableElement","flipBoundary","container","fallbackPositions","isRtl","fallbackPlacements","reduce","acc","shorthand","position","align","placement","push","boundary","altBoundary","fallbackStrategy","length"],"sources":["../src/packages/react-components/react-positioning/src/middleware/flip.ts"],"sourcesContent":["import { flip as baseFlip, Placement } from '@floating-ui/dom';\nimport type { PositioningOptions } from '../types';\nimport { getBoundary, resolvePositioningShorthand, toFloatingUIPlacement } from '../utils/index';\n\nexport interface FlipMiddlewareOptions extends Pick<PositioningOptions, 'flipBoundary' | 'fallbackPositions'> {\n  hasScrollableElement?: boolean;\n  container: HTMLElement | null;\n  isRtl?: boolean;\n}\n\nexport function flip(options: FlipMiddlewareOptions) {\n  const { hasScrollableElement, flipBoundary, container, fallbackPositions = [], isRtl } = options;\n\n  const fallbackPlacements = fallbackPositions.reduce<Placement[]>((acc, shorthand) => {\n    const { position, align } = resolvePositioningShorthand(shorthand);\n    const placement = toFloatingUIPlacement(align, position, isRtl);\n    if (placement) {\n      acc.push(placement);\n    }\n    return acc;\n  }, []);\n\n  return baseFlip({\n    ...(hasScrollableElement && { boundary: 'clippingAncestors' }),\n    ...(flipBoundary && { altBoundary: true, boundary: getBoundary(container, flipBoundary) }),\n    fallbackStrategy: 'bestFit',\n    ...(fallbackPlacements.length && { fallbackPlacements }),\n  });\n}\n"],"mappings":"AAAA,SAASA,IAAI,IAAIC,QAAQ,QAAmB,kBAAkB;AAE9D,SAASC,WAAW,EAAEC,2BAA2B,EAAEC,qBAAqB,QAAQ,gBAAgB;AAQhG,OAAM,SAAUJ,IAAIA,CAACK,OAA8B;EACjD,MAAM;IAAEC,oBAAoB;IAAEC,YAAY;IAAEC,SAAS;IAAEC,iBAAiB,GAAG,EAAE;IAAEC;EAAK,CAAE,GAAGL,OAAO;EAEhG,MAAMM,kBAAkB,GAAGF,iBAAiB,CAACG,MAAM,CAAc,CAACC,GAAG,EAAEC,SAAS,KAAI;IAClF,MAAM;MAAEC,QAAQ;MAAEC;IAAK,CAAE,GAAGb,2BAA2B,CAACW,SAAS,CAAC;IAClE,MAAMG,SAAS,GAAGb,qBAAqB,CAACY,KAAK,EAAED,QAAQ,EAAEL,KAAK,CAAC;IAC/D,IAAIO,SAAS,EAAE;MACbJ,GAAG,CAACK,IAAI,CAACD,SAAS,CAAC;;IAErB,OAAOJ,GAAG;EACZ,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOZ,QAAQ,CAAC;IACd,IAAIK,oBAAoB,IAAI;MAAEa,QAAQ,EAAE;IAAmB,CAAE,CAAC;IAC9D,IAAIZ,YAAY,IAAI;MAAEa,WAAW,EAAE,IAAI;MAAED,QAAQ,EAAEjB,WAAW,CAACM,SAAS,EAAED,YAAY;IAAC,CAAE,CAAC;IAC1Fc,gBAAgB,EAAE,SAAS;IAC3B,IAAIV,kBAAkB,CAACW,MAAM,IAAI;MAAEX;IAAkB,CAAE;GACxD,CAAC;AACJ"}