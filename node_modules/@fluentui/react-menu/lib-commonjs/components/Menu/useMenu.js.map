{"version":3,"names":["React","require","react_positioning_1","react_utilities_1","react_shared_contexts_1","react_portal_1","react_tabster_1","menuContext_1","index_1","useIsSubmenu_1","submenuFallbackPositions","useMenu_unstable","props","isSubmenu","useIsSubmenu","hoverDelay","inline","hasCheckmarks","hasIcons","closeOnScroll","openOnContext","persistOnItemClick","openOnHover","defaultCheckedValues","mountNode","triggerId","useId","contextTarget","setContextTarget","usePositioningMouseTarget","positioningState","position","align","target","undefined","fallbackPositions","resolvePositioningShorthand","positioning","children","Children","toArray","process","env","NODE_ENV","length","console","warn","menuTrigger","menuPopover","targetRef","triggerRef","containerRef","menuPopoverRef","usePositioning","open","setOpen","useMenuOpenState","defaultOpen","onOpenChange","checkedValues","onCheckedValueChange","useMenuSelectableState","components","exports","setCheckedValues","useControllableState","state","defaultState","initialState","useEventCallback","e","name","checkedItems","_a","call","currentValue","targetDocument","useFluent_unstable","parentSetOpen","useMenuContext_unstable","context","data","shouldHandleCloseRef","useRef","setOpenTimeout","enteringTriggerRef","setOpenState","trySetOpen","event","CustomEvent","type","MENU_ENTER_EVENT","detail","nativeEvent","current","bubble","clearTimeout","Event","persist","contains","setTimeout","useOnClickOutside","elementContains","disabled","element","refs","filter","Boolean","callback","useOnScrollOutside","useOnMenuMouseEnter","useEffect","findFirstFocusable","useFocusFinders","focusFirst","useCallback","firstFocusable","focus"],"sources":["../src/packages/react-components/react-menu/src/components/Menu/useMenu.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  usePositioningMouseTarget,\n  usePositioning,\n  resolvePositioningShorthand,\n  PositioningShorthandValue,\n} from '@fluentui/react-positioning';\nimport {\n  useControllableState,\n  useId,\n  useOnClickOutside,\n  useEventCallback,\n  useOnScrollOutside,\n} from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { elementContains } from '@fluentui/react-portal';\nimport { useFocusFinders } from '@fluentui/react-tabster';\nimport { useMenuContext_unstable } from '../../contexts/menuContext';\nimport { MENU_ENTER_EVENT, useOnMenuMouseEnter } from '../../utils/index';\nimport { useIsSubmenu } from '../../utils/useIsSubmenu';\nimport type { MenuOpenChangeData, MenuOpenEvent, MenuProps, MenuState } from './Menu.types';\n\n// If it's not possible to position the submenu in smaller viewports, try\n// and fallback to this order of positions\nconst submenuFallbackPositions: PositioningShorthandValue[] = [\n  'after',\n  'after-bottom',\n  'before-top',\n  'before',\n  'before-bottom',\n  'above',\n];\n\n/**\n * Create the state required to render Menu.\n *\n * The returned state can be modified with hooks such as useMenuStyles,\n * before being passed to renderMenu_unstable.\n *\n * @param props - props from this instance of Menu\n */\nexport const useMenu_unstable = (props: MenuProps): MenuState => {\n  const isSubmenu = useIsSubmenu();\n  const {\n    hoverDelay = 500,\n    inline = false,\n    hasCheckmarks = false,\n    hasIcons = false,\n    closeOnScroll = false,\n    openOnContext = false,\n    persistOnItemClick = false,\n    openOnHover = isSubmenu,\n    defaultCheckedValues,\n    mountNode = null,\n  } = props;\n  const triggerId = useId('menu');\n  const [contextTarget, setContextTarget] = usePositioningMouseTarget();\n\n  const positioningState = {\n    position: isSubmenu ? 'after' : 'below',\n    align: isSubmenu ? 'top' : 'start',\n    target: props.openOnContext ? contextTarget : undefined,\n    fallbackPositions: isSubmenu ? submenuFallbackPositions : undefined,\n    ...resolvePositioningShorthand(props.positioning),\n  } as const;\n\n  const children = React.Children.toArray(props.children) as React.ReactElement[];\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (children.length === 0) {\n      // eslint-disable-next-line no-console\n      console.warn('Menu must contain at least one child');\n    }\n\n    if (children.length > 2) {\n      // eslint-disable-next-line no-console\n      console.warn('Menu must contain at most two children');\n    }\n  }\n\n  let menuTrigger: React.ReactElement | undefined = undefined;\n  let menuPopover: React.ReactElement | undefined = undefined;\n  if (children.length === 2) {\n    menuTrigger = children[0];\n    menuPopover = children[1];\n  } else if (children.length === 1) {\n    menuPopover = children[0];\n  }\n\n  const { targetRef: triggerRef, containerRef: menuPopoverRef } = usePositioning(positioningState);\n\n  // TODO Better way to narrow types ?\n  const [open, setOpen] = useMenuOpenState({\n    hoverDelay,\n    isSubmenu,\n    setContextTarget,\n    closeOnScroll,\n    menuPopoverRef,\n    triggerRef,\n    open: props.open,\n    defaultOpen: props.defaultOpen,\n    onOpenChange: props.onOpenChange,\n    openOnContext,\n  });\n\n  const [checkedValues, onCheckedValueChange] = useMenuSelectableState({\n    checkedValues: props.checkedValues,\n    defaultCheckedValues,\n    onCheckedValueChange: props.onCheckedValueChange,\n  });\n\n  return {\n    inline,\n    hoverDelay,\n    triggerId,\n    isSubmenu,\n    openOnHover,\n    contextTarget,\n    setContextTarget,\n    hasCheckmarks,\n    hasIcons,\n    closeOnScroll,\n    menuTrigger,\n    menuPopover,\n    mountNode,\n    triggerRef,\n    menuPopoverRef,\n    components: {},\n    openOnContext,\n    open,\n    setOpen,\n    checkedValues,\n    onCheckedValueChange,\n    persistOnItemClick,\n  };\n};\n\n/**\n * Adds appropriate state values and handlers for selectable items\n * i.e checkboxes and radios\n */\nconst useMenuSelectableState = (\n  props: Pick<MenuProps, 'checkedValues' | 'defaultCheckedValues' | 'onCheckedValueChange'>,\n) => {\n  const [checkedValues, setCheckedValues] = useControllableState({\n    state: props.checkedValues,\n    defaultState: props.defaultCheckedValues,\n    initialState: {},\n  });\n  const onCheckedValueChange: MenuState['onCheckedValueChange'] = useEventCallback((e, { name, checkedItems }) => {\n    props.onCheckedValueChange?.(e, { name, checkedItems });\n\n    setCheckedValues(currentValue => ({\n      ...currentValue,\n      [name]: checkedItems,\n    }));\n  });\n\n  return [checkedValues, onCheckedValueChange] as const;\n};\n\nconst useMenuOpenState = (\n  state: Pick<\n    MenuState,\n    | 'isSubmenu'\n    | 'menuPopoverRef'\n    | 'setContextTarget'\n    | 'triggerRef'\n    | 'openOnContext'\n    | 'closeOnScroll'\n    | 'hoverDelay'\n  > &\n    Pick<MenuProps, 'open' | 'defaultOpen' | 'onOpenChange'>,\n) => {\n  const { targetDocument } = useFluent();\n  const parentSetOpen = useMenuContext_unstable(context => context.setOpen);\n  const onOpenChange: MenuProps['onOpenChange'] = useEventCallback((e, data) => state.onOpenChange?.(e, data));\n\n  const shouldHandleCloseRef = React.useRef(false);\n  const setOpenTimeout = React.useRef(0);\n  const enteringTriggerRef = React.useRef(false);\n\n  const [open, setOpenState] = useControllableState({\n    state: state.open,\n    defaultState: state.defaultOpen,\n    initialState: false,\n  });\n\n  const trySetOpen = useEventCallback((e: MenuOpenEvent, data: MenuOpenChangeData) => {\n    const event = e instanceof CustomEvent && e.type === MENU_ENTER_EVENT ? e.detail.nativeEvent : e;\n    onOpenChange?.(event, { ...data });\n    if (data.open && e.type === 'contextmenu') {\n      state.setContextTarget(e as React.MouseEvent);\n    }\n\n    if (!data.open) {\n      state.setContextTarget(undefined);\n      shouldHandleCloseRef.current = true;\n    }\n\n    if (data.bubble) {\n      parentSetOpen(e, { ...data });\n    }\n\n    setOpenState(data.open);\n  });\n\n  const setOpen = useEventCallback((e: MenuOpenEvent, data: MenuOpenChangeData) => {\n    clearTimeout(setOpenTimeout.current);\n    if (!(e instanceof Event) && e.persist) {\n      // < React 17 still uses pooled synthetic events\n      e.persist();\n    }\n\n    if (e.type === 'mouseleave' || e.type === 'mouseenter' || e.type === 'mousemove' || e.type === MENU_ENTER_EVENT) {\n      if (state.triggerRef.current?.contains(e.target as HTMLElement)) {\n        enteringTriggerRef.current = e.type === 'mouseenter' || e.type === 'mousemove';\n      }\n\n      // FIXME leaking Node timeout type\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      setOpenTimeout.current = setTimeout(() => trySetOpen(e, data), state.hoverDelay);\n    } else {\n      trySetOpen(e, data);\n    }\n  });\n\n  useOnClickOutside({\n    contains: elementContains,\n    disabled: !open,\n    element: targetDocument,\n    refs: [state.menuPopoverRef, !state.openOnContext && state.triggerRef].filter(\n      Boolean,\n    ) as React.MutableRefObject<HTMLElement>[],\n    callback: event => setOpen(event, { open: false, type: 'clickOutside', event }),\n  });\n\n  // only close on scroll for context, or when closeOnScroll is specified\n  const closeOnScroll = state.openOnContext || state.closeOnScroll;\n  useOnScrollOutside({\n    contains: elementContains,\n    element: targetDocument,\n    callback: event => setOpen(event, { open: false, type: 'scrollOutside', event }),\n    refs: [state.menuPopoverRef, !state.openOnContext && state.triggerRef].filter(\n      Boolean,\n    ) as React.MutableRefObject<HTMLElement>[],\n    disabled: !open || !closeOnScroll,\n  });\n\n  useOnMenuMouseEnter({\n    element: targetDocument,\n    callback: event => {\n      // When moving from a menu directly back to its trigger, this handler can close the menu\n      // Explicitly check a flag to see if this situation happens\n      if (!enteringTriggerRef.current) {\n        setOpen(event, { open: false, type: 'menuMouseEnter', event });\n      }\n    },\n    disabled: !open,\n    refs: [state.menuPopoverRef],\n  });\n\n  // Clear timeout on unmount\n  // Setting state after a component unmounts can cause memory leaks\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(setOpenTimeout.current);\n    };\n  }, []);\n\n  // Manage focus for open state\n  const { findFirstFocusable } = useFocusFinders();\n  const focusFirst = React.useCallback(() => {\n    const firstFocusable = findFirstFocusable(state.menuPopoverRef.current);\n    firstFocusable?.focus();\n  }, [findFirstFocusable, state.menuPopoverRef]);\n\n  React.useEffect(() => {\n    if (open) {\n      focusFirst();\n    } else {\n      if (shouldHandleCloseRef.current) {\n        // We know that React effects are sync so we focus the trigger here\n        // after any event handler (event handlers will update state and re-render).\n        // Since the browser only performs the default behaviour for the Tab key once\n        // keyboard events have fully bubbled up the window, the browser will move\n        // focus to the next tabbable element before/after the trigger if needed.\n        // If the Tab key was not pressed, focus will remain on the trigger as expected.\n        state.triggerRef.current?.focus();\n      }\n    }\n\n    shouldHandleCloseRef.current = false;\n  }, [state.triggerRef, state.isSubmenu, open, focusFirst]);\n\n  return [open, setOpen] as const;\n};\n"],"mappings":"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"}