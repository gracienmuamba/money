{"version":3,"names":["React","require","react_utilities_1","react_shared_contexts_1","useCharacterSearch_1","menuTriggerContext_1","react_icons_1","menuListContext_1","menuContext_1","react_aria_1","keyboard_keys_1","ChevronRightIcon","bundleIcon","ChevronRightFilled","ChevronRightRegular","ChevronLeftIcon","ChevronLeftFilled","ChevronLeftRegular","useMenuItem_unstable","props","ref","isSubmenuTrigger","useMenuTriggerContext_unstable","persistOnClickContext","useMenuContext_unstable","context","persistOnItemClick","as","disabled","hasSubmenu","persistOnClick","hasIcons","useMenuListContext_unstable","hasCheckmarks","setOpen","dir","useFluent_unstable","innerRef","useRef","dismissedWithKeyboardRef","state","components","root","icon","checkmark","submenuIndicator","content","secondaryContent","getNativeElementProps","useARIAButtonProps","role","disabledFocusable","useMergedRefs","onKeyDown","useEventCallback","event","_a","call","isDefaultPrevented","key","Space","Enter","current","onMouseEnter","focus","_b","onClick","open","keyboard","bubble","type","resolveShorthand","required","defaultProps","children","createElement","useCharacterSearch","exports"],"sources":["../src/packages/react-components/react-menu/src/components/MenuItem/useMenuItem.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useEventCallback, resolveShorthand, useMergedRefs, getNativeElementProps } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { useCharacterSearch } from './useCharacterSearch';\nimport { useMenuTriggerContext_unstable } from '../../contexts/menuTriggerContext';\nimport {\n  ChevronRightFilled,\n  ChevronRightRegular,\n  ChevronLeftFilled,\n  ChevronLeftRegular,\n  bundleIcon,\n} from '@fluentui/react-icons';\nimport { useMenuListContext_unstable } from '../../contexts/menuListContext';\nimport { useMenuContext_unstable } from '../../contexts/menuContext';\nimport type { MenuItemProps, MenuItemState } from './MenuItem.types';\nimport { ARIAButtonElement, ARIAButtonElementIntersection, useARIAButtonProps } from '@fluentui/react-aria';\nimport { Enter, Space } from '@fluentui/keyboard-keys';\n\nconst ChevronRightIcon = bundleIcon(ChevronRightFilled, ChevronRightRegular);\nconst ChevronLeftIcon = bundleIcon(ChevronLeftFilled, ChevronLeftRegular);\n\n/**\n * Returns the props and state required to render the component\n */\nexport const useMenuItem_unstable = (props: MenuItemProps, ref: React.Ref<ARIAButtonElement<'div'>>): MenuItemState => {\n  const isSubmenuTrigger = useMenuTriggerContext_unstable();\n  const persistOnClickContext = useMenuContext_unstable(context => context.persistOnItemClick);\n  const { as = 'div', disabled = false, hasSubmenu = isSubmenuTrigger, persistOnClick = persistOnClickContext } = props;\n  const hasIcons = useMenuListContext_unstable(context => context.hasIcons);\n  const hasCheckmarks = useMenuListContext_unstable(context => context.hasCheckmarks);\n  const setOpen = useMenuContext_unstable(context => context.setOpen);\n\n  const { dir } = useFluent();\n  const innerRef = React.useRef<ARIAButtonElementIntersection<'div'>>(null);\n  const dismissedWithKeyboardRef = React.useRef(false);\n\n  const state: MenuItemState = {\n    hasSubmenu,\n    disabled,\n    persistOnClick,\n    components: {\n      root: 'div',\n      icon: 'span',\n      checkmark: 'span',\n      submenuIndicator: 'span',\n      content: 'span',\n      secondaryContent: 'span',\n    },\n    root: getNativeElementProps(\n      as,\n      useARIAButtonProps(as, {\n        role: 'menuitem',\n        ...props,\n        disabled: false,\n        disabledFocusable: disabled,\n        ref: useMergedRefs(ref, innerRef) as React.Ref<ARIAButtonElementIntersection<'div'>>,\n        onKeyDown: useEventCallback(event => {\n          props.onKeyDown?.(event);\n          if (!event.isDefaultPrevented() && (event.key === Space || event.key === Enter)) {\n            dismissedWithKeyboardRef.current = true;\n          }\n        }),\n        onMouseEnter: useEventCallback(event => {\n          innerRef.current?.focus();\n\n          props.onMouseEnter?.(event);\n        }),\n        onClick: useEventCallback(event => {\n          if (!hasSubmenu && !persistOnClick) {\n            setOpen(event, {\n              open: false,\n              keyboard: dismissedWithKeyboardRef.current,\n              bubble: true,\n              type: 'menuItemClick',\n              event,\n            });\n            dismissedWithKeyboardRef.current = false;\n          }\n\n          props.onClick?.(event);\n        }),\n      }),\n    ),\n    icon: resolveShorthand(props.icon, { required: hasIcons }),\n    checkmark: resolveShorthand(props.checkmark, { required: hasCheckmarks }),\n    submenuIndicator: resolveShorthand(props.submenuIndicator, {\n      required: hasSubmenu,\n      defaultProps: {\n        children: dir === 'ltr' ? <ChevronRightIcon /> : <ChevronLeftIcon />,\n      },\n    }),\n    content: resolveShorthand(props.content, {\n      required: !!props.children,\n      defaultProps: { children: props.children },\n    }),\n    secondaryContent: resolveShorthand(props.secondaryContent),\n  };\n  useCharacterSearch(state, innerRef);\n  return state;\n};\n"],"mappings":";;;;;;AAAA,MAAAA,KAAA,gBAAAC,OAAA;AACA,MAAAC,iBAAA,gBAAAD,OAAA;AACA,MAAAE,uBAAA,gBAAAF,OAAA;AACA,MAAAG,oBAAA,gBAAAH,OAAA;AACA,MAAAI,oBAAA,gBAAAJ,OAAA;AACA,MAAAK,aAAA,gBAAAL,OAAA;AAOA,MAAAM,iBAAA,gBAAAN,OAAA;AACA,MAAAO,aAAA,gBAAAP,OAAA;AAEA,MAAAQ,YAAA,gBAAAR,OAAA;AACA,MAAAS,eAAA,gBAAAT,OAAA;AAEA,MAAMU,gBAAgB,gBAAGL,aAAA,CAAAM,UAAU,CAACN,aAAA,CAAAO,kBAAkB,EAAEP,aAAA,CAAAQ,mBAAmB,CAAC;AAC5E,MAAMC,eAAe,gBAAGT,aAAA,CAAAM,UAAU,CAACN,aAAA,CAAAU,iBAAiB,EAAEV,aAAA,CAAAW,kBAAkB,CAAC;AAEzE;;;AAGO,MAAMC,oBAAoB,GAAGA,CAACC,KAAoB,EAAEC,GAAwC,KAAmB;EACpH,MAAMC,gBAAgB,GAAGhB,oBAAA,CAAAiB,8BAA8B,EAAE;EACzD,MAAMC,qBAAqB,GAAGf,aAAA,CAAAgB,uBAAuB,CAACC,OAAO,IAAIA,OAAO,CAACC,kBAAkB,CAAC;EAC5F,MAAM;IAAEC,EAAE,GAAG,KAAK;IAAEC,QAAQ,GAAG,KAAK;IAAEC,UAAU,GAAGR,gBAAgB;IAAES,cAAc,GAAGP;EAAqB,CAAE,GAAGJ,KAAK;EACrH,MAAMY,QAAQ,GAAGxB,iBAAA,CAAAyB,2BAA2B,CAACP,OAAO,IAAIA,OAAO,CAACM,QAAQ,CAAC;EACzE,MAAME,aAAa,GAAG1B,iBAAA,CAAAyB,2BAA2B,CAACP,OAAO,IAAIA,OAAO,CAACQ,aAAa,CAAC;EACnF,MAAMC,OAAO,GAAG1B,aAAA,CAAAgB,uBAAuB,CAACC,OAAO,IAAIA,OAAO,CAACS,OAAO,CAAC;EAEnE,MAAM;IAAEC;EAAG,CAAE,GAAGhC,uBAAA,CAAAiC,kBAAS,EAAE;EAC3B,MAAMC,QAAQ,GAAGrC,KAAK,CAACsC,MAAM,CAAuC,IAAI,CAAC;EACzE,MAAMC,wBAAwB,GAAGvC,KAAK,CAACsC,MAAM,CAAC,KAAK,CAAC;EAEpD,MAAME,KAAK,GAAkB;IAC3BX,UAAU;IACVD,QAAQ;IACRE,cAAc;IACdW,UAAU,EAAE;MACVC,IAAI,EAAE,KAAK;MACXC,IAAI,EAAE,MAAM;MACZC,SAAS,EAAE,MAAM;MACjBC,gBAAgB,EAAE,MAAM;MACxBC,OAAO,EAAE,MAAM;MACfC,gBAAgB,EAAE;KACnB;IACDL,IAAI,EAAExC,iBAAA,CAAA8C,qBAAqB,CACzBrB,EAAE,EACFlB,YAAA,CAAAwC,kBAAkB,CAACtB,EAAE,EAAE;MACrBuB,IAAI,EAAE,UAAU;MAChB,GAAG/B,KAAK;MACRS,QAAQ,EAAE,KAAK;MACfuB,iBAAiB,EAAEvB,QAAQ;MAC3BR,GAAG,EAAElB,iBAAA,CAAAkD,aAAa,CAAChC,GAAG,EAAEiB,QAAQ,CAAoD;MACpFgB,SAAS,EAAEnD,iBAAA,CAAAoD,gBAAgB,CAACC,KAAK,IAAG;;QAClC,CAAAC,EAAA,GAAArC,KAAK,CAACkC,SAAS,cAAAG,EAAA,uBAAAA,EAAA,CAAAC,IAAA,CAAftC,KAAK,EAAaoC,KAAK,CAAC;QACxB,IAAI,CAACA,KAAK,CAACG,kBAAkB,EAAE,KAAKH,KAAK,CAACI,GAAG,KAAKjD,eAAA,CAAAkD,KAAK,IAAIL,KAAK,CAACI,GAAG,KAAKjD,eAAA,CAAAmD,KAAK,CAAC,EAAE;UAC/EtB,wBAAwB,CAACuB,OAAO,GAAG,IAAI;;MAE3C,CAAC,CAAC;MACFC,YAAY,EAAE7D,iBAAA,CAAAoD,gBAAgB,CAACC,KAAK,IAAG;;QACrC,CAAAC,EAAA,GAAAnB,QAAQ,CAACyB,OAAO,cAAAN,EAAA,uBAAAA,EAAA,CAAEQ,KAAK,EAAE;QAEzB,CAAAC,EAAA,GAAA9C,KAAK,CAAC4C,YAAY,cAAAE,EAAA,uBAAAA,EAAA,CAAAR,IAAA,CAAlBtC,KAAK,EAAgBoC,KAAK,CAAC;MAC7B,CAAC,CAAC;MACFW,OAAO,EAAEhE,iBAAA,CAAAoD,gBAAgB,CAACC,KAAK,IAAG;;QAChC,IAAI,CAAC1B,UAAU,IAAI,CAACC,cAAc,EAAE;UAClCI,OAAO,CAACqB,KAAK,EAAE;YACbY,IAAI,EAAE,KAAK;YACXC,QAAQ,EAAE7B,wBAAwB,CAACuB,OAAO;YAC1CO,MAAM,EAAE,IAAI;YACZC,IAAI,EAAE,eAAe;YACrBf;WACD,CAAC;UACFhB,wBAAwB,CAACuB,OAAO,GAAG,KAAK;;QAG1C,CAAAN,EAAA,GAAArC,KAAK,CAAC+C,OAAO,cAAAV,EAAA,uBAAAA,EAAA,CAAAC,IAAA,CAAbtC,KAAK,EAAWoC,KAAK,CAAC;MACxB,CAAC;KACF,CAAC,CACH;IACDZ,IAAI,EAAEzC,iBAAA,CAAAqE,gBAAgB,CAACpD,KAAK,CAACwB,IAAI,EAAE;MAAE6B,QAAQ,EAAEzC;IAAQ,CAAE,CAAC;IAC1Da,SAAS,EAAE1C,iBAAA,CAAAqE,gBAAgB,CAACpD,KAAK,CAACyB,SAAS,EAAE;MAAE4B,QAAQ,EAAEvC;IAAa,CAAE,CAAC;IACzEY,gBAAgB,EAAE3C,iBAAA,CAAAqE,gBAAgB,CAACpD,KAAK,CAAC0B,gBAAgB,EAAE;MACzD2B,QAAQ,EAAE3C,UAAU;MACpB4C,YAAY,EAAE;QACZC,QAAQ,EAAEvC,GAAG,KAAK,KAAK,GAAGnC,KAAA,CAAA2E,aAAA,CAAChE,gBAAgB,OAAG,GAAGX,KAAA,CAAA2E,aAAA,CAAC5D,eAAe;;KAEpE,CAAC;IACF+B,OAAO,EAAE5C,iBAAA,CAAAqE,gBAAgB,CAACpD,KAAK,CAAC2B,OAAO,EAAE;MACvC0B,QAAQ,EAAE,CAAC,CAACrD,KAAK,CAACuD,QAAQ;MAC1BD,YAAY,EAAE;QAAEC,QAAQ,EAAEvD,KAAK,CAACuD;MAAQ;KACzC,CAAC;IACF3B,gBAAgB,EAAE7C,iBAAA,CAAAqE,gBAAgB,CAACpD,KAAK,CAAC4B,gBAAgB;GAC1D;EACD3C,oBAAA,CAAAwE,kBAAkB,CAACpC,KAAK,EAAEH,QAAQ,CAAC;EACnC,OAAOG,KAAK;AACd,CAAC;AA3EYqC,OAAA,CAAA3D,oBAAoB,GAAAA,oBAAA"}