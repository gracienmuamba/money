{"version":3,"names":["React","require","react_utilities_1","index_1","react_aria_1","AccordionContext_1","react_icons_1","react_shared_contexts_1","useAccordionHeader_unstable","props","ref","as","icon","button","expandIcon","inline","size","expandIconPosition","onHeaderClick","onAccordionHeaderClick","disabled","open","useAccordionItemContext_unstable","disabledFocusable","useAccordionContext_unstable","ctx","collapsible","openItems","length","dir","useFluent_unstable","expandIconRotation","buttonShorthand","useARIAButtonShorthand","required","defaultProps","type","components","root","getNativeElementProps","resolveShorthand","children","createElement","ChevronRightRegular","style","transform","onClick","useEventCallback","ev","_a","call","defaultPrevented","exports"],"sources":["../src/packages/react-components/react-accordion/src/components/AccordionHeader/useAccordionHeader.tsx"],"sourcesContent":["import * as React from 'react';\nimport { getNativeElementProps, resolveShorthand, useEventCallback } from '@fluentui/react-utilities';\nimport { useAccordionItemContext_unstable } from '../AccordionItem/index';\nimport { useARIAButtonShorthand } from '@fluentui/react-aria';\nimport type { AccordionHeaderProps, AccordionHeaderState } from './AccordionHeader.types';\nimport { useAccordionContext_unstable } from '../Accordion/AccordionContext';\nimport { ChevronRightRegular } from '@fluentui/react-icons';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\n\n/**\n * Returns the props and state required to render the component\n * @param props - AccordionHeader properties\n * @param ref - reference to root HTMLElement of AccordionHeader\n */\nexport const useAccordionHeader_unstable = (\n  props: AccordionHeaderProps,\n  ref: React.Ref<HTMLElement>,\n): AccordionHeaderState => {\n  const { as, icon, button, expandIcon, inline = false, size = 'medium', expandIconPosition = 'start' } = props;\n  const { onHeaderClick: onAccordionHeaderClick, disabled, open } = useAccordionItemContext_unstable();\n\n  /**\n   * force disabled state on button if accordion isn't collapsible\n   * and this is the only item opened\n   */\n  const disabledFocusable = useAccordionContext_unstable(ctx => !ctx.collapsible && ctx.openItems.length === 1 && open);\n\n  const { dir } = useFluent();\n\n  // Calculate how to rotate the expand icon [>] (ChevronRightRegular)\n  let expandIconRotation: 0 | 90 | -90 | 180;\n  if (expandIconPosition === 'end') {\n    // If expand icon is at the end, the chevron points up [^] when open, and down [v] when closed\n    expandIconRotation = open ? -90 : 90;\n  } else {\n    // Otherwise, the chevron points down [v] when open, and right [>] (or left [<] in RTL) when closed\n    expandIconRotation = open ? 90 : dir !== 'rtl' ? 0 : 180;\n  }\n\n  const buttonShorthand = useARIAButtonShorthand(button, {\n    required: true,\n    defaultProps: {\n      disabled,\n      disabledFocusable,\n      'aria-expanded': open,\n      type: 'button',\n    },\n  });\n\n  return {\n    disabled,\n    open,\n    size,\n    inline,\n    expandIconPosition,\n    components: {\n      root: 'div',\n      button: 'button',\n      expandIcon: 'span',\n      icon: 'div',\n    },\n    root: getNativeElementProps(as || 'div', {\n      ref,\n      ...props,\n    }),\n    icon: resolveShorthand(icon),\n    expandIcon: resolveShorthand(expandIcon, {\n      required: true,\n      defaultProps: {\n        children: <ChevronRightRegular style={{ transform: `rotate(${expandIconRotation}deg)` }} />,\n        'aria-hidden': true,\n      },\n    }),\n    button: {\n      ...buttonShorthand,\n      onClick: useEventCallback(\n        (ev: React.MouseEvent<HTMLButtonElement & HTMLDivElement & HTMLSpanElement & HTMLAnchorElement>) => {\n          buttonShorthand.onClick?.(ev);\n          if (!ev.defaultPrevented) {\n            onAccordionHeaderClick(ev);\n          }\n        },\n      ),\n    },\n  };\n};\n"],"mappings":";;;;;;AAAA,MAAAA,KAAA,gBAAAC,OAAA;AACA,MAAAC,iBAAA,gBAAAD,OAAA;AACA,MAAAE,OAAA,gBAAAF,OAAA;AACA,MAAAG,YAAA,gBAAAH,OAAA;AAEA,MAAAI,kBAAA,gBAAAJ,OAAA;AACA,MAAAK,aAAA,gBAAAL,OAAA;AACA,MAAAM,uBAAA,gBAAAN,OAAA;AAEA;;;;;AAKO,MAAMO,2BAA2B,GAAGA,CACzCC,KAA2B,EAC3BC,GAA2B,KACH;EACxB,MAAM;IAAEC,EAAE;IAAEC,IAAI;IAAEC,MAAM;IAAEC,UAAU;IAAEC,MAAM,GAAG,KAAK;IAAEC,IAAI,GAAG,QAAQ;IAAEC,kBAAkB,GAAG;EAAO,CAAE,GAAGR,KAAK;EAC7G,MAAM;IAAES,aAAa,EAAEC,sBAAsB;IAAEC,QAAQ;IAAEC;EAAI,CAAE,GAAGlB,OAAA,CAAAmB,gCAAgC,EAAE;EAEpG;;;;EAIA,MAAMC,iBAAiB,GAAGlB,kBAAA,CAAAmB,4BAA4B,CAACC,GAAG,IAAI,CAACA,GAAG,CAACC,WAAW,IAAID,GAAG,CAACE,SAAS,CAACC,MAAM,KAAK,CAAC,IAAIP,IAAI,CAAC;EAErH,MAAM;IAAEQ;EAAG,CAAE,GAAGtB,uBAAA,CAAAuB,kBAAS,EAAE;EAE3B;EACA,IAAIC,kBAAsC;EAC1C,IAAId,kBAAkB,KAAK,KAAK,EAAE;IAChC;IACAc,kBAAkB,GAAGV,IAAI,GAAG,CAAC,EAAE,GAAG,EAAE;GACrC,MAAM;IACL;IACAU,kBAAkB,GAAGV,IAAI,GAAG,EAAE,GAAGQ,GAAG,KAAK,KAAK,GAAG,CAAC,GAAG,GAAG;;EAG1D,MAAMG,eAAe,GAAG5B,YAAA,CAAA6B,sBAAsB,CAACpB,MAAM,EAAE;IACrDqB,QAAQ,EAAE,IAAI;IACdC,YAAY,EAAE;MACZf,QAAQ;MACRG,iBAAiB;MACjB,eAAe,EAAEF,IAAI;MACrBe,IAAI,EAAE;;GAET,CAAC;EAEF,OAAO;IACLhB,QAAQ;IACRC,IAAI;IACJL,IAAI;IACJD,MAAM;IACNE,kBAAkB;IAClBoB,UAAU,EAAE;MACVC,IAAI,EAAE,KAAK;MACXzB,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,MAAM;MAClBF,IAAI,EAAE;KACP;IACD0B,IAAI,EAAEpC,iBAAA,CAAAqC,qBAAqB,CAAC5B,EAAE,IAAI,KAAK,EAAE;MACvCD,GAAG;MACH,GAAGD;KACJ,CAAC;IACFG,IAAI,EAAEV,iBAAA,CAAAsC,gBAAgB,CAAC5B,IAAI,CAAC;IAC5BE,UAAU,EAAEZ,iBAAA,CAAAsC,gBAAgB,CAAC1B,UAAU,EAAE;MACvCoB,QAAQ,EAAE,IAAI;MACdC,YAAY,EAAE;QACZM,QAAQ,EAAEzC,KAAA,CAAA0C,aAAA,CAACpC,aAAA,CAAAqC,mBAAmB;UAACC,KAAK,EAAE;YAAEC,SAAS,EAAE,UAAUd,kBAAkB;UAAM;QAAE,EAAI;QAC3F,aAAa,EAAE;;KAElB,CAAC;IACFlB,MAAM,EAAE;MACN,GAAGmB,eAAe;MAClBc,OAAO,EAAE5C,iBAAA,CAAA6C,gBAAgB,CACtBC,EAA8F,IAAI;;QACjG,CAAAC,EAAA,GAAAjB,eAAe,CAACc,OAAO,cAAAG,EAAA,uBAAAA,EAAA,CAAAC,IAAA,CAAvBlB,eAAe,EAAWgB,EAAE,CAAC;QAC7B,IAAI,CAACA,EAAE,CAACG,gBAAgB,EAAE;UACxBhC,sBAAsB,CAAC6B,EAAE,CAAC;;MAE9B,CAAC;;GAGN;AACH,CAAC;AAvEYI,OAAA,CAAA5C,2BAA2B,GAAAA,2BAAA"}