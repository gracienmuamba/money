{"version":3,"names":["React","require","react_utilities_1","keyboard_keys_1","index_1","react_icons_1","react_shared_contexts_1","DEFAULT_SPIN_DELAY_MS","MIN_SPIN_DELAY_MS","MAX_SPIN_TIME_MS","lerp","start","end","percent","useSpinButton_unstable","props","ref","nativeProps","getPartitionedNativeProps","primarySlotTagName","excludedPropNames","overrides","useOverrides_unstable","value","displayValue","defaultValue","min","max","step","stepPage","precision","precisionFromProps","onChange","size","appearance","_a","inputDefaultAppearance","root","input","incrementButton","decrementButton","useMemo","Math","calculatePrecision","currentValue","setCurrentValue","useControllableState","state","defaultState","initialState","isControlled","undefined","textValue","setTextValue","useState","keyboardSpinState","setKeyboardSpinState","internalState","useRef","spinState","spinTime","spinDelay","atBound","getBound","precisionRound","setStepTimeout","clearStepTimeout","useTimeout","stepValue","e","direction","startFrom","startValue","current","num","parseFloat","isNaN","val","dir","stepSize","stepStart","nullStep","clamp","commit","newValue","Number","handleInputChange","previousTextValue","String","target","handleIncrementMouseDown","handleDecrementMouseDown","handleStepMouseUpOrLeave","handleBlur","handleKeyDown","nextKeyboardSpinState","key","ArrowUp","ArrowDown","PageUp","preventDefault","PageDown","shiftKey","Home","End","Enter","Escape","handleKeyUp","newDisplayValue","valueChanged","displayValueChanged","roundedValue","nextValue","components","resolveShorthand","required","defaultProps","autoComplete","role","type","primary","tabIndex","children","createElement","ChevronUp16Regular","disabled","ChevronDown16Regular","valueToDisplay","_b","mergeCallbacks","onBlur","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onMouseLeave","exports"],"sources":["../src/packages/react-components/react-spinbutton/src/components/SpinButton/useSpinButton.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  getPartitionedNativeProps,\n  mergeCallbacks,\n  resolveShorthand,\n  useControllableState,\n  useTimeout,\n} from '@fluentui/react-utilities';\nimport { ArrowUp, ArrowDown, End, Enter, Escape, Home, PageDown, PageUp } from '@fluentui/keyboard-keys';\nimport {\n  SpinButtonProps,\n  SpinButtonState,\n  SpinButtonSpinState,\n  SpinButtonChangeEvent,\n  SpinButtonBounds,\n} from './SpinButton.types';\nimport { calculatePrecision, precisionRound, getBound, clamp } from '../../utils/index';\nimport { ChevronUp16Regular, ChevronDown16Regular } from '@fluentui/react-icons';\nimport { useOverrides_unstable as useOverrides } from '@fluentui/react-shared-contexts';\n\ntype InternalState = {\n  value: number | null;\n  spinState: SpinButtonSpinState;\n  spinTime: number;\n  spinDelay: number;\n  previousTextValue?: string;\n  atBound: SpinButtonBounds;\n};\n\nconst DEFAULT_SPIN_DELAY_MS = 150;\nconst MIN_SPIN_DELAY_MS = 80;\nconst MAX_SPIN_TIME_MS = 1000;\n\n// This is here to give an ease for the mouse held down case.\n// Exact easing it to be defined. Once it is we'll likely\n// pull this out into a util function in the SpinButton package.\nconst lerp = (start: number, end: number, percent: number): number => start + (end - start) * percent;\n\n/**\n * Create the state required to render SpinButton.\n *\n * The returned state can be modified with hooks such as useSpinButtonStyles_unstable,\n * before being passed to renderSpinButton_unstable.\n *\n * @param props - props from this instance of SpinButton\n * @param ref - reference to root HTMLElement of SpinButton\n */\nexport const useSpinButton_unstable = (props: SpinButtonProps, ref: React.Ref<HTMLInputElement>): SpinButtonState => {\n  const nativeProps = getPartitionedNativeProps({\n    props,\n    primarySlotTagName: 'input',\n    excludedPropNames: ['defaultValue', 'max', 'min', 'onChange', 'size', 'value'],\n  });\n\n  const overrides = useOverrides();\n\n  const {\n    value,\n    displayValue,\n    defaultValue,\n    min,\n    max,\n    step = 1,\n    stepPage = 1,\n    precision: precisionFromProps,\n    onChange,\n    size = 'medium',\n    appearance = overrides.inputDefaultAppearance ?? 'outline',\n    root,\n    input,\n    incrementButton,\n    decrementButton,\n  } = props;\n\n  const precision = React.useMemo(() => {\n    return precisionFromProps ?? Math.max(calculatePrecision(step), 0);\n  }, [precisionFromProps, step]);\n\n  const [currentValue, setCurrentValue] = useControllableState({\n    state: value,\n    defaultState: defaultValue,\n    initialState: 0,\n  });\n\n  const isControlled = value !== undefined;\n\n  const [textValue, setTextValue] = React.useState<string | undefined>(undefined);\n  const [keyboardSpinState, setKeyboardSpinState] = React.useState<SpinButtonSpinState>('rest');\n\n  const internalState = React.useRef<InternalState>({\n    value: currentValue,\n    spinState: 'rest',\n    spinTime: 0,\n    spinDelay: DEFAULT_SPIN_DELAY_MS,\n    atBound: currentValue !== null ? getBound(precisionRound(currentValue, precision), min, max) : 'none',\n  });\n\n  const [setStepTimeout, clearStepTimeout] = useTimeout();\n\n  const stepValue = (\n    e: SpinButtonChangeEvent,\n    direction: 'up' | 'down' | 'upPage' | 'downPage',\n    startFrom?: string,\n  ) => {\n    let startValue = internalState.current.value;\n    if (startFrom) {\n      const num = parseFloat(startFrom);\n      if (!isNaN(num)) {\n        startValue = num;\n      }\n    }\n    const val = startValue;\n    const dir = direction === 'up' || direction === 'upPage' ? 1 : -1;\n    const stepSize = direction === 'upPage' || direction === 'downPage' ? stepPage : step;\n\n    if (val === null) {\n      const stepStart = min === undefined ? 0 : min;\n      const nullStep = clamp(stepStart + stepSize * dir, min, max);\n      commit(e, nullStep);\n      return;\n    }\n\n    let newValue = val + stepSize * dir;\n    if (!Number.isNaN(newValue)) {\n      newValue = clamp(newValue, min, max);\n    }\n\n    commit(e, newValue);\n\n    if (internalState.current.spinState !== 'rest') {\n      setStepTimeout(() => {\n        // Ease the step speed a bit\n        internalState.current.spinTime += internalState.current.spinDelay;\n        internalState.current.spinDelay = lerp(\n          DEFAULT_SPIN_DELAY_MS,\n          MIN_SPIN_DELAY_MS,\n          internalState.current.spinTime / MAX_SPIN_TIME_MS,\n        );\n        stepValue(e, direction);\n      }, internalState.current.spinDelay);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!internalState.current.previousTextValue) {\n      internalState.current.previousTextValue = textValue ?? String(currentValue);\n    }\n    const newValue = e.target.value;\n    setTextValue(newValue);\n  };\n\n  const handleIncrementMouseDown = (e: React.MouseEvent<HTMLButtonElement>) => {\n    internalState.current.spinState = 'up';\n    stepValue(e, 'up');\n  };\n\n  const handleDecrementMouseDown = (e: React.MouseEvent<HTMLButtonElement>) => {\n    internalState.current.spinState = 'down';\n    stepValue(e, 'down');\n  };\n\n  const handleStepMouseUpOrLeave = (e: React.MouseEvent<HTMLButtonElement>) => {\n    clearStepTimeout();\n    internalState.current.spinState = 'rest';\n    internalState.current.spinDelay = DEFAULT_SPIN_DELAY_MS;\n    internalState.current.spinTime = 0;\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    commit(e, currentValue, textValue);\n    internalState.current.previousTextValue = undefined;\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    let nextKeyboardSpinState: SpinButtonSpinState = 'rest';\n\n    if (e.key === ArrowUp) {\n      stepValue(e, 'up', textValue);\n      nextKeyboardSpinState = 'up';\n    } else if (e.key === ArrowDown) {\n      stepValue(e, 'down', textValue);\n      nextKeyboardSpinState = 'down';\n    } else if (e.key === PageUp) {\n      e.preventDefault();\n      stepValue(e, 'upPage', textValue);\n      nextKeyboardSpinState = 'up';\n    } else if (e.key === PageDown) {\n      e.preventDefault();\n      stepValue(e, 'downPage', textValue);\n      nextKeyboardSpinState = 'down';\n    } else if (!e.shiftKey && e.key === Home && min !== undefined) {\n      commit(e, min);\n      nextKeyboardSpinState = 'down';\n    } else if (!e.shiftKey && e.key === End && max !== undefined) {\n      commit(e, max);\n      nextKeyboardSpinState = 'up';\n    } else if (e.key === Enter) {\n      commit(e, currentValue, textValue);\n      internalState.current.previousTextValue = undefined;\n    } else if (e.key === Escape) {\n      if (internalState.current.previousTextValue) {\n        setTextValue(undefined);\n        internalState.current.previousTextValue = undefined;\n      }\n    }\n\n    if (keyboardSpinState !== nextKeyboardSpinState) {\n      setKeyboardSpinState(nextKeyboardSpinState);\n    }\n  };\n\n  const handleKeyUp = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (keyboardSpinState !== 'rest') {\n      setKeyboardSpinState('rest');\n      internalState.current.spinState = 'rest';\n    }\n  };\n\n  const commit = (e: SpinButtonChangeEvent, newValue?: number | null, newDisplayValue?: string) => {\n    const valueChanged = newValue !== undefined && currentValue !== newValue;\n    const displayValueChanged =\n      newDisplayValue !== undefined &&\n      internalState.current.previousTextValue !== undefined &&\n      internalState.current.previousTextValue !== newDisplayValue;\n\n    let roundedValue;\n    if (valueChanged) {\n      roundedValue = precisionRound(newValue!, precision);\n      setCurrentValue(roundedValue);\n    } else if (displayValueChanged && !isControlled) {\n      const nextValue = parseFloat(newDisplayValue as string);\n      if (!isNaN(nextValue)) {\n        setCurrentValue(precisionRound(nextValue, precision));\n      }\n    }\n\n    if (valueChanged || displayValueChanged) {\n      onChange?.(e, { value: roundedValue, displayValue: newDisplayValue });\n    }\n\n    setTextValue(undefined);\n  };\n\n  const state: SpinButtonState = {\n    size,\n    appearance,\n    spinState: keyboardSpinState,\n    atBound: internalState.current.atBound,\n\n    components: {\n      root: 'span',\n      input: 'input',\n      incrementButton: 'button',\n      decrementButton: 'button',\n    },\n    root: resolveShorthand(root, {\n      required: true,\n      defaultProps: nativeProps.root,\n    }),\n    input: resolveShorthand(input, {\n      required: true,\n      defaultProps: {\n        ref,\n        autoComplete: 'off',\n        role: 'spinbutton',\n        appearance,\n        type: 'text',\n        ...nativeProps.primary,\n      },\n    }),\n    incrementButton: resolveShorthand(incrementButton, {\n      required: true,\n      defaultProps: {\n        tabIndex: -1,\n        children: <ChevronUp16Regular />,\n        disabled: nativeProps.primary.disabled,\n        'aria-label': 'Increment value',\n        type: 'button',\n      },\n    }),\n    decrementButton: resolveShorthand(decrementButton, {\n      required: true,\n      defaultProps: {\n        tabIndex: -1,\n        children: <ChevronDown16Regular />,\n        disabled: nativeProps.primary.disabled,\n        'aria-label': 'Decrement value',\n        type: 'button',\n      },\n    }),\n  };\n\n  let valueToDisplay;\n  if (textValue !== undefined) {\n    valueToDisplay = textValue;\n  } else if (value === null || currentValue === null) {\n    valueToDisplay = displayValue ?? '';\n    internalState.current.value = null;\n    internalState.current.atBound = 'none';\n  } else {\n    const roundedValue = precisionRound(currentValue, precision);\n    internalState.current.value = roundedValue;\n    internalState.current.atBound = getBound(roundedValue, min, max);\n    if (isControlled) {\n      valueToDisplay = displayValue ?? String(roundedValue);\n    } else {\n      valueToDisplay = String(roundedValue);\n    }\n  }\n\n  state.input.value = valueToDisplay;\n  state.input['aria-valuemin'] = min;\n  state.input['aria-valuemax'] = max;\n  state.input['aria-valuenow'] = currentValue ?? undefined;\n  state.input['aria-valuetext'] = state.input['aria-valuetext'] ?? ((value !== undefined && displayValue) || undefined);\n  state.input.onChange = mergeCallbacks(state.input.onChange, handleInputChange);\n  state.input.onBlur = mergeCallbacks(state.input.onBlur, handleBlur);\n  state.input.onKeyDown = mergeCallbacks(state.input.onKeyDown, handleKeyDown);\n  state.input.onKeyUp = mergeCallbacks(state.input.onKeyUp, handleKeyUp);\n\n  state.incrementButton.onMouseDown = mergeCallbacks(handleIncrementMouseDown, state.incrementButton.onMouseDown);\n  state.incrementButton.onMouseUp = mergeCallbacks(state.incrementButton.onMouseUp, handleStepMouseUpOrLeave);\n  state.incrementButton.onMouseLeave = mergeCallbacks(state.incrementButton.onMouseLeave, handleStepMouseUpOrLeave);\n\n  state.decrementButton.onMouseDown = mergeCallbacks(handleDecrementMouseDown, state.decrementButton.onMouseDown);\n  state.decrementButton.onMouseUp = mergeCallbacks(state.decrementButton.onMouseUp, handleStepMouseUpOrLeave);\n  state.decrementButton.onMouseLeave = mergeCallbacks(state.decrementButton.onMouseLeave, handleStepMouseUpOrLeave);\n\n  return state;\n};\n"],"mappings":"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"}