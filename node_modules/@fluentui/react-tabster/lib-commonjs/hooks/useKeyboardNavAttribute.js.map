{"version":3,"names":["keyborg_1","require","react_1","constants_1","react_shared_contexts_1","useKeyboardNavAttribute","targetDocument","useFluent_unstable","keyborg","useMemo","createKeyborg","defaultView","ref","useRef","useEffect","setBooleanAttribute","KEYBOARD_NAV_ATTRIBUTE","isNavigatingWithKeyboard","cb","next","subscribe","unsubscribe","exports","elementRef","attribute","value","current","setAttribute","removeAttribute"],"sources":["../src/packages/react-components/react-tabster/src/hooks/useKeyboardNavAttribute.ts"],"sourcesContent":["import { createKeyborg } from 'keyborg';\nimport { useEffect, useMemo, useRef } from 'react';\nimport { KEYBOARD_NAV_ATTRIBUTE } from '../focus/constants';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport type { KeyborgCallback } from 'keyborg';\nimport type { RefObject } from 'react';\n\n/**\n * Instantiates [keyborg](https://github.com/microsoft/keyborg) and adds `data-keyboard-nav`\n * attribute to a referenced element to ensure keyboard navigation awareness\n * synced to keyborg logic without having to cause a re-render on react tree.\n */\nexport function useKeyboardNavAttribute<E extends HTMLElement>() {\n  const { targetDocument } = useFluent();\n  const keyborg = useMemo(() => targetDocument && createKeyborg(targetDocument.defaultView!), [targetDocument]);\n  const ref = useRef<E>(null);\n  useEffect(() => {\n    if (keyborg) {\n      setBooleanAttribute(ref, KEYBOARD_NAV_ATTRIBUTE, keyborg.isNavigatingWithKeyboard());\n      const cb: KeyborgCallback = next => {\n        setBooleanAttribute(ref, KEYBOARD_NAV_ATTRIBUTE, next);\n      };\n      keyborg.subscribe(cb);\n      return () => keyborg.unsubscribe(cb);\n    }\n  }, [keyborg]);\n  return ref;\n}\n\nfunction setBooleanAttribute(elementRef: RefObject<HTMLElement>, attribute: string, value: boolean) {\n  if (!elementRef.current) {\n    return;\n  }\n  if (value) {\n    elementRef.current.setAttribute(attribute, '');\n  } else {\n    elementRef.current.removeAttribute(attribute);\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,SAAA,gBAAAC,OAAA;AACA,MAAAC,OAAA,gBAAAD,OAAA;AACA,MAAAE,WAAA,gBAAAF,OAAA;AACA,MAAAG,uBAAA,gBAAAH,OAAA;AAIA;;;;;AAKA,SAAgBI,uBAAuBA,CAAA;EACrC,MAAM;IAAEC;EAAc,CAAE,GAAGF,uBAAA,CAAAG,kBAAS,EAAE;EACtC,MAAMC,OAAO,GAAGN,OAAA,CAAAO,OAAO,CAAC,MAAMH,cAAc,IAAIN,SAAA,CAAAU,aAAa,CAACJ,cAAc,CAACK,WAAY,CAAC,EAAE,CAACL,cAAc,CAAC,CAAC;EAC7G,MAAMM,GAAG,GAAGV,OAAA,CAAAW,MAAM,CAAI,IAAI,CAAC;EAC3BX,OAAA,CAAAY,SAAS,CAAC,MAAK;IACb,IAAIN,OAAO,EAAE;MACXO,mBAAmB,CAACH,GAAG,EAAET,WAAA,CAAAa,sBAAsB,EAAER,OAAO,CAACS,wBAAwB,EAAE,CAAC;MACpF,MAAMC,EAAE,GAAoBC,IAAI,IAAG;QACjCJ,mBAAmB,CAACH,GAAG,EAAET,WAAA,CAAAa,sBAAsB,EAAEG,IAAI,CAAC;MACxD,CAAC;MACDX,OAAO,CAACY,SAAS,CAACF,EAAE,CAAC;MACrB,OAAO,MAAMV,OAAO,CAACa,WAAW,CAACH,EAAE,CAAC;;EAExC,CAAC,EAAE,CAACV,OAAO,CAAC,CAAC;EACb,OAAOI,GAAG;AACZ;AAfAU,OAAA,CAAAjB,uBAAA,GAAAA,uBAAA;AAiBA,SAASU,mBAAmBA,CAACQ,UAAkC,EAAEC,SAAiB,EAAEC,KAAc;EAChG,IAAI,CAACF,UAAU,CAACG,OAAO,EAAE;IACvB;;EAEF,IAAID,KAAK,EAAE;IACTF,UAAU,CAACG,OAAO,CAACC,YAAY,CAACH,SAAS,EAAE,EAAE,CAAC;GAC/C,MAAM;IACLD,UAAU,CAACG,OAAO,CAACE,eAAe,CAACJ,SAAS,CAAC;;AAEjD"}