{"version":3,"names":["react_utilities_1","require","keyboard_keys_1","useTableRow_1","dataGridContext_1","DataGridSelectionCell_1","rowIdContext_1","tableHeaderContext_1","useDataGridRow_unstable","props","ref","rowId","useTableRowIdContext","isHeader","useIsInTableHeader","columnDefs","useDataGridContext_unstable","ctx","columns","selectable","selectableRows","selected","selection","isRowSelected","tabbable","focusMode","appearance","selectionAppearance","toggleRow","dataGridContextValue","onClick","useEventCallback","e","_a","call","onKeyDown","key","Space","isInteractiveHTMLElement","target","preventDefault","baseState","useTableRow_unstable","undefined","children","as","tabIndex","components","selectionCell","DataGridSelectionCell","resolveShorthand","required","renderCell","exports"],"sources":["../src/packages/react-components/react-table/src/components/DataGridRow/useDataGridRow.tsx"],"sourcesContent":["import * as React from 'react';\nimport { isInteractiveHTMLElement, useEventCallback, resolveShorthand } from '@fluentui/react-utilities';\nimport { Space } from '@fluentui/keyboard-keys';\nimport type { DataGridRowProps, DataGridRowState } from './DataGridRow.types';\nimport { useTableRow_unstable } from '../TableRow/useTableRow';\nimport { useDataGridContext_unstable } from '../../contexts/dataGridContext';\nimport { DataGridSelectionCell } from '../DataGridSelectionCell/DataGridSelectionCell';\nimport { useTableRowIdContext } from '../../contexts/rowIdContext';\nimport { useIsInTableHeader } from '../../contexts/tableHeaderContext';\n\n/**\n * Create the state required to render DataGridRow.\n *\n * The returned state can be modified with hooks such as useDataGridRowStyles_unstable,\n * before being passed to renderDataGridRow_unstable.\n *\n * @param props - props from this instance of DataGridRow\n * @param ref - reference to root HTMLElement of DataGridRow\n */\nexport const useDataGridRow_unstable = (props: DataGridRowProps, ref: React.Ref<HTMLElement>): DataGridRowState => {\n  const rowId = useTableRowIdContext();\n  const isHeader = useIsInTableHeader();\n  const columnDefs = useDataGridContext_unstable(ctx => ctx.columns);\n  const selectable = useDataGridContext_unstable(ctx => ctx.selectableRows);\n  const selected = useDataGridContext_unstable(ctx => ctx.selection.isRowSelected(rowId));\n  const tabbable = useDataGridContext_unstable(ctx => ctx.focusMode === 'row_unstable');\n  const appearance = useDataGridContext_unstable(ctx => {\n    if (!isHeader && selectable && ctx.selection.isRowSelected(rowId)) {\n      return ctx.selectionAppearance;\n    }\n\n    return 'none';\n  });\n  const toggleRow = useDataGridContext_unstable(ctx => ctx.selection.toggleRow);\n  const dataGridContextValue = useDataGridContext_unstable(ctx => ctx);\n\n  const onClick = useEventCallback((e: React.MouseEvent<HTMLTableRowElement>) => {\n    if (selectable && !isHeader) {\n      toggleRow(e, rowId);\n    }\n\n    props.onClick?.(e);\n  });\n\n  const onKeyDown = useEventCallback((e: React.KeyboardEvent<HTMLTableRowElement>) => {\n    if (selectable && !isHeader && e.key === Space && !isInteractiveHTMLElement(e.target as HTMLElement)) {\n      // stop scrolling\n      e.preventDefault();\n      toggleRow(e, rowId);\n    }\n\n    props.onKeyDown?.(e);\n  });\n\n  const baseState = useTableRow_unstable(\n    {\n      appearance,\n      'aria-selected': selectable ? selected : undefined,\n      ...props,\n      onClick,\n      onKeyDown,\n      children: null,\n      as: 'div',\n      tabIndex: tabbable && !isHeader ? 0 : undefined,\n    },\n    ref,\n  );\n\n  return {\n    ...baseState,\n    components: {\n      ...baseState.components,\n      selectionCell: DataGridSelectionCell,\n    },\n    selectionCell: resolveShorthand(props.selectionCell, { required: selectable }),\n    renderCell: props.children,\n    columnDefs,\n    dataGridContextValue,\n  };\n};\n"],"mappings":"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"}