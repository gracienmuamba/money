{"version":3,"names":["react_tabster_1","require","react_utilities_1","contexts_1","react_aria_1","useDialogTrigger_unstable","props","isInsideSurfaceDialog","useDialogSurfaceContext_unstable","children","disableButtonEnhancement","action","child","getTriggerChild","requestOpenChange","useDialogContext_unstable","ctx","open","triggerAttributes","useModalAttributes","handleClick","useEventCallback","event","_b","_a","onClick","call","isDefaultPrevented","type","triggerChildProps","ref","ariaButtonTriggerChildProps","useARIAButtonProps","applyTriggerPropsToChildren","exports"],"sources":["../src/packages/react-components/react-dialog/src/components/DialogTrigger/useDialogTrigger.ts"],"sourcesContent":["import * as React from 'react';\nimport { useModalAttributes } from '@fluentui/react-tabster';\nimport { applyTriggerPropsToChildren, getTriggerChild, useEventCallback } from '@fluentui/react-utilities';\nimport type { DialogTriggerProps, DialogTriggerState } from './DialogTrigger.types';\nimport { useDialogContext_unstable, useDialogSurfaceContext_unstable } from '../../contexts';\nimport { useARIAButtonProps } from '@fluentui/react-aria';\n\n/**\n * Create the state required to render DialogTrigger.\n * Clones the only child component and adds necessary event handling behaviours to open a popup Dialog\n *\n * @param props - props from this instance of DialogTrigger\n */\nexport const useDialogTrigger_unstable = (props: DialogTriggerProps): DialogTriggerState => {\n  const isInsideSurfaceDialog = useDialogSurfaceContext_unstable();\n\n  const { children, disableButtonEnhancement = false, action = isInsideSurfaceDialog ? 'close' : 'open' } = props;\n\n  const child = getTriggerChild(children);\n\n  const requestOpenChange = useDialogContext_unstable(ctx => ctx.requestOpenChange);\n  const open = useDialogContext_unstable(ctx => ctx.open);\n\n  const { triggerAttributes } = useModalAttributes();\n\n  const handleClick = useEventCallback(\n    (event: React.MouseEvent<HTMLButtonElement & HTMLAnchorElement & HTMLDivElement>) => {\n      child?.props.onClick?.(event);\n      if (!event.isDefaultPrevented()) {\n        requestOpenChange({\n          event,\n          type: 'triggerClick',\n          open: action === 'open',\n        });\n      }\n    },\n  );\n\n  const triggerChildProps = {\n    ...child?.props,\n    'aria-expanded': open,\n    ref: child?.ref,\n    onClick: handleClick,\n    ...triggerAttributes,\n  } as const;\n\n  const ariaButtonTriggerChildProps = useARIAButtonProps(\n    child?.type === 'button' || child?.type === 'a' ? child.type : 'div',\n    {\n      ...triggerChildProps,\n      type: 'button',\n    },\n  );\n\n  return {\n    children: applyTriggerPropsToChildren(\n      children,\n      disableButtonEnhancement ? triggerChildProps : ariaButtonTriggerChildProps,\n    ),\n  };\n};\n"],"mappings":";;;;;;AACA,MAAAA,eAAA,gBAAAC,OAAA;AACA,MAAAC,iBAAA,gBAAAD,OAAA;AAEA,MAAAE,UAAA,gBAAAF,OAAA;AACA,MAAAG,YAAA,gBAAAH,OAAA;AAEA;;;;;;AAMO,MAAMI,yBAAyB,GAAIC,KAAyB,IAAwB;EACzF,MAAMC,qBAAqB,GAAGJ,UAAA,CAAAK,gCAAgC,EAAE;EAEhE,MAAM;IAAEC,QAAQ;IAAEC,wBAAwB,GAAG,KAAK;IAAEC,MAAM,GAAGJ,qBAAqB,GAAG,OAAO,GAAG;EAAM,CAAE,GAAGD,KAAK;EAE/G,MAAMM,KAAK,GAAGV,iBAAA,CAAAW,eAAe,CAACJ,QAAQ,CAAC;EAEvC,MAAMK,iBAAiB,GAAGX,UAAA,CAAAY,yBAAyB,CAACC,GAAG,IAAIA,GAAG,CAACF,iBAAiB,CAAC;EACjF,MAAMG,IAAI,GAAGd,UAAA,CAAAY,yBAAyB,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC;EAEvD,MAAM;IAAEC;EAAiB,CAAE,GAAGlB,eAAA,CAAAmB,kBAAkB,EAAE;EAElD,MAAMC,WAAW,GAAGlB,iBAAA,CAAAmB,gBAAgB,CACjCC,KAA+E,IAAI;;IAClF,CAAAC,EAAA,GAAAX,KAAK,aAALA,KAAK,wBAAAY,EAAA,GAALZ,KAAK,CAAEN,KAAK,EAACmB,OAAO,cAAAF,EAAA,uBAAAA,EAAA,CAAAG,IAAA,CAAAF,EAAA,EAAGF,KAAK,CAAC;IAC7B,IAAI,CAACA,KAAK,CAACK,kBAAkB,EAAE,EAAE;MAC/Bb,iBAAiB,CAAC;QAChBQ,KAAK;QACLM,IAAI,EAAE,cAAc;QACpBX,IAAI,EAAEN,MAAM,KAAK;OAClB,CAAC;;EAEN,CAAC,CACF;EAED,MAAMkB,iBAAiB,GAAG;IACxB,IAAGjB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEN,KAAK;IACf,eAAe,EAAEW,IAAI;IACrBa,GAAG,EAAElB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEkB,GAAG;IACfL,OAAO,EAAEL,WAAW;IACpB,GAAGF;GACK;EAEV,MAAMa,2BAA2B,GAAG3B,YAAA,CAAA4B,kBAAkB,CACpD,CAAApB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEgB,IAAI,MAAK,QAAQ,IAAI,CAAAhB,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEgB,IAAI,MAAK,GAAG,GAAGhB,KAAK,CAACgB,IAAI,GAAG,KAAK,EACpE;IACE,GAAGC,iBAAiB;IACpBD,IAAI,EAAE;GACP,CACF;EAED,OAAO;IACLnB,QAAQ,EAAEP,iBAAA,CAAA+B,2BAA2B,CACnCxB,QAAQ,EACRC,wBAAwB,GAAGmB,iBAAiB,GAAGE,2BAA2B;GAE7E;AACH,CAAC;AA/CYG,OAAA,CAAA7B,yBAAyB,GAAAA,yBAAA"}