{"version":3,"names":["react_shared_contexts_1","require","react_1","disableScrollElementProp","useDisableBodyScroll","targetDocument","useFluent_unstable","useCallback","disableScroll","body","exports","target","clientWidth","ownerDocument","documentElement","innerWidth","_b","_a","defaultView","assertIsDisableScrollElement","count","style","overflow","paddingRight","previousOverflowStyle","previousPaddingRightStyle","element"],"sources":["../src/packages/react-components/react-dialog/src/utils/useDisableBodyScroll.ts"],"sourcesContent":["import { useFluent_unstable } from '@fluentui/react-shared-contexts';\nimport { useCallback } from 'react';\n\nconst disableScrollElementProp = '__fluentDisableScrollElement' as const;\n\ntype FluentDisableScrollElement = HTMLElement & {\n  [disableScrollElementProp]: {\n    count: number;\n    previousOverflowStyle: string;\n    previousPaddingRightStyle: string;\n  };\n};\n\n/**\n * hook that disables body scrolling through `overflow: hidden` CSS property\n */\nexport function useDisableBodyScroll() {\n  const { targetDocument } = useFluent_unstable();\n  return useCallback(() => {\n    if (targetDocument) {\n      return disableScroll(targetDocument.body);\n    }\n  }, [targetDocument]);\n}\n\n/**\n * disables scrolling from a given element through `overflow: hidden` CSS property\n * @param target - element to disable scrolling from\n * @returns a method for enabling scrolling again\n */\nexport function disableScroll(target: HTMLElement) {\n  const { clientWidth } = target.ownerDocument.documentElement;\n  const innerWidth = target.ownerDocument.defaultView?.innerWidth ?? 0;\n  assertIsDisableScrollElement(target);\n  if (target[disableScrollElementProp].count === 0) {\n    target.style.overflow = 'hidden';\n    target.style.paddingRight = `${innerWidth - clientWidth}px`;\n  }\n  target[disableScrollElementProp].count++;\n  return () => {\n    target[disableScrollElementProp].count--;\n    if (target[disableScrollElementProp].count === 0) {\n      target.style.overflow = target[disableScrollElementProp].previousOverflowStyle;\n      target.style.paddingRight = target[disableScrollElementProp].previousPaddingRightStyle;\n    }\n  };\n}\n\nfunction assertIsDisableScrollElement(element: HTMLElement): asserts element is FluentDisableScrollElement {\n  (element as FluentDisableScrollElement)[disableScrollElementProp] ??= {\n    count: 0,\n    previousOverflowStyle: element.style.overflow,\n    previousPaddingRightStyle: element.style.paddingRight,\n  };\n}\n"],"mappings":";;;;;;AAAA,MAAAA,uBAAA,gBAAAC,OAAA;AACA,MAAAC,OAAA,gBAAAD,OAAA;AAEA,MAAME,wBAAwB,GAAG,8BAAuC;AAUxE;;;AAGA,SAAgBC,oBAAoBA,CAAA;EAClC,MAAM;IAAEC;EAAc,CAAE,GAAGL,uBAAA,CAAAM,kBAAkB,EAAE;EAC/C,OAAOJ,OAAA,CAAAK,WAAW,CAAC,MAAK;IACtB,IAAIF,cAAc,EAAE;MAClB,OAAOG,aAAa,CAACH,cAAc,CAACI,IAAI,CAAC;;EAE7C,CAAC,EAAE,CAACJ,cAAc,CAAC,CAAC;AACtB;AAPAK,OAAA,CAAAN,oBAAA,GAAAA,oBAAA;AASA;;;;;AAKA,SAAgBI,aAAaA,CAACG,MAAmB;;EAC/C,MAAM;IAAEC;EAAW,CAAE,GAAGD,MAAM,CAACE,aAAa,CAACC,eAAe;EAC5D,MAAMC,UAAU,GAAG,CAAAC,EAAA,IAAAC,EAAA,GAAAN,MAAM,CAACE,aAAa,CAACK,WAAW,cAAAD,EAAA,uBAAAA,EAAA,CAAEF,UAAU,cAAAC,EAAA,cAAAA,EAAA,GAAI,CAAC;EACpEG,4BAA4B,CAACR,MAAM,CAAC;EACpC,IAAIA,MAAM,CAACR,wBAAwB,CAAC,CAACiB,KAAK,KAAK,CAAC,EAAE;IAChDT,MAAM,CAACU,KAAK,CAACC,QAAQ,GAAG,QAAQ;IAChCX,MAAM,CAACU,KAAK,CAACE,YAAY,GAAG,GAAGR,UAAU,GAAGH,WAAW,IAAI;;EAE7DD,MAAM,CAACR,wBAAwB,CAAC,CAACiB,KAAK,EAAE;EACxC,OAAO,MAAK;IACVT,MAAM,CAACR,wBAAwB,CAAC,CAACiB,KAAK,EAAE;IACxC,IAAIT,MAAM,CAACR,wBAAwB,CAAC,CAACiB,KAAK,KAAK,CAAC,EAAE;MAChDT,MAAM,CAACU,KAAK,CAACC,QAAQ,GAAGX,MAAM,CAACR,wBAAwB,CAAC,CAACqB,qBAAqB;MAC9Eb,MAAM,CAACU,KAAK,CAACE,YAAY,GAAGZ,MAAM,CAACR,wBAAwB,CAAC,CAACsB,yBAAyB;;EAE1F,CAAC;AACH;AAhBAf,OAAA,CAAAF,aAAA,GAAAA,aAAA;AAkBA,SAASW,4BAA4BA,CAACO,OAAoB;;;EACxD,CAAAT,EAAA,IAAAD,EAAA,GAACU,OAAsC,EAACvB,wBAAwB,eAAAc,EAAA,cAAAA,EAAA,GAAAD,EAAA,CAAxBb,wBAAwB,IAAM;IACpEiB,KAAK,EAAE,CAAC;IACRI,qBAAqB,EAAEE,OAAO,CAACL,KAAK,CAACC,QAAQ;IAC7CG,yBAAyB,EAAEC,OAAO,CAACL,KAAK,CAACE;GAC1C;AACH"}