{"version":3,"names":["React","require","react_icons_1","react_label_1","react_utilities_1","validationMessageIcons","error","createElement","ErrorCircle12Filled","warning","Warning12Filled","success","CheckmarkCircle12Filled","none","undefined","useField_unstable","props","ref","children","orientation","required","validationState","validationMessage","size","baseId","useId","root","getNativeElementProps","label","resolveShorthand","defaultProps","id","role","hint","defaultIcon","validationMessageIcon","controlProps","isValidElement","_a","htmlFor","_b","filter","Boolean","join","_c","_d","cloneElement","components","Label","exports"],"sources":["../src/packages/react-components/react-field/src/components/Field/useField.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { CheckmarkCircle12Filled, ErrorCircle12Filled, Warning12Filled } from '@fluentui/react-icons';\nimport { Label } from '@fluentui/react-label';\nimport { getNativeElementProps, resolveShorthand, useId } from '@fluentui/react-utilities';\nimport type { FieldChildProps, FieldProps, FieldState } from './Field.types';\n\nconst validationMessageIcons = {\n  error: <ErrorCircle12Filled />,\n  warning: <Warning12Filled />,\n  success: <CheckmarkCircle12Filled />,\n  none: undefined,\n} as const;\n\n/**\n * Create the state required to render Field.\n *\n * The returned state can be modified with hooks such as useFieldStyles_unstable,\n * before being passed to renderField_unstable.\n *\n * @param props - Props passed to this field\n * @param ref - Ref to the root\n */\nexport const useField_unstable = (props: FieldProps, ref: React.Ref<HTMLDivElement>): FieldState => {\n  const {\n    children,\n    orientation = 'vertical',\n    required,\n    validationState = props.validationMessage ? 'error' : 'none',\n    size,\n  } = props;\n\n  const baseId = useId('field-');\n\n  const root = getNativeElementProps('div', { ...props, ref }, /*excludedPropNames:*/ ['children']);\n\n  const label = resolveShorthand(props.label, {\n    defaultProps: {\n      id: baseId + '__label',\n      required,\n      size,\n      // htmlFor is handled below\n    },\n  });\n\n  const validationMessage = resolveShorthand(props.validationMessage, {\n    defaultProps: {\n      id: baseId + '__validationMessage',\n      role: validationState === 'error' ? 'alert' : undefined,\n    },\n  });\n\n  const hint = resolveShorthand(props.hint, {\n    defaultProps: {\n      id: baseId + '__hint',\n    },\n  });\n\n  const defaultIcon = validationMessageIcons[validationState];\n  const validationMessageIcon = resolveShorthand(props.validationMessageIcon, {\n    required: !!defaultIcon,\n    defaultProps: {\n      children: defaultIcon,\n    },\n  });\n\n  const controlProps: FieldChildProps = React.isValidElement(children) ? { ...children.props } : {};\n\n  if (label) {\n    controlProps['aria-labelledby'] ??= label.id;\n\n    if (!label.htmlFor) {\n      // Assign the child a generated ID if doesn't already have an ID\n      controlProps.id ??= baseId + '__control';\n      label.htmlFor = controlProps.id;\n    }\n  }\n\n  if (validationMessage || hint) {\n    // The control is described by the validation message, or hint, or both\n    // We also preserve and append any aria-describedby supplied by the user\n    // For reference: https://github.com/microsoft/fluentui/pull/25580#discussion_r1017259933\n    controlProps['aria-describedby'] = [validationMessage?.id, hint?.id, controlProps['aria-describedby']]\n      .filter(Boolean)\n      .join(' ');\n  }\n\n  if (validationState === 'error') {\n    controlProps['aria-invalid'] ??= true;\n  }\n\n  if (required) {\n    controlProps['aria-required'] ??= true;\n  }\n\n  if (React.isValidElement(children)) {\n    root.children = React.cloneElement(children, controlProps);\n  } else if (typeof children === 'function') {\n    root.children = children(controlProps);\n  }\n\n  return {\n    orientation,\n    validationState,\n    components: {\n      root: 'div',\n      label: Label,\n      validationMessage: 'div',\n      validationMessageIcon: 'span',\n      hint: 'div',\n    },\n    root,\n    label,\n    validationMessageIcon,\n    validationMessage,\n    hint,\n  };\n};\n"],"mappings":"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"}